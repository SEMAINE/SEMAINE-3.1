<?eclipse.ant.import ?>
<project basedir="." default="jars" name="myname">
    
	<path id="SEMAINE-Java.classpath">
		<pathelement location="bin"/>
	    <pathelement location="lib/activemq-all-5.1.0.jar"/>
	    <pathelement location="lib/log4j-1.2.15.jar"/>
	    <pathelement location="lib/commons-logging-1.1.1.jar"/>
	    <pathelement location="lib/serializer.jar"/>
	    <pathelement location="lib/xercesImpl.jar"/>
	    <pathelement location="lib/xml-apis.jar"/>
            <pathelement location="lib/jgraph.jar"/>
	</path>
	
      <target name="cleanjars" depends="clean">
        <delete>
          <fileset dir="." includes="lib/semaine*.jar"/>
        </delete>
      </target>	

      <target name="jars" depends="build">
        <jar destfile="lib/semaine.jar" basedir="bin"
        	 includes="eu/**/*.class
                    eu/semaine/components/control/*.jpg
                    eu/semaine/components/dummy/example2.fap
      	            eu/semaine/components/dummy/example3.fap
                    eu/semaine/datatypes/stateinfo/stateinfo.config"
        	excludes="eu/semaine/components/dialogue/**/*.*
        	          eu/semaine/components/mary/**/*.*
                          eu/semaine/examples/**/*.*">
            <manifest>
                <attribute name="Built-By" value="${user.name}"/>
                <attribute name="Main-Class"
                    value="eu.semaine.system.ComponentRunner"/>
                <attribute name="Class-Path" 
                  value="commons-logging-1.1.1.jar activemq-all-5.1.0.jar log4j-1.2.15.jar xml-apis.jar xercesImpl.jar serializer.jar jgraph.jar swing-layout-1.0.jar"/>
            </manifest>
         </jar>
		<jar destfile="lib/semaine-dialogue.jar" basedir="bin"
			includes="eu/semaine/components/dialogue/**/*.class
					eu/semaine/components/dialogue/data/*">
			<manifest>
				<attribute name="Built-By" value="${user.name}"/>
				<attribute name="Main-Class"
					value="eu.semaine.system.ComponentRunner"/>
				<attribute name="Class-Path" 
					value="semaine.jar opennlp-tools-1.4.1/jwnl-1.3.3.jar opennlp-tools-1.4.1/maxent-2.5.1.jar opennlp-tools-1.4.1/opennlp-tools-1.4.1.jar opennlp-tools-1.4.1/trove.jar"/>
			</manifest>
		</jar>
		<jar destfile="lib/semaine-mary.jar" basedir="bin"
			includes="eu/semaine/components/mary/**/*.class
				eu/semaine/components/mary/**/*.xsl">
			<manifest>
				<attribute name="Built-By" value="${user.name}"/>
				<attribute name="Main-Class" value="eu.semaine.system.ComponentRunner"/>
				<attribute name="Class-Path" value="semaine.jar mary-common.jar"/>
			</manifest>
		</jar>
		<jar destfile="lib/semaine-examples.jar" basedir="bin"
			includes="eu/semaine/examples/**/*.class
				eu/semaine/examples/**/*.png">
                        <manifest>
                                <attribute name="Built-By" value="${user.name}"/>
                                <attribute name="Main-Class" value="eu.semaine.system.ComponentRunner"/>
                                <attribute name="Class-Path" value="semaine.jar semaine-mary.jar"/>
                        </manifest>
                </jar>

    </target>
	
	
	
	<target name="logger">
		<java classname="eu.semaine.jms.JMSLogReader" classpathref="SEMAINE-Java.classpath" fork="true" failonerror="true" />
	</target>	
	
	<property name="config" value="config/dummy-system.config"/>
	<target name="ComponentRunner">
		<java classname="eu.semaine.system.ComponentRunner" failonerror="true" fork="yes">
			<arg line="${config}"/>
			<classpath refid="Subversion dummy.classpath"/>
		</java>
	</target>
	    
	<target name="JMSLogReader">
		<java classname="eu.semaine.jms.JMSLogReader" failonerror="true" fork="yes">
			<classpath refid="Subversion dummy.classpath"/>
		</java>
	</target>
    
</project>
