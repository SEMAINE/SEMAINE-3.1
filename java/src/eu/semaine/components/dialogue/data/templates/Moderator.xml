<behaviourtemplates xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.w3schools.com template.xsd">

<!-- Introduction -->
	<template id="Greta_intro_1" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.introState" comparator="not_exists" />
			<indicator startvalue="0" comparator="equals" endvalue="1">
				<icompare value1="$Agent.dialogContext" value2="Introduction" modifier="+1" />
				<icompare value1="$Agent.dialogContext" comparator="not_exists" modifier="+1" />
			</indicator>
			<trigger value1="$User.present" value2="1" />
		</preconditions>
		<effects>
			<update name="User.presentStateChanged" value="0" />
			<update name="DialogueState.introState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#Greta0" />
		</behaviour>
	</template>
	
	<template id="Greta_intro_2" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.introState" value2="1" />
			<trigger value1="$Agent.speakingState" value2="listening" />
		</preconditions>
		<effects>
			<update name="DialogueState.introState" value="2" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#Greta1" />
		</behaviour>
	</template>
	
	<template id="Greta_intro_3" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.introState" value2="2" />
			<trigger value1="$Agent.speakingState" value2="listening" />
		</preconditions>
		<effects>
			<update name="DialogueState.introState" value="3" />
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Prudence" />
				<argument value="contextstate" />
			</function>
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToPrudence" />
		</behaviour>
	</template>
	
<!-- Evaluation -->
	<template id="Greta_eval_1_Poppy" name="Start evaluation interaction">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" comparator="not_exists" />
			<compare value1="$Agent.previousCharacter" value2="Poppy" />
			<compare value1="$Agent.dialogContext" value2="Questions" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPreviousPoppy" />
		</behaviour>
	</template>
	<template id="Greta_eval_1_Prudence" name="Start evaluation interaction">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" comparator="not_exists" />
			<compare value1="$Agent.previousCharacter" value2="Prudence" />
			<compare value1="$Agent.dialogContext" value2="Questions" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPreviousPrudence" />
		</behaviour>
	</template>
	<template id="Greta_eval_1_Obadiah" name="Start evaluation interaction">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" comparator="not_exists" />
			<compare value1="$Agent.previousCharacter" value2="Obadiah" />
			<compare value1="$Agent.dialogContext" value2="Questions" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPreviousObadiah" />
		</behaviour>
	</template>
	<template id="Greta_eval_1_Spike" name="Start evaluation interaction">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" comparator="not_exists" />
			<compare value1="$Agent.previousCharacter" value2="Spike" />
			<compare value1="$Agent.dialogContext" value2="Questions" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPreviousSpike" />
		</behaviour>
	</template>
	<template id="Greta_eval_1_None" name="Start evaluation interaction">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" comparator="not_exists" />
			<compare value1="$Agent.previousCharacter" comparator="not_exists" />
			<compare value1="$Agent.dialogContext" value2="Questions" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="1" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEval0" />
		</behaviour>
	</template>


	<!-- 
	<template id="Greta_eval_2" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="1" />
			<trigger value1="$Agent.speakingState" value2="listening" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="2" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEval1" />
		</behaviour>
	</template>
	-->
		<template id="Greta_eval_felt_0" name="Question how you felt">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="1" />
			<trigger value1="$Agent.speakingState" value2="listening" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="2" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalFelt0" />
		</behaviour>
	</template>
	
		<template id="Greta_eval_felt_1" name="Question how you felt">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="2" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="3" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalFelt1" />
		</behaviour>
	</template>
	
			<template id="Greta_eval_natural_0" name="Question how natural">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="3" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" /> 
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="4" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalNatural0" />
		</behaviour>
	</template>
	
		<template id="Greta_eval_natural_1" name="Question how natural">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="4" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="5" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalNatural1" />
		</behaviour>
	</template>

			<template id="Greta_eval_out_0" name="Question how much out of place">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="5" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" /> 
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="6" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalOut0" />
		</behaviour>
	</template>
	
		<template id="Greta_eval_out_1" name="Question how much out of place">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="6" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="7" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalOut1" />
		</behaviour>
	</template>

			<template id="Greta_eval_involved_0" name="Question how involved">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="7" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" /> 
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="8" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalInvolved0" />
		</behaviour>
	</template>
	
		<template id="Greta_eval_involved_1" name="Question how involved">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="8" />
		</preconditions>
		<effects>
			<update name="DialogueState.evalState" value="10" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaEvalInvolved1" />
		</behaviour>
	</template>
	
	<template id="Greta_eval_3" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="10" />
			<compare value1="$Agent.nextCharacter" value2="Poppy" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Poppy" />
				<argument value="contextstate" />
			</function>
			<remove name="DialogueState.evalState" />
			<remove name="Agent.dialogContext" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToPoppy" />
		</behaviour>
	</template>
	
	<template id="Greta_eval_4" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="10" />
			<compare value1="$Agent.nextCharacter" value2="Prudence" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Prudence" />
				<argument value="contextstate" />
			</function>
			<remove name="DialogueState.evalState" />
			<remove name="Agent.dialogContext" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToPrudence" />
		</behaviour>
	</template>
	
	<template id="Greta_eval_5" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="10" />
			<compare value1="$Agent.nextCharacter" value2="Obadiah" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Obadiah" />
				<argument value="contextstate" />
			</function>
			<remove name="DialogueState.evalState" />
			<remove name="Agent.dialogContext" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToObadiah" />
		</behaviour>
	</template>
	
	<template id="Greta_eval_6" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$DialogueState.evalState" value2="10" />
			<compare value1="$Agent.nextCharacter" value2="Spike" />
			<trigger value1="$Agent.speakingIntention" value2="want_turn" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Spike" />
				<argument value="contextstate" />
			</function>
			<remove name="DialogueState.evalState" />
			<remove name="Agent.dialogContext" />
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToSpike" />
		</behaviour>
	</template>
	
<!-- Announcements -->
	<template id="Greta_Announce_1" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$Agent.nextCharacter" value2="Poppy" />
			<compare value1="$Agent.dialogContext" value2="AnnounceNextCharacter" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Poppy" />
				<argument value="contextstate" />
			</function>
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToPoppy" />
		</behaviour>
	</template>
	
	<template id="Greta_Announce_1" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$Agent.nextCharacter" value2="Prudence" />
			<compare value1="$Agent.dialogContext" value2="AnnounceNextCharacter" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Prudence" />
				<argument value="contextstate" />
			</function>
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToPrudence" />
		</behaviour>
	</template>
	
	<template id="Greta_Announce_1" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$Agent.nextCharacter" value2="Obadiah" />
			<compare value1="$Agent.dialogContext" value2="AnnounceNextCharacter" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Obadiah" />
				<argument value="contextstate" />
			</function>
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToObadiah" />
		</behaviour>
	</template>
	
	<template id="Greta_Announce_1" name="Introduction after system-start">
		<preconditions>
			<compare value1="$Agent.character" value2="Greta" />
			<compare value1="$Agent.nextCharacter" value2="Spike" />
			<compare value1="$Agent.dialogContext" value2="AnnounceNextCharacter" />
		</preconditions>
		<effects>
			<function name="sendDataAtEndOfTurn">
				<argument value="character" />
				<argument value="Spike" />
				<argument value="contextstate" />
			</function>
		</effects>
		<behaviour class="ResponseActionProposer" quality="1">
			<argument name="response" value="#GretaPassToSpike" />
		</behaviour>
	</template>

</behaviourtemplates>