<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en"><html><head>  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">  <link rel="stylesheet" href="style.css">  <title>Psyclone:Manual:Part3 of 4</title>  <script language="JavaScript">//if (self != top) {top.location=self.location;}//self.resizeTo(760,screen.availHeight)function stopErrors() {return true;}window.onerror = stopErrors;  </script>  <script language="JavaScript">function showAboutBox(thePage) {window.open(thePage, "About", 'width=190,height=100,toolbar=no,scrollbars=no,directories=no,menubar=no,status=no'); }function launchPostMessage(thePage) {window.open(thePage,'Post_Message','width=760,height=700,toolbar=yes,resize=yes,scrollbars=yes,directories=no,menubar=no,status=no'); }function openPage(thePage) {window.open(thePage,'','width=700,height=600,toolbar=yes,resize=yes,scrollbars=yes,directories=no,menubar=no,status=no'); }  </script><!--990000 //cccc99 -->  <link href="style.css" rel="stylesheet" type="text/css"></head><body leftmargin="20" topmargin="20" size="-2" face="Verdana, Arial, Helvetica, sans-serif" style="color: rgb(102, 0, 0);" link="#914e23" alink="#cc0000" vlink="#73643f"><div align="center">   <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" height="36" width="688">    <tbody>      <tr align="right" valign="bottom">         <td class="navLink" align="left" height="18" width="129">&nbsp;</td>        <td class="navLink" align="left" height="18" width="130">&nbsp;</td>        <td class="navLink" align="left" height="30" width="217"> <div align="right"></div></td>        <td class="navLink" width="109">&nbsp;</td>        <td class="navLink" width="103"><a href="index.html">index_:</a>:</td>      </tr>      <tr align="right" valign="middle">         <td colspan="5" align="left" height="18"><br> <img src="images/simple-circle-line-1.gif"></td>      </tr>    </tbody>  </table>  <table WIDTH="688" HEIGHT="92" BORDER=0 align="center" CELLPADDING=0 CELLSPACING=0 >    <tr>       <td ALIGN=LEFT VALIGN=middle WIDTH="300" HEIGHT="76" BACKGROUND=""><img src="images/psycloneManualLogo.gif">       </td>      <td ALIGN=LEFT VALIGN=middle WIDTH="388" BACKGROUND=""><div align="center" class="boxTitle"><font size="3">           <font size="2"><b><a href="psycloneTutorial.html" target="_blank"><font size="3">FUNCTIONALITIES</font></a></b><font size="3"><br>          </font> PART 3 of 4 </font></font></div></td>    </tr>    <tr>       <td HEIGHT="11" colspan="2" ALIGN=LEFT VALIGN=middle BACKGROUND=""><img src="images/simple-circle-line-1.gif" ></td>    </tr>  </table></div><table width="688" height="32" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td class="tutorialSectionHeading" align="left" height="32" valign="middle" width="147"><b><a href="index.html" class="tutorialSubsectionHeading">Back         to Index</a></b></td>      <td align="left" valign="CENTER" width="95"></td>      <td class="smallSizeNonConspicuous" align="right" valign="middle" width="446">An         index to the sections below is stored in index.html <br>        that should be part of the distribution that includes this file</td>    </tr>  </tbody></table><p align="center"><img src="images/simple-circle-line-1.gif"></p><p>&nbsp;</p><table width="689" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#999999" bgcolor="#cccccc">  <tbody>    <tr>      <td width="681" height="21432" valign="top" bordercolor="#999999" bgcolor="#cccccc">         <p><br>        </p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="461"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="spec:thebasics" id="spec:thebasics"></a><a name="spec:whiteboards" id="spec:whiteboards"></a><a name="writingapsyspec" id="writingapsyspec"></a><a name="spec:runningpsyspec" id="spec:runningpsyspec"></a><a name="usingpsyspec" id="usingpsyspec"></a>Writinga psySpec</font></font></font></b></td>            <td align="right" width="117"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>              <td class="navLink" align="right" width="92"><a href="psycloneManual.html#psy:psyspec">definition_:</a>:</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="1721" valign="top"> <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">A                   simple <span class="navLink"><b><a href="psycloneManual.html#psy:psyspec">psySpec</a></b></span>                   contains initialization values for Psyclone at startup; an advanced                   psySpec contains the <span class="keyConcept">complete specification                   for a whole system architecture</span>, and enables its automatic                   management. It can be used to specify one or more Whiteboards,                   the external and internal modules, <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">as                   well as global parameters </font></font>of the system.</font></font><font color="#333333" size="-1">                   </font><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">The                   </font></font></font></font> <span class="navLink"> <a href="#runningdominospsyspec">dominosPsySpec.xml</a></span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font color="#333333"><a href="#runningdominospsyspec">                   is a tutorial example psySpec</a> for demonstrating the use                   of <a href="psycloneManual.html#psy:contexts">contexts</a> in                   Psyclone. </font></font></font></font></p>                <blockquote>                  <p class="mediumSizeNonConspicuous">Components can be created                     and destroyed at runtime by sending a message of type Psyclone.System.Create.[component-type],                     where component-type is one of {Module, Whiteboard, Stream}.                   </p>                </blockquote>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">The                   psySpec is read in by doing:</font></font></p>                <p>&nbsp;&nbsp; psyclone port=[port] spec="[psySpecName]" </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;Example:</font></font>                   <font color="#333333"><br>                  </font> <span class="commandlineText">&nbsp; &gt;./psyclone                   port=10000 spec="dominosPsySpec.xml" </span> </p>                <p><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">If                   no psySpec is given, Psyclone will look for a file called psySpec.xml.                   If none is found, it will automatically create two Whiteboards                   by default, named <strong>WB1</strong> and <strong>WB2</strong>.</font></font></font>                   Port defaults to 10000 if not specified.</p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The                   <span class="navLink"><b><a href="psycloneManual.html#psy:psyspec">psySpec</a></b></span>                   contains the intialization values for Psyclone at startup. It                   can be used to specify one or more Whiteboards, as well as the                   modules of the system.</font></font></font> </p>                <p>Here is a simple example of a psySpec, specifying some global                   variables, a Whiteboard called <strong>WB1</strong> and one                   module called <strong>Startup</strong>: </p>                <p> <span class="codeXML">&nbsp;&nbsp;&nbsp;&lt;psySpec name="</span><span class="dataValue">psySpec                   Example</span><span class="codeXML">" <a href="#spec:version">version</a>="</span><span class="dataValue">1.2</span><span class="codeXML">"&gt;                   &nbsp; </span> </p>                <blockquote>                   <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                     name="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;</span>                     <span class="codeXML"><br>                    &nbsp;&nbsp; &nbsp;&nbsp;&lt;description&gt;</span><span class="dataValue">This                     is a basic Whiteboard</span><span class="codeXML">&lt;/description&gt;<br>                    &nbsp;&nbsp;&lt;/whiteboard&gt; </span> </p>                  <p class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:module">module</a>                     name="<span class="dataValue">Startup</span>" type=&quot;<span class="dataValue">internal</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;<span class="dataValue">Bootstrap                     by posting a root context upon system ready</span>&lt;/description&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:context">context</a>                     name="<span class="dataValue">System</span>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:phase">phase</a>                     name="<span class="dataValue">Look for System Created</span>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers                     from="<a href="#spec:any" class="dataValue">any</a>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:trigger">trigger</a>                     type="<span class="dataValue">System.Ready</span>" <a href="#spec:after">after="</a><span class="dataValue"><a href="#spec:after=%22100%22">100</a></span><a href="#spec:after=%22100%22">"</a>                     /&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:post">post</a>                     to="<span class="dataValue">WB1</span>" type="<a href="#spec:Psyclone.Context:SoB.Alive" class="dataValue">Psyclone.Context:SoB.Alive</a>"                     /&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>                    &nbsp;&nbsp; &lt;/module&gt; </p>                </blockquote>                <p class="codeXML"> &nbsp;&nbsp;&nbsp;&lt;/psySpec&gt; </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">(The                   tags context and phase may be omitted.) This psySpec creates                   one Whiteboard called <strong>WB1</strong>, and one internal                   module called <strong>Startup</strong>. When the Psyclone Factory                   posts some initial System messages to all Whiteboards, Startup                   goes into context. </font></font></font></p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><a name="spec:Psyclone.Context:SoB.Alive" id="spec:Psyclone.Context:SoB.Alive"></a></font></font></font></font></font></font></b></font><font size="-1">Then,                   when the Factory posts message System.Ready, Startup gets triggered                   and posts the message of type <strong>Psyclone.Context:SoB.Alive</strong>.                   This posting is a signal to the context system in Psyclone to                   make the context <strong>SoB.Alive</strong> active.</font></font></font>                   (If you are wondering where the crank is for this module: When                   you don't specify a crank Psyclone will use its default crank                   that simply posts upon triggering.) </p>                <p>To specify a module that runs external to Psyclone:</p>                <blockquote>                   <p class="codeXML"> &lt;module ... type=&quot;<span class="dataValue">external</span>&quot;&gt;</p>                </blockquote>                <p> (If <span class="codeXML">type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;</span>                   is omitted and an <span class="codeXML">&lt;executable&gt;</span>                   is defined, it is assumed to be an external module.)</p>                <p> The <span class="codeXML">&lt;command&gt;</span> tag inside                   <span class="codeXML"> &lt;executable&gt;</span> can hold a                   command to be executed automatically by Psyclone:</p>                <blockquote>                   <p class="codeXML">&lt;executable name=&quot;<span class="dataValue">myexe</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command&gt;<em>command-line command                     to be executed</em>&lt;/command&gt;<br>                    &lt;/executable&gt;</p>                </blockquote>                <p> For example:</p>                <blockquote>                   <p class="codeXML"> &lt;executable name=&quot;<span class="dataValue">myexe</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command osmem=&quot;<span class="dataValue">256</span>&quot;&gt;<span class="dataValue">./big_java</span>&lt;/command&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command osmem=&quot;<span class="dataValue">64</span>&quot;&gt;<span class="dataValue">./small_java</span>&lt;/command&gt;<br>                    &lt;/executable&gt;</p>                </blockquote>                <p>Further details on the use of the psySpec are listed in various                   sections; see the following sections.</p>                <hr size="1" noshade> <p class="tutorialSubsectionHeading">List                   of psySpec tags</p>                <p><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><a name="spec:global" id="spec:global"></a></font></font></font></font></font></font></b></font><span class="keyConcept"><font face="Verdana, Arial, Helvetica, sans-serif">&lt;version&gt;</font></span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">                   Psyclone tracks the versions of psySpec syntax and provides                   startup information on backward and forward compatibility of                   a psySpec.</font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <span class="keyConcept">&lt;global&gt;</span>                   This is a general section that contains global parameters for                   psyclone.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <span class="keyConcept">&lt;psyprobe&gt;</span>                   PsyProbe is the web-based interface to Psyclone. It defaults                   to port 10000, so technically this example is redundant. Here                   you can change it.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:whiteboard" id="spec:whiteboard"></a><span class="keyConcept">&lt;whiteboard&gt;                   </span>Here we have specified a <a href="psycloneManual.html#psy:whiteboard">whiteboard</a>                   with a simple description. Whiteboards must have unique names.</font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><a name="spec:module" id="spec:module"></a><span class="keyConcept">&lt;module&gt;</span>                   We have specified one module called Startup. Modules must have                   unique names. </font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><a name="spec:context" id="spec:context"></a><span class="keyConcept">&lt;context&gt;</span>                   This module will be "in context", as it's called &#8212; i.e.                   listening for its triggers &#8212; during one context, namely,                   the System context. Since contexts are posted automatically                   to all Whiteboards (the message type Psyclone.Context is global),                   there is no need to specify which Whiteboard the context lives                   on. </font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:phase" id="spec:phase"></a><span class="keyConcept">&lt;phase&gt;</span>                   This module only has one <a href="psycloneManual.html#psy:phase">phase</a>,                   named Look for system created. Having one phase means that the                   module only will always have the same triggers during the System                   <a href="psycloneManual.html#psy:context">context</a>.</font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:trigger" id="spec:trigger"></a><span class="keyConcept">&lt;trigger&gt;</span>                   Here we have given the module one <a href="psycloneManual.html#psy:trigger">trigger</a>,                   namely, System.Ready. When the message type <span class="keyConcept">System.Ready</span>                   gets posted, the module will be <a href="psycloneManual.html#psy:wakeup"><span class="navLink">woken                   up</span></a> with an <span class="keyConcept">AIR.Instruct.Wakeup</span>                   message. This message will contain the message which caused                   the triggering, as well as the phaseSpec (the XML within the                   &lt;phase&gt; tags) for the module. <a name="spec:later" id="spec:later"></a>Here,                   the parameter after states that the wakeup message should be                   sent 100 milliseconds after the trigger message <span class="keyConcept">System.Ready</span>                   gets posted.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:post" id="spec:post"></a><span class="keyConcept">&lt;post&gt;</span>                   This module is designed to post a context. To do this it uses                   the message type <span class="keyConcept">Psyclone.Context</span>.                   The module, when woken up, will automatically post a context                   message with the value SoB.Alive &#8212; the actual context                   that gets posted. Any module that has listed SoB.Alive as their                   context will then be in context, ready to be woken up by any                   of its trigger messages, should they get posted.</font> <font size="1"><b>                   </b></font></p>                <p><span class="mediumSizeNonConspicuous"><font size="1"><b>RELATED:</b></font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="#usingcontexts">contexts </a><a href="#runningdominospsyspec">running                   the dominoPsySpec</a> <a href="#spec:phases">phases</a> <a href="#spec:wakeup">wakeup</a>                   </span></font></font></font> </b></font></p></td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" height="1358" width="668">          <tbody>            <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td class="tutorialSubsectionHeading" height="30" width="364"><a name="creatingandusingwhiteboards" id="creatingandusingwhiteboards"></a>Creating                 and Using Whiteboards</td>              <td align="right" width="81">&nbsp;</td>              <td align="right" width="120"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="87">&nbsp;</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="1328" valign="top">                 <p>To specify a whiteboard                   in the psySpec (or dynamically), this is the basic syntax:</p>                <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                   name="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;</span>                   <span class="codeXML"><br>                  &nbsp;&nbsp; &nbsp;&nbsp;&lt;description&gt;</span><span class="dataValue">This                   is a basic Whiteboard</span><span class="codeXML">&lt;/description&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </span> </p>                <p>This creates a whiteboard called WB1. (All whiteboards (and                   modules) in Psyclone must have unique names.) </p>                <p>To limit the number of messages stored, use the max= parameter:</p>                <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                   name="</span><span class="dataValue">WB1</span><span class="codeXML">"                   maxcount=&quot;</span><span class="dataValue">10000</span><span class="codeXML">&quot;&gt;</span>                 </p>                <p>This will limit the number of messages to 10000; when message                   10001 is recieved the oldest message will be permanently destroyed                   by the whiteboard.</p>                <p><a name="mediastreams"></a>Media streams can bespecified for                   whiteboards in the <a href="psycloneManual.html#psy:psyspec" class="navLink">psySpec</a>                   like this:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"                   maxcount="<span class="dataValue">15000</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;<span class="dataValue">My                   Whiteboard</span>&lt;/description&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;streams&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Raw</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc1</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc2</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/streams&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p> The <span class="keyConcept">MyWB</span> whiteboard will now                   contain four circular media streams, each which has a max buffer                   size of 10 megabytes. After this limit is reached the oldest                   data samples are deleted. (Notice that the names of the streams                   have no semantic meaning to the system.)</p>                <p>Whiteboards can be created and destroyed dynamically by sending                   a message to 'Psyclone' with type </p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Create.Whiteboard                 </p>                <p>Include the spec for the whiteboard in the content of the message.                   To destroy a whiteboard use:</p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Destroy.Whiteboard                 </p>                <p>Streams can be added to a whiteboard by sending the message</p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Create.Stream</p>                <p>to 'Psyclone' with the whiteboard spec:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p>where MyWB is a whiteboard already in existence. The maxsize=                   parameter sets the size of the circular stream buffer to 10                   megabytes. </p>                <p> Streams can also be created outside whiteboards by simply                   putting the following in the content:</p>                <p class="codeXML">&nbsp;&nbsp;&nbsp;&lt;stream name=&quot;<span class="dataValue">Input.Stream.Video.Raw</span>&quot;                   maxsize=&quot;<span class="dataValue">10</span>&quot; /&gt;                 </p>                <p>The following will create a standalone stream in a satellite                   called <span class="keyConcept">Sat1</span>: </p>                <p class="codeXML"> &nbsp;&nbsp;&nbsp;&lt;stream name=&quot;<span class="dataValue">Input.Stream.Video.Raw</span>&quot;                   maxsize=&quot;<span class="dataValue">10</span>&quot; satellite=&quot;<span class="dataValue">Sat1</span>&quot;                   /&gt;&nbsp;                 <p class="codeXML">&nbsp;                <p><span class="tutorialSectionHeading"><a name="whiteboards:throughput" id="whiteboards:throughput"></a>                   Using Timing With High-Volume Posting <br>                  </span>When Modules post messages faster than the receiving                   Whiteboards can process them, the posting may be slowed down                   by the Whiteboard itself. The simplest way for a Module to detect                   that a Whiteboard is getting too busy is to put a simple timer                   around the posting itself, to measure if the posting at some                   point starts taking longer than usual.                 <p> In C++ you can do this very easily using the JTime object:                 <blockquote>                   <p class="codeJava"> JTime start;<br>                    // post message to Whiteboard<br>                    int dif = start.getMicroAge(); // returns microsecond time</p>                </blockquote>                <p> In Java you can do this with millisecond accuracy using                 <blockquote>                  <p class="codeJava"> long start = System.currentTimeMillis();<br>                    // post message to Whiteboard<br>                    int dif = start - System.currentTimeMillis(); // returns microsecond                     time</p>                </blockquote>                <p> You can then notice if the posting starts taking much longer                   than usual and take the appropriate action.                 <p class="codeXML">&nbsp;                <p class=MsoNormal><o:p><span class="mediumSizeNonConspicuous"><font size="1"><b>RELATED:</b></font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="http://corelibrary.sourceforge.net/docexamples.html#_Third_Party">                   tutorial on SourceForge</a> </span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><span class="navLink"><a href="http://corelibrary.sourceforge.net/">CoreLibrary                   on SourceForge</a></span></font></font></b></font></font></font></font></b></font></o:p></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="461"><a name="usingretrieves" id="usingretrieves"></a><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Using                 Retrieves to Retrieve Past Information</font></font></font></b></td>              <td align="right" width="117"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td class="navLink" align="right" width="92"><a href="psycloneManual.html#psy:retrieve">definition_:</a>:</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="1796" valign="top">                 <p> In addition to being triggered by information that a module                   is subscribed for, a module can also ask to be given old information.                   Your module can retrieve dynamically (at runtime). The runtime                   method requires the module itself to decide when to do the retrieval.                   Alternatively, your module definition in the psySpec can include                   a retrieve spec.</p>                <p>The                   XML for the retreiving looks like this:</p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML"><span class="mediumSizeNonConspicuous">&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger                     from=&quot;WB1&quot; type=&quot;Input.Sens.MultiM.Vision.Human.Found.True&quot;/&gt;<br>                    </span> &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.UniM.Hear.Human.Voice</span>&quot;/&gt;                    <br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">3</span>&lt;/latest&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">8000</span>&lt;/lastmsec&gt;<br>                    &nbsp;&nbsp;&lt;/retrieve&gt; </latest></retrieve>    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML"></latest></retrieve>The                   first retrieve asks to be sent a message of type <span class="keyConcept">Input.Sens.UniM.Hear.Human.Voice</span>                   along with the message type <span class="keyConcept">Input.Sens.MultiM.Vision.Human.Found.True</span>                   to which it has subscribed; the second retrieve asks to be sent                   a message of type <span class="keyConcept">Input.Sens.MultiM.Vision.Human</span>                   along with that, but with the conditions that if there are more                   than 3 such messages in the <span class="keyConcept">last 8                   seconds</span> it will only return the <span class="keyConcept">3                   most recent </span>of those. All conditions that are listed                   like that are <span class="keyConcept">AND</span>ed together.</p>                <p>You can also group them using a retrieves tag:</p>                <blockquote>                   <p>&lt;retrieves&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WB3</span>&quot;                     type=&quot;<span class="dataValue">xxx</span>&quot;/&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WB2</span>&quot;                     type=&quot;<span class="dataValue">yyy</span>&quot;/&gt;<br>                    &lt;/retrieves&gt; </p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>You                   can retrieve based on several features:</latest></retrieve></p>                <ul>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest>                     <span class="basicBullets">message ID</span></latest></retrieve>                     <ul>                      <li class="codeXML"><span class="basicBullets">Example:                         </span>&lt;retrieve id=&quot;<span class="dataValue">[GUID]</span>&quot;/&gt;                         <span class="basicBullets">where GUID is the unique id                         of a message</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">message                     sender</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex: </span><span class="codeXML">&lt;retrieve                         sender=&quot;</span><span class="dataValue">HumanTracker1</span><span class="codeXML">&quot;/&gt;</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">message                     type</span></latest></retrieve>                     <ul>                      <li class="basicBullets">Ex: <span class="codeXML">&lt;retrieve                         from=&quot;</span><span class="dataValue">WBX</span><span class="codeXML">&quot;                         type=&quot;</span><span class="dataValue">Output.Plan</span><span class="codeXML">&quot;/&gt;</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">content</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex: </span><span class="codeXML">&lt;retrieve                         content=&quot;</span><span class="dataValue">*green tomato*</span><span class="codeXML">&quot;/&gt;</span>                         <span class="basicBullets">will return any message where                         the phrase &quot;green tomato&quot; appears anywhere in                         the content of the message. The stars mean that anything                         can come before and after the two words. </span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">contentmatch</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex:</span> <span class="codeXML">&lt;retrieve                         contentmatch=&quot;</span><span class="dataValue">xml</span><span class="codeXML">&quot;                         content=&quot;</span><span class="dataValue">*green tomato*</span><span class="codeXML">&quot;/&gt;                         </span><span class="basicBullets">will work like the last                         example, but in addition the </span><span class="codeXML">contentmatch=&quot;</span><span class="dataValue">xml</span><span class="codeXML">&quot;</span><span class="basicBullets">                         will force matching to also be done on the XML itself,                         i.e. tag names, parameter names, etc. </span><span class="mediumSizeNonConspicuous">Notice:                         You cannot use the reserved XML symbols like &lt; &gt;                         / &amp; &quot; etc.</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">Time:                     aftertime, untiltime</span></latest></retrieve><span class="basicBullets">,                     <retrieve from="BBX" type="Input.Person.Found.True"><latest>                     latest, lastms</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True"><latest>ec</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></span></li>                </ul>                <p><span class="basicBullets"><retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></span><retrieve from="BBX" type="Input.Person.Found.True"><latest>The                   last constraints, aftertime, untiltime, latest and lastmsec,                   are done with tags, as the example above has shown for latest                   and lastmsec. The others are used precisely in the same way.</latest></retrieve><br>                  <retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="keyConcept">aftertime</span>                   means anything that has happened after the particular timestamp                   used;<br>                  <span class="keyConcept">untiltime</span> will mean anything                   that happened before that timestamp. </latest></retrieve></p>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>The                   <span class="codeXML"> &lt;retrieve&gt;</span> spec also allows                   these three additional constraints which specify retrieval relative                   to the posting of <a href="#usingcontexts"><span class="navLink">contexts</span></a>:</latest></retrieve></p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML">                     &lt;retrieve&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;before&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/before&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;during&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/during&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;after&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/after&gt;<br>                    &lt;retrieve&gt;</latest></retrieve>    &nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;</p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>                   <span class="keyConcept">before</span> means any time before                   this context last became active.<br>                  <span class="keyConcept">during</span> means any time between                   this context last became active and subsequently <br>                  became inactive.<br>                  <span class="keyConcept">after</span> means any time after this                   context last became inactive.</latest></retrieve></p>                <hr> <retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve>                 <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="tutorialSectionHeading">Specifying                   Retrieves in the psySpec</latest></retrieve></p>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>When                   using retrieves in the psySpec the above example would look                   like this: </latest></retrieve></p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML">&lt;module                     name=&quot;<span class="dataValue">HumanTracker1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&lt;trigger from=&quot;<span class="dataValue">WB1</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human.Found.True</span>&quot;/&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.UniM.Hear.Human.Voice</span>&quot;/&gt;                    <br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">3</span>&lt;/latest&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">8000</span>&lt;/lastmsec&gt;<br>                    &nbsp;&nbsp;&lt;/retrieve&gt; <br>                    &nbsp;&nbsp;. . .<br>                    &lt;/module&gt; </latest></retrieve>    &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;    <retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></p>                </blockquote>                <hr> <retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve>                 <p><retrieve from="BBX" type="Input.Person.Found.True" class="tutorialSectionHeading"><latest>Using                   Retrieves in Code</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True" class="tutorialSectionHeading"><latest></latest></retrieve></p>                <p>A module can at any time decide to retrieve old information.                   To do this from inside the module you can use any one of these:</p>                <blockquote>                   <p class="codeCPP">ObjectCollection retrieveMessages(String                     xml)<br>                    ObjectCollection retrieveMessages(RetrieveSpec spec)<br>                    ObjectCollection retrieveMessages(ObjectCollection specs)</p>                </blockquote>                <p>where the <span class="keyConcept">xml</span> variable contains                   some retrieve XML specification as shown above. </p>                <p>The two latter methods are alternatives to raw XML. The <span class="keyConcept">spec</span>                   variable is XML code contained in a RetrieveSpec object; the                   <span class="keyConcept">specs</span> variable is a collection                   of RetrieveSpec objects contained in an ObjectCollection object.                 </p>                <p>If your module definition in the psySpec includes a retrieve                   spec, any messages retrieved according to that spec will be                   included in every wakeup message each time your module gets                   triggered. </p>                <p>When your module receives the wakeup message, to get at the                   retrieved messages in your code, use:</p>                <blockquote>                   <p class="codeCPP">// Get the current number of retrieved messages<br>                    int getRetrievedMessageCount();<br>                    // Get a specific retrieved message<br>                    Message getRetrievedMessage(int pos);<br>                    // Get the full collection of the retrieved messages<br>                    ObjectCollection getAllRetrievedMessages();<retrieve from="BBX" type="Input.Person.Found.True"><latest>                     </latest></retrieve></p>                  <p class="codeCPP"><retrieve from="BBX" type="Input.Person.Found.True"><latest>                     </latest></retrieve><font size="1"><b> </b></font></p>                </blockquote>                <p><span class="mediumSizeNonConspicuous"><font size="1">RELATED:</font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="#spec:thebasics">psySpec</a>                   </span></font></font></font> </b></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="325"><a name="runningmodulesonmultiplecomputers" id="runningmodulesonmultiplecomputers"></a>Runningmodules on multiple computers</td>            <td align="right" width="153">&nbsp;</td>            <td align="right" width="113"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="79">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="1182" valign="top">                 <p>You can distribute                   your Psyclone-centered system on as many computers as you wish.                   Each module will use an AIRPlug to connect to Psyclone &#8212;                   the connections and their maintenance is seamless, even <a href="#firewalls" class="navLink">through                   firewalls</a>. In such systems it is often necessary to connect                   some modules to many modules, in a graph-like structure (that                   may change at runtime). To do so, use Psyclone's <a href="#pub-sub%5C" class="navLink">publish-subscribe</a>                   mechanisms. </p>                <p>You can manage a distributed system manually. To manually start                   an external module that runs on another computer than Psyclone                   you just have to provide the AIRPlug with the network name or                   address and the port on which the main Psyclone program is running.                   For example, to start up your Java module on Computer2 when                   Psyclone is running on Computer1 on port 10000 you would do                 </p>                <p> <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   java MyJavaModule psyclone=Computer1:10000 name=MyModule</span>                 </p>                <p> If you, however, want to either </p>                <ul>                  <li class="basicBullets">&bull;automatically start your external                     module on another computer</li>                  <li class="basicBullets">start your internal module on another                     computer (automatically), or </li>                  <li class="basicBullets">run a whiteboard on another computer</li>                </ul>                <p> you can use a <span class="keyConcept">Psyclone Satellite</span>.                   A Satellite is what we call modules and whiteboards that were                   started remotely, i.e. on a different computer from where Psyclone                   is running. </p>                <p>To use a Satellite you run Psyclone as a <a href="psycloneManual.thml#psy:psydaemon" class="navLink">Satellite Server</a>                   on the other computer or computers. Put                     Psyclone on the remote computer and run it with the                   command </p>                <p> <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   ./psyclone -satelliteserver</span> </p>                <p> on the command line of that machine. If no port number is given it <span class="keyConcept">defaults to 10000</span>. The <a href="psycloneManual.thml#psy:psydaemon" class="navLink">Satellite Server</a>                   will then start and continue to run on this computer forever,                   until you kill it manually or the machine is shut down.  The Server will use minimal CPU cycles if                   it is not running any Satellites.                </p>                <p>As long as you have defined the modules and whiteboards in                   the psySpec (see below), you can start and stop Psyclone as                   many times as you like  the Satellite Server will make sure                   that a Satellite runs the whiteboards and modules specified                   to start up remotely. You can also use the same Satellite Server for                   more than one Satellite at the same time. </p>                <p> To use a Satellite you will need to define it in the psySpec                   <span class="keyConcept">global</span> section: </p>                <blockquote>                   <p> <span class="codeXML">&lt;global&gt;<br>                    &nbsp;&nbsp; &lt;satellites&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;satellite name="</span><span class="dataValue">MySatellite</span><span class="codeXML">"                     host="</span><span class="dataValue">SatelliteOne</span><span class="codeXML">"                     port="</span><span class="dataValue">10000</span><span class="codeXML">"                     /&gt;<br>                    &nbsp;&nbsp; &lt;/satellites&gt;</span> <br>                    <span class="codeXML">&lt;/global&gt;</span> </p>                </blockquote>                <p> Now you can tell any whiteboard, internal and automatically                   started external modules, that it should in fact start up in                   the remote Satellite called SatelliteOne instead of starting locally.                   You do this using the remote parameter for the whiteboard or                   module in question: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;whiteboard name="</span><span class="dataValue">MyWB</span><span class="codeXML">"                   remote="</span><span class="dataValue">MySatellite</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>                  &nbsp;&nbsp; &lt;/whiteboard&gt; </span> &nbsp; </p>                <p> and&nbsp;&nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyModule</span><span class="codeXML">"                   remote="</span><span class="dataValue">MySatellite</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>                  &nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p> The new whiteboard MyWB will be created and run inside a new satellite created by the Satellite Server. A new module called MyModule will also be created - if it is internal it will run inside the satellite, if it is external it will be autostarted by the Satellite Server.                   So MyWB and MyModule will now be running on the remote computer SatelliteOne, and will continue to do so until this Psyclone                   shuts down, at which time the satellite                  will be terminated by the Satellite Server, including everyting in it. The Server will also shut down MyModule if it is external. The Satellite Server will then                   continue to run, waiting for the next Psyclone which needs its                   services. </p>                <p> Internal modules and whiteboards which run in the same satellite                   do communicate as quickly with each other as internal modules                   and whiteboards that run inside the main Psyclone. So remember                   when you design your system that modules which make heavy use                   of the same data should all use the same whiteboard or whiteboards,                   which again should be located either in the same satellite or                    the main Psyclone. </p>                <p> As previously mentioned, more than one Psyclone can use the                   same Satellite Server at the same time. The Server will keep track                   of which whiteboards and which modules belong to which Psyclone                   without conflicts by creating a separate satellite per Psyclone. &nbsp; </p>                <p>If you want to use <a href="#usingpsyprobe" class="navLink">psyProbe</a>                   to see WBs running in the Satellite you must put a copy of the                   full HTML tree (from the Psyclone distribution) next to the                   Satellite Server in the directory where you run the Server command                   (just like for Psyclone).</p>                </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="runningmodulesonmultipleoperatingsystems" id="runningmodulesonmultipleoperatingsystems"></a>Runningmodules on multiple operating systems</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="78" valign="top">            <p>You can distribute your system to run on multiplecomputers and multiple operating systems by by moving one or more ofyour modules over to an operating system supported by the suppliedAIRPlugs: C++ is supported on Linux, Windows and Mac OS X; Java issupported on all Java-compatible platforms. To manage a distributedsystem refer to <a href="#automaticallystartingmodules" class="navLink">Automatically Starting up Modules</a>and <a href="#runningmodulesonmultiplecomputers" class="navLink">Running modules on multiple computers</a>.            </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="4" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="creatingmodulesusingstreamingmedia" id="creatingmodulesusingstreamingmedia"></a>Creatingmodules that use streaming media</td>            <td align="right"  width="72">&nbsp;</td>            <td align="right"  width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="3172" valign="top">                 <p>A module can subscribe                   to a named media stream in a <a href="psycloneManual.html#psy:whiteboards"><span class="navLink">whiteboard</span></a>.                   Media streams are specified for whiteboards in the <a href="psycloneManual.html#psy:psyspec" class="navLink">psySpec</a>                   like this:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"                   maxcount="<span class="dataValue">15000</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;<span class="dataValue">My                   Whiteboard</span>&lt;/description&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;streams&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Raw</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc1</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc2</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/streams&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p> The <span class="keyConcept">MyWB</span> whiteboard will now                   contain four circular media streams, each which has a max buffer                   size of 10 megabytes. After this limit is reached the oldest                   data samples are deleted. (Notice that the names of the streams                   have no semantic meaning to the system.) </p>                <p> From a module you can access one or more media streams by                   asking for them inside a phase: </p>                <p> &nbsp;<span class="codeXML">&nbsp; &lt;module name="</span><span class="dataValue">MyFirstModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">internal</span><span class="codeXML">&quot;</span><span class="codeXML">                   &gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from="</span><span class="dataValue">AIRCentral</span><span class="codeXML">"                   type="</span><span class="dataValue">My.First.Type</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;inputstream alias="</span><span class="dataValue">MyInput</span><span class="codeXML">"                   source="</span><span class="dataValue">Input.Stream.Video.Raw</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;outputstream alias="</span><span class="dataValue">MyOutput</span><span class="codeXML">"                   source="</span><span class="dataValue">Input.Stream.Video.Proc2</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crank name="</span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="</span><span class="dataValue">AIRCentral</span><span class="codeXML">"                   type="</span><span class="dataValue">My.Second.Type</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp; &lt;/module&gt; </span> </p>                <p> This module has access to two streams and will use the aliases                   <span class="keyConcept">MyInput</span> and <span class="keyConcept">MyOutput</span>                   to work with them (the alias is the name used internally in                   the code for the particular source stream &#8212; its purpose                   is to decouple the media type from the internal references to                   that stream, to make it possible to change the type name used                   without recompiling the code). This is done since the psySpec                   may later be used to change the flow of data without having                   to recompile the code. (<span class="mediumSizeNonConspicuous">The                   example message types used here are for demonstration purposes                   only; please refer to the section on message types to learn                   about the proper use of dot-delimited message types.</span>)                 </p>                <p> In an <span class="keyConcept">internal module</span> you                   access the media stream using a <a href="psycloneManual.html#psy:mediaconnection"><span class="navLink">MediaConnection</span></a>                   via the messenger: </p>                <p class="codeCPP"> &nbsp;&nbsp; MediaConnection* myInput = messenger-&gt;getStreamConnection("MyInput");<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection* myOutput = messenger-&gt;getStreamConnection("MyOutput");<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1; </p>                <p class="">A module can access as many input and output streams                   as needed.</p>                <p class="">&nbsp;</p>                <p class="tutorialSectionHeading">External Modules</p>                <p>The code for external C++ and Java modules is almost identical,                   except that you will have to wait for the plug to have the stream                   become available (streams are automatically read from the module's                   own registration (either in the psySpec or manually registration                   in the code), so it can take a little while before the streams                   are ready for use):</p>                <p>C++:</p>                <p class="codeCPP"> &nbsp;&nbsp; MediaConnection* myInput = plug-&gt;waitForStreamConnection("MyInput",                   5000);<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection* myOutput = plug-&gt;waitForStreamConnection("MyOutput",                   5000);<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1; &nbsp; </p>                <p>In an <a href="psycloneManual.html#psy:externalmodules"><span class="navLink">external</span></a>                   Java module you access the media stream using a MediaConnection                   via the plug.</p>                <p>Java:</p>                <p class="codeJava"> &nbsp;&nbsp; MediaConnection myInput = plug.waitForStreamConnection("MyInput",                   5000);<br>                  &nbsp;&nbsp; if (stream == null)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection myOutput = plug.waitForStreamConnection("MyOutput",                   5000 );<br>                  &nbsp;&nbsp; if (stream == null)<br>                  &nbsp;&nbsp; &nbsp;&nbsp; return -1; </p>                <p class="codeJava">&nbsp;</p>                <p>Using the <span class="keyConcept">MediaConnection</span> object                   you can add new data samples to a stream, wait for new data                   to be added by another module, and search and retrieve data                   samples by timestamp.</p>                <p>The following example shows how a module would wait for new                   data, and when the data arrives process it and post the resulting                   output (internal and external Java and C++ modules):</p>                <blockquote>                   <p class="codeCPP"> DataSample* inputSample = NULL; &nbsp;&nbsp;                     <br>                    DataSample* outputSample = NULL; &nbsp;&nbsp; <br>                    JTime lasttime; &nbsp;&nbsp; <br>                    if ((inputSample = myInput-&gt;waitForFirstSampleAfter(now,                     1000)) != NULL ) { <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lasttime = inputSample-&gt;timestamp;                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // process the sample and create                     an output sample<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; outputSample = new DataSample();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!myOutput-&gt;addDataSample(outputSample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // error<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                    }</p>                </blockquote>                <p class="mediumSizeNonConspicuous">(For Java one merely has to                   replace -&gt; with . and NULL with null, and remove the * chars)</p>                <p>A DataSample object is merely a placeholder for <span class=GramE>either                   a</span> chunk of raw binary data, a CoreLibrary Object or one                   of the special objects derived from DataSample such as Bitmap                   and BitmapUpdate.</p>                <p>For more information and documentation on how to use these                   objects, see the online <a href="http://corelibrary.sf.net/" class="navLink">CoreLibrary                   documentation on Source Forge</a> or jump directly to the <a href="http://corelibrary.sourceforge.net/doxygen/classObject.html" class="navLink">CoreLibrary                   base Object</a> to see which objects are available or to the                   <a href="http://corelibrary.sourceforge.net/doxygen/classDataSample.html" class="navLink">DataSample</a>                   object. Here you can also see how you work with <a href="http://corelibrary.sourceforge.net/doxygen/classMediaConnection.html" class="navLink">MediaConnections</a>.</p>                <p>&nbsp;</p>                <p><span class="tutorialSubsectionHeading">Continuous Mode<br>                  </span>The above will work fine if you are receiving 1-5 samples                   per second, but beyond that your code may become slow, because                   each time you wait for a new sample you send a small message                   to the server. So, for high volume data you should switch to                   Continuous Receiving. This is somewhat different for C++ and                   Java, but identical for internal and external C++ modules.</p>                <p>&nbsp;</p>                <p><span class="tutorialSubsectionHeading"><b style='mso-bidi-font-weight:normal'>C++ Modules<br>                  </b></span>C++ is capable of using an advanced local memory                   buffer, which means that to use continuous mode one merely has                   to add one line:</p>                <blockquote>                   <p class="codeJava"> <span class="codeCPP">if (!myInput-&gt;startContinuousBackgroundReceive())                     return false;</span></p>                  <p class="codeCPP"> DataSample* inputSample = NULL;<br>                    DataSample* outputSample = NULL;<br>                    JTime lasttime;<br>                    if ( (inputSample = myInput-&gt;waitForFirstSampleAfter(now,                     5000)) != NULL ) {<br>                    &nbsp; lasttime = inputSample-&gt;timestamp;<br>                    &nbsp;&nbsp;// process the sample and create an output sample<br>                    &nbsp;&nbsp;outputSample = new DataSample();<br>                    &nbsp;&nbsp;if (!myOutput-&gt;addDataSample(outputSample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// error<br>                    &nbsp;&nbsp;}<br>                    }</p>                </blockquote>                <p>The code for continuous mode is identical in C++ for <span class="keyConcept">internal                   and external </span>modules.</p>                <p>In this example, after the stream is put into continuous mode,                   the <span class="keyConcept">wait</span> command only waits                   for the local buffer to receive new data. However, if you stop                   getting the new data, eventually the buffer will run full and                   the oldest data deleted.</p>                <p> And you can stop the continuous mode using</p>                <blockquote>                   <p class="codeCPP">stream-&gt;stopContinuousBackgroundReceive()</p>                  <p class="codeCPP">&nbsp;</p>                </blockquote>                <p><span class="tutorialSubsectionHeading">Java Modules<br>                  </span>Java doesn't have the same capabilities for handling                   extreme data transfers as C++, but a small local buffer is implemented                   to handle continuous streaming:</p>                <blockquote>                   <p class="codeJava"> if (!stream1.startContinuousBackgroundReceive())                     {<br>                    &nbsp;&nbsp;System.out.println( &quot;Error: Couldn't start                     stream1 continuous...&quot;);<br>                    &nbsp;&nbsp;return false;<br>                    }<br>                    System.out.println( &quot;Listening for new samples on the                     stream...&quot;);<br>                    DataSample sample;<br>                    while (shouldContinue) {<br>                    &nbsp;&nbsp;if ( (sample = stream1.receiveContinuousSample(100))                     != null) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;Time now = new Time();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;System.out.println(now.printTime()                     + &quot;: JavaStreamer: received sample<br>                    &nbsp;&nbsp;&nbsp;&nbsp;from stream1&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;if (!stream2.addDataSample(sample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println( &quot;Error:                     Couldn't output to stream2...&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;&nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(now.printTime()                     + &quot;: JavaStreamer: output <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sample to stream2&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    }<br>                  </p>                </blockquote>                <p> And you can stop the continuous mode using</p>                <blockquote>                   <p class="codeJava"> stream1.stopContinuousBackgroundReceive();<o:p></o:p></p>                </blockquote>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>It                   is very important that you process the data as fast as they                   come in and that you stop the continuous mode when you are done,                   as the local buffer will start erasing the oldest samples if                   it gets too full.</p>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>Alternatively,                   you can use the stream in Java in callback mode with </p>                <blockquote>                   <p class="codeJava" style="mso-layout-grid-align:none;text-autospace:none">stream1.startContinuousBackgroundReceive(this)</p>                </blockquote>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>                   where 'this' has to implement the MessageReceiver interface.                   Every time a new sample appears on the stream, <span class="codeJava">this.receiveMessage(Message                   msg)</span> will be called:</p>                <blockquote>                   <p class="codeJava" style="mso-layout-grid-align:none;text-autospace:none">                     public Message receiveMessage(Message msg) {<br>                    &nbsp;&nbsp;if ((msg == null) || (msg.object == null))<br>                    &nbsp;&nbsp;&nbsp;&nbsp;return new Message(msg.to, msg.from,                     &quot;RECEIVE_ERROR&quot;);<br>                    &nbsp;&nbsp;DataSample sample = (DataSample) msg.object;<br>                    &nbsp;&nbsp;// compute<br>                    &nbsp;&nbsp;return new Message(msg.to, msg.from, &quot;RECEIVE_ACCEPT&quot;);<br>                    }</p>                </blockquote>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>For                   more information and documentation on how to use these objects,                   see the online <a href="http://corelibrary.sourceforge.org" class="navLink">CoreLibrary</a>                   documentation on Source Forge or jump directly to the <a href="#corelibbaseobject" class="navLink">CoreLibrary                   base Object</a> to see which objects are available or to the                   <a href="#datasampleobject" class="navLink">DataSample</a> object.                   Here you can also see how you work with <a href="#mediaconnections" class="navLink">MediaConnections</a>.</p>                </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="4" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="automaticallystartingmodules" id="automaticallystartingmodules"></a><a name="automaticmodulestartup" id="automaticmodulestartup"></a><a name="startingmodulesautomatically" id="startingmodulesautomatically"></a><a name="automaticstartup"></a>Automatically startingmodules</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">              <td colspan="4" height="1833" valign="top">                 <p>Internal modules running on the same computer as Psyclone are automatically                   started when Psyclone starts. You can also start external C++                   and Java modules automatically on the same computer by using                   the <a href="psycloneManual.html#psy:psyspec"><span class="navLink">psySpec</span></a>                   to specify how to run them (to automatically start external                   and internal modules on remote computers you will need to install                   a Satellite Server see <a href="#runningmodulesonmultiplecomputers"><span class="navLink">Running                   modules on multiple computers</span></a>). To see how you automatically                   start up modules on other computers than the one on which Psyclone                   is running, see <a href="#creatingadistributedsystem"><span class="navLink">Creating                   a Distributed System</span></a>. </p>            <p>If you are simply running your Psyclone system onone operating system and do not plan to run on other operating systemsin the near future, you can specify how to run a module automaticallylike this: </p>                <p> &nbsp; <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyExternalModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="dataValue">                   java MyJavaModuleXYZ psyclone=%host%:%port% name=%name%</span><span class="codeXML"><br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;spec&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;context                   name="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;phase name="</span><span class="dataValue">1</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;triggers from="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;trigger type="</span><span class="dataValue">test.type</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/triggers&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/phase&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/context&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/spec&gt;<br>                  &nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p> (The <span class="codeXML">&lt;spec&gt;</span> tag is optional).                   Notice that the percentages and tags inside them should be copied                   verbatim. Whenever Psyclone starts, it will run the command                   line specified as: </p>                <p> &nbsp; <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   java MyJavaModuleXYZ psyclone=%host%:%port% name=%name%</span>                 </p>                <p>and it will allow everything which this program prints to be                   seen on the Psyclone console. The %host% part will always be                   replaced by the current Psyclone computer's network address,                   the %port% by the port number Psyclone is running on, and the                   %name% by the name of your module. If you used an AIR Plug to                   create your external module these will be read by your module                   on startup. </p>                <p> You should test your command line before runningPsyclone by going to the directory where you will run Psyclone from andtyping your line exactly as you put it in the psySpec. If your modulestarts, everything should work. If not, you will need to figure out whynot and fix it, as Psyclone will not be able to run it either.&nbsp; </p>            <p>If you wish to start up Psyclone first and thenstart your module manually you can leave out the command lineinformation in the tag: </p>                <p>&nbsp; <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyExternalModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;</span><span class="codeXML">                   &gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;                   &lt;/executable&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... </span> </p>            <p> If you plan on running Psyclone with the samepsySpec on different operating systems, you may need to take intoaccount the slight differences in how to run programs from the commandline. One example is when running Java programs with multiple classpaths. On Windows you separate these with semicolons and on Unix youuse colons. Hence, you would specify a command line for each operatingsystem like this: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Win32</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar;b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Linux</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt; </span> &nbsp; </p>            <p> You can even use different modules on differentcomputers by name: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command hostname="</span><span class="dataValue">Loki</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule1 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command hostname="</span><span class="dataValue">Odin</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule2 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt; </span> &nbsp; </p>            <p> or mix and match: &nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Win32</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar;b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Linux</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"                   hostname="</span><span class="dataValue">Loki</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule1 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"                   hostname="</span><span class="dataValue">Odin</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule2 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt;</span> </p>                <p> This can be very useful when a team is developing a Psyclone                   system. One person can then have a stable version of a module,                   called e.g. Module1, and an experimental version of the same                   module, called Module2, which is only ever run on a computer                   called Odin. </p>            <p>You can match the following system parameters (anduse wildcards like *): </p>            <p class="codeXML"> &nbsp;&nbsp;ostype="<span class="dataValue">Win32</span>/<span class="dataValue">Linux</span>/<span class="dataValue">OSX</span>"<br>&nbsp;&nbsp; osname="<span class="dataValue">Windows</span>            <span class="dataValue">XP</span>/<span class="dataValue">Linux</span>/<span class="dataValue">Darwin</span>"<br>&nbsp;&nbsp; arch="<span class="dataValue">i386</span>/<span class="dataValue">i486</span>/<span class="dataValue">i586</span>/<span class="dataValue">i686</span>/<span class="dataValue">athlon</span>/<span class="dataValue">powerpc</span>/<span class="dataValue">mips</span>/<span class="dataValue">alpha</span>"<br>&nbsp;&nbsp; hostname="<span class="dataValue">xxx</span>"&nbsp;&nbsp;<span class="mediumSizeNonConspicuous">&nbsp; (computersnetwork name)</span><br>&nbsp;&nbsp; osmem="<span class="dataValue">nnn</span>"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mediumSizeNonConspicuous"> (minimum amount of memoryin computer in MB)</span><br>&nbsp;&nbsp; cpuspeed="<span class="dataValue">nnn</span>"&nbsp;&nbsp;&nbsp;            <span class="mediumSizeNonConspicuous">(minimumCPU speed of computer in MHz)</span><br>&nbsp;&nbsp; cpucount="<span class="dataValue">n</span>"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mediumSizeNonConspicuous"> (minimum number of CPUs incomputer) &nbsp;</span> </p>            <p>If either field is empty it is considered a match </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example: </span><span class="codeXML">&lt;command                   ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"&gt;</span>                   allows system with the Mac OS X operating system </p>            <p> All string fields are matched with wildcards </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example: </span><span class="codeXML">&lt;command                   hostname="</span><span class="dataValue">*fun*</span><span class="codeXML">"&gt;</span>                   allows system with hostname="somefuncomputer.local."&gt; &nbsp;                 </p>            <p> All numerical values are matched with &gt;= </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example:</span>                   <span class="codeXML">&lt;command osmem="</span><span class="dataValue">256</span><span class="codeXML">"&gt;                   </span>allows systems with 512MB, but not 128MB </p>            <p> So you could, for example, say </p>                <p> &nbsp; <span class="codeXML">&nbsp;&nbsp;&nbsp; &nbsp;&lt;executable                   name="</span><span class="dataValue">myexe</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command osmem="</span><span class="dataValue">256</span><span class="codeXML">"&gt;</span><span class="dataValue">./big_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command osmem="</span><span class="dataValue">64</span><span class="codeXML">"&gt;</span><span class="dataValue">./small_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;</span> </p>            <p> or &nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable                   name="</span><span class="dataValue">myexe</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command cpucount="</span><span class="dataValue">2</span><span class="codeXML">"&gt;</span><span class="dataValue">./heavy_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command cpucount="</span><span class="dataValue">1</span><span class="codeXML">"&gt;</span><span class="dataValue">./light_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;<br>                  </span> &nbsp; &nbsp; </p>            </td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <table width="670" border="0" align="center" cellpadding="2" cellspacing="0" bgcolor="#ffffff">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="usingcatalogs" id="usingcatalogs"></a><a name="spec:usingcatalogs" id="spec:usingcatalogs"></a>Using                 Catalogs</font></font></font></b></td>              <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="88"></td>            </tr>            <tr bgcolor="#f7f7f7">               <td height="994" colspan="3" valign="top"><p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Catalogs                   are components that can provide access to large amounts of data                   and they have a query mechanism built in. This sections hows                   how to use the built-in Catalogs <span class="keyConcept">FileCatalog</span>                   and <span class="keyConcept">Persistent Record Storage Catalog</span>,                   which </font><font size="-1"> are built into all versions of                   Psyclone. </font></p>                <p><font size="-1">If you wish to create your own catalogs (examples                   could be a Facial Expression Database or Google Query Catalog)                   please contact us.</font></p>				<hr size="1" noshade>                <p class="tutorialSubsectionHeading"><a name="catalogs:filecatalog" id="catalogs:filecatalog"></a>FileCatalog</p>                <p><font color="#333333" size="-1" face="Verdana, Arial, Helvetica, sans-serif">The    FileCatalog allows a module to read and write files from a named location specified    in the PsySpec. It uses the generic Psyclone catalog functionality but is built    directly into Psyclone and therefore always available to be used by any module,    internal or external. </font><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"        size="-1">This way you can in the <a href="psycloneManual.html#spec:psyspec" class="conceptLink">            psySpec</a> specify a directory location from which all requested files should        be read and to which all requested files will be written where the location is specified        in the psySpec and not in the code itself.</font></p>    <p>        <font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">To use            this Catalog a definition is put into the <a href="psycloneManual.html#spec:psyspec" class="conceptLink">                psySpec</a>:</font></p>    <blockquote>        <p class="codeXML">            &lt;catalog name="<span class="dataValue">MyFileCatalog</span>" query="<span class="dataValue">Internal::FileCatalog</span>&quot;                     location=&quot;<span class="dataValue">.</span>&quot; readonly=&quot;<span class="dataValue">no</span>&quot;                     /&gt;</p>                </blockquote>                <p>                  <span style="font-size: 10pt"></span>An example could be specifying one directory                  for static read-only configuration files:</p><blockquote>                <p class="codeXML">                    &lt;catalog name="<span class="dataValue">ConfigurationCatalog</span>" query="<strong><span                        style="font-size: 7pt; color: #336699; font-family: Verdana">Internal::</span></strong><span class="dataValue">FileCatalog</span>" location="<span class="dataValue">../conf</span>"                    readonly="<span class="dataValue">yes</span>" /&gt;</p>            </blockquote>    <p>        and another for output files from your application:</p>    <blockquote>        <p class="codeXML">            &lt;catalog name="<span class="dataValue">OutputCatalog</span>" query="<strong><span                style="font-size: 7pt; color: #336699; font-family: Verdana">Internal::</span></strong><span class="dataValue">FileCatalog</span>" location="<span class="dataValue">../output</span>"            readonly="<span class="dataValue">no</span>" /&gt;</p>    </blockquote>    <p>        The location is always relative to the current directory, i.e. the directory which        was the current working directory when Psyclone was started.</p>    <p>        Now any module can use the catalog. Here is a concrete example for code written        for the FileCatalog in C++:</p>                <blockquote>                   <p class="codeCPP"> Message* msg = new Message();<br>                    msg-&gt;setType(&quot;Write&quot;);<br>                    msg-&gt;set(&quot;Filename&quot;, &quot;MyFileName&quot;);<br>                    msg-&gt;setContent(&quot;My File Contents, bla bla &quot;,                     &quot;&quot;);<br>                    InfoItem* answer = messenger-&gt;queryCatalog(&quot;MyFileCatalog&quot;,                     msg);<br>                    if (answer == NULL)<br>                    &nbsp;&nbsp;&nbsp;error = &quot;No Catalog by that name&quot;;<br>                    else if (!answer-&gt;getEntry(&quot;Status&quot;).equalsIgnoreCase(&quot;Success&quot;))<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Catalog reported an error,                     look at answer to see why&quot;;<br>                    else<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Wrote file&quot;;<br>                    delete(answer);</p>                </blockquote>                <p>This will write the content "My File Contents, bla bla " to                   a file called "MyFileName". Similarly, you can read a file using                   the type "Read" instead of "Write". </p>                <p>See section <a href="#codingforcatalogs" class="navLink">Coding                   Clients for Catalogs</a> below on <a href="#codingforcatalogs"><span class="conceptLink">how                   to write code in C++ and Java for using Catalogs</span></a>.</p>                <p> Commands are set as the message type, parameters are set using the set(param,                   value) function and the content to be written is added to the                   content of the message.</p>    <p>        The following commands are available for the FileCatalog:</p>                <ul>                  <li> Command &quot;Read&quot;                     <ul>                      <li> Param: &lt;filename&gt;</li>                      <li> Answer: answer.getEntry(&quot;Content&quot;) contains the file content</li>                    </ul>                  </li>                  <li> Command &quot;ReadBinary&quot;                     <ul>                      <li> Param: &lt;filename&gt;</li>                      <li> Answer: DataSample object in answer.object</li>                    </ul>                  </li>                  <li> Command &quot;Write&quot;                     <ul>                      <li> Param: &lt;filename&gt;</li>                      <li> Content: Text content to write (use msg-&gt;setContent(text, ""))</li>                    </ul>                  </li>                  <li> Command &quot;WriteBinary&quot;                     <ul>                      <li> Param: &lt;filename&gt;</li>                      <li> Content: DataSample object with binary data to write (use msg-&gt;setObject(sample))</li>                    </ul>                  </li>                </ul>                <hr size="1" noshade>                <p class="tutorialSubsectionHeading"><a name="catalogs:persistentrecordstoragecatalog" id="catalogs:persistentrecordstoragecatalog"></a>Persistent                   Record Storage Catalog</p>                <p>                    The Persistent Record Storage Catalog (StorageCatalog                        for short) allows a module to save persistent data that can be reloaded again after                        a Psyclone shutdown. It is built into Psyclone and therefore available to be used                        by any module, internal or external.                </p>    <p>        To use this Catalog a definition is put into the        <a href="psycloneManual.html#spec:psyspec" class="conceptLink">psySpec</a><span style="font-size: 10pt">:</span></p>                <blockquote>                   <p class="codeXML">&lt;catalog name=&quot;<span class="dataValue">MyStorageCatalog</span>&quot;                     query=&quot;<strong><span style="font-size: 7pt; color: #336699; font-family: Verdana">Internal::</span></strong><span class="dataValue">StorageCatalog</span>&quot;                     location=&quot;<span class="dataValue">.</span>&quot; index=&quot;<span class="dataValue">index.xml</span>&quot;                     /&gt;</p>                </blockquote>                <p>                  This example will store your Persistent Record Storage Catalog entries in the directory                  "." and create or use the database index file called index.xml. By using this catalog                  you can now save data in the form of InfoItem objects in the database which can                  be retrieved at any time by the same or any other module, even after a Psyclone                  restart.</p>    <p>        Now any module can use the catalog. Here is a concrete example for code written        for the StorageCatalog in C++:</p>    <blockquote>        <p class="codeCPP">            InfoItem* myItem = new InfoItem(); // contains the data to be stored<br>            Message* msg = new Message();<br>            msg-&gt;setType("StoreRecord");<br>            msg-&gt;set("Name", "MyRecordEntry");<br>            msg-&gt;setTime("Time", JTime());<br>            msg-&gt;setObject(myItem);<br>            InfoItem* answer = messenger-&gt;queryCatalog("MyStorageCatalog", msg);<br>            if (answer == NULL)<br>            &nbsp; &nbsp;error = "No Catalog by that name";<br>            else if (!answer-&gt;getEntry("Status").equalsIgnoreCase("Success"))<br>            &nbsp; &nbsp;error = "Catalog reported an error, look at answer to see why";<br>            else<br>            &nbsp; &nbsp;error = "Stored entry";<br>            delete(answer);</p>    </blockquote>                <p>This example stores the InfoItem object myItem in the database under the                   name "MyRecordEntry". This or any other module can at any time                   retrieve this data by using the command "GetRecord" on the same                   catalog, even after Psyclone has restarted. If someone stores                   a record with the same name, the entry is overwritten. </p>                <p>See section <a href="#codingforcatalogs" class="navLink">Coding                   Clients for Catalogs</a> below on <a href="#codingforcatalogs"><span class="conceptLink">how                   to write code in C++ and Java for using Catalogs</span></a>.</p>                <p>        To use the StorageCatalog, use these commands:</p>                <ul>                  <li> Command &quot;GetRecords&quot;                     <ul>                      <li> Answer: answer.object with collection of entries (ObjectCollection                         with timestamps)</li>                    </ul>                  </li>                  <li> Command &quot;GetRecord&quot;                     <ul>                      <li> Param: &quot;Name&quot; name of record to get</li>                      <li> Param: &quot;Time&quot; msg-&gt;setTime(&quot;Time&quot;,                         time)                         <ul>                          <li> Time is optional, if not provided returns the last written                             record for name</li>                        </ul>                      </li>                      <li> Answer: answer.object (InfoItem object)</li>                    </ul>                  </li>                  <li> Command &quot;StoreRecord&quot;                     <ul>                      <li> Param: &quot;Name&quot; name of record to store</li>                      <li> Param: &quot;Time&quot; msg-&gt;setTime(&quot;Time&quot;,                         time)                         <ul>                          <li> optional, if not provided, uses 'now' to store                             record time</li>                        </ul>                      </li>                      <li> Content: InfoItem object to be stored (use msg-&gt;setObject(item))</li>                    </ul>                  </li>                  <li> Command &quot;DeleteRecord&quot;                     <ul>                      <li> Param: &quot;Name&quot; name of record to store </li>                    </ul>                  <ul>                    <li> Param: &quot;Time&quot; msg-&gt;setTime(&quot;Time&quot;,                       time)                       <ul>                        <li> if provided, deletes only that time entry for named                           record</li>                        <li> if not provided, deletes full history of named record</li>                      </ul>                    </li>                  </ul>                  </li>                  <li> Command &quot;DeleteDatabase&quot;                   <ul>                    <li> Deletes all named records and all files from disk</li>                    <li> Warning: This command deletes everything!</li>                  </ul>                </li>                </ul>                <hr size="1" noshade>                <p class="tutorialSubsectionHeading"><a name="codingforcatalogs"></a>Coding                   Clients for Catalogs</p>                <p>The following shows examples of how to code clients to use                   Catalogs:</p>                <p><a href="PsycloneManual.html#psy:internalmodules">Internal                   Module</a> (C++):</p>                <blockquote>                   <p class="codeCPP"> Message* msg = new Message();<br>                    msg-&gt;setType(&quot;&lt;command&gt;&quot;);<br>                    msg-&gt;set(&quot;&lt;param1&gt;&quot;, &quot;Param1&quot;);<br>                    msg-&gt;set(&quot;&lt;param2&gt;&quot;, &quot;Param2&quot;);<br>                    InfoItem* answer = messenger-&gt;queryCatalog(&quot;&lt;Catalog&gt;&quot;,                     msg);<br>                    if (answer == NULL)<br>                    &nbsp;&nbsp;&nbsp;error = &quot;No Catalog by that name&quot;;<br>                    else if (!answer-&gt;getEntry(&quot;Status&quot;).equalsIgnoreCase(&quot;Success&quot;))<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Catalog reported an error,                     look at answer to see why&quot;;<br>                    else<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Success, look at answer for                     results&quot;;<br>                    delete(answer);</p>                </blockquote>                <p> <a href="PsycloneManual.html#psy:externalmodules">External                   module</a>, C++:</p>                <blockquote>                   <p class="codeCPP"> Message* msg = new Message();<br>                    msg-&gt;setType(&quot;&lt;command&gt;&quot;);<br>                    msg-&gt;set(&quot;&lt;param1&gt;&quot;, &quot;Param1&quot;);<br>                    msg-&gt;set(&quot;&lt;param2&gt;&quot;, &quot;Param2&quot;);<br>                    InfoItem* answer = plug-&gt;queryCatalog(&quot;&lt;Catalog&gt;&quot;,                     msg);<br>                    if (answer == NULL)<br>                    &nbsp;&nbsp;&nbsp;error = &quot;No Catalog by that name&quot;;<br>                    else if (!answer-&gt;getEntry(&quot;Status&quot;).equalsIgnoreCase(&quot;Success&quot;))<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Catalog reported an error,                     look at answer to see why&quot;;<br>                    else<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Success, look at answer for                     results&quot;;<br>                    delete(answer);</p>                </blockquote>                <p> <a href="PsycloneManual.html#psy:externalmodules"><span class="conceptLink">External                   module</span></a> in Java:</p>                <blockquote>                   <p class="codeJava"> Message msg = new Message();<br>                    msg.type = &quot;&lt;command&gt;&quot;;<br>                    msg.set(&quot;&lt;param1&gt;&quot;, &quot;Param1&quot;);<br>                    msg.set(&quot;&lt;param2&gt;&quot;, &quot;Param2&quot;);<br>                    InfoItem answer = plug.queryCatalog(&quot;&lt;Catalog&gt;&quot;,                     msg);<br>                    if (answer == null)<br>                    &nbsp;&nbsp;&nbsp;error = &quot;No Catalog by that name&quot;;<br>                    else if (!answer.getEntry(&quot;Status&quot;).equalsIgnoreCase(&quot;Success&quot;))<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Catalog reported an error,                     look at answer to see why&quot;;<br>                    else<br>                    &nbsp;&nbsp;&nbsp;error = &quot;Success, look at answer for                     results&quot;;</p>                </blockquote>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">                   <span class="navLink"><a href="#spec:psyspec">psySpec</a> </span></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p><table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="usingcontexts" id="usingcontexts"></a><a name="spec:contexts" id="spec:contexts"></a>Using                 contexts</font></font></font></b></td>              <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="88"></td>            </tr>            <tr bgcolor="#f7f7f7">               <td height="994" colspan="3" valign="top"> <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Contexts                   are used to manage a collection of modules by simultaneously                   turning them on and off, and to make them behave differently                   in different situations. Contexts are very helpful to manage                   the complexity of a large number of modules that typically are                   not all relevant for the operation of a system at the same time.                   Psyclone modules can be context-driven in that each module can                   be set up to have a specific context in which it can run. If                   that context is not active, the module will not be woken up                   with any messages it has subscribed to. </font></p>                <blockquote>                   <p class="mediumSizeNonConspicuous">If no context is specified                     for a module they default to belong to the context Psyclone.System.Ready.</p>                </blockquote>                <p>You can get some hands-on experience with contexts by looking                   at the <a href="#dominosexample"> <span class="navLink">dominosPsySpec</span></a>                   example.</p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Contexts are hierarchically defined, forming a tree. For example,                   this is a context tree: </font></p>                <p class="keyConcept"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">&nbsp;&nbsp;SoB.[Alive,                   Dead]<br>                  &nbsp;&nbsp;SoB.Alive.[Awake, Asleep] </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   In this context tree, the root is called <strong>SoB</strong>                   (short for <strong>state of being</strong>). The root has two                   branches, <strong>Alive</strong> and <strong>Dead</strong>.                   The branch <strong>Alive</strong> has two leafs, <strong>Awake</strong>                   and <strong>Asleep</strong>. (Dead has no branches.) To see                   how this tree is used at run-time, let's look at a hypothetical                   system that uses this context tree. In this hypothetical system                   we would have modules specifically designed to post contexts,                   which ever one is relevant at any time. When the system starts                   up the context <strong>SoB</strong> is posted by some bootstrapping                   module. When this happens another module (called e.g. BeingAlive.100)                   posts <strong>SoB.Alive</strong> if the system is considered                   "alive", otherwise it posts <strong>SoB.Dead</strong> (the module                   would presumably run some tests to see if the system actually                   qualifies for the "alive" label). If <strong>SoB.Alive</strong>                   is posted, then another module (called e.g. BeingAwake.200)                   posts <strong>SoB.Alive.Awake</strong> if it considers the system                   to be "awake" (whatever that means in this hypothetical system).                   </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Now                   we can look at how modules use these contexts to specify when                   they should be active and when not. For example, we might have                   a module called LookAround.150, whose job it is to move the                   sensors of a hypothetical being in the direction of a sound                   when it receives one. This module should not be running if the                   being is dead or if the being is asleep. So when we choose a                   context for this module, we choose the context in which it should                   be active, which is in this case <strong>SoB.Alive.Awake</strong>.                   </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   In the <a href="#spec:psyspec">psySpec</a> this is indicated                   by the syntax: </font></p>                <p><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#7e2117">&nbsp;&nbsp;<font size="2">&lt;context                   name="SoB.Alive.Awake"&gt;</font></font></font></b></font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Now,                   if at this point any module in the system posts the context                   SoB.Dead, the context <strong>SoB.Alive.Awake</strong> will                   not be active any more, since the branch <strong>Dead</strong>                   replaces the branch <strong>Alive</strong> in the context tree,                   and the active context will instead be <strong>SoB.Dead</strong>.                   At this point the module LookAround.150 will not be triggered                   by any message types it has subscribed to, because it needs                   the context <strong>SoB.Alive.Awake</strong> to be active.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Multiple roots are allowed. If you post for example the context                   <strong>SoB.Alive.Asleep</strong> and then post the context                   <strong>System.Ok</strong>, the two context trees have different                   roots, and will thus co-exist with no interference.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Notice that context trees are designed by you, the user. The                   only restrictions on them is that they be dot-delimited to designate                   branches.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Contexts                   are posted (i.e. announced to the system) by using a special                   message type called <strong>Psyclone.Context</strong>. In the                   posting section of a module in the <a href="psycloneManual.html#psy:psyspec">psySpec</a>                   (or, alternatively, in the XML as constructed by an external                   module), the type of the message should be <strong>Psyclone.Context:</strong>[<strong>context                   tree</strong>], where [context tree] is the dot-delimited context                   tree. </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1"><em>Example:</em><br>                  &nbsp;&nbsp;<em>Psyclone.Context:SoB.Alive.Awake</em> </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   When a context is posted, the context gets "switched" only if                   a current branch in the tree gets replaced by a new branch.                   For example, if the current context is <strong>SoB.Alive.Asleep</strong>                   and SoB.Alive.Awake gets posted, the context will be switched.                   And if <strong>SoB.Alive.Asleep.REMsleep</strong> gets posted,                   this context will be switched on for any module which had listed                   this as their context. But if <strong>SoB.Alive</strong> gets                   posted while <strong>SoB.Alive.Asleep</strong> is active, nothing                   happens.</font></p>                <p>&nbsp;</p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span> <span class="navLink"><a href="#contextsandphases">rocket                   example</a><a href="#dominosexample"> running the domionsPsySpec.xml</a></span></p>                <hr size="1" noshade> <p>&nbsp;</p>                <p class=MsoNormal>Contexts are used to make a module behave differently                   in different situations. For example, a vision module would                   want to use a different algorithm if the scene is bright from                   if the scene is dark. Instead of managing this manually inside                   the code of the module, contexts allow a module to change from                   one type of operation to another by listening to an external                   signal. </p>                <p class=MsoNormal>The way contexts are typically used is that                   in each Context a module will have a separate set of inputs                   and outputs. By looking at currently active context and a module's                   spec, anyone, including the system desginer and other runtime                   modules, can become aware of what the module is doing.</p>                <p class=MsoNormal>In the module spec each context will have at                   least one Phase, even if not directly specified. A context can                   have more than one Phase, in which case the module will cycle                   through the phases inside this context, until the relevant system                   context is changed. When this happens, the module would either                   change to a new set of Phases inside the new context, or go                   out of context and become idle, if the module has no configuration                   for the new context.</p>                <p class=MsoNormal>The system as a whole will usually have a hierarchy                   of contexts and many of these may be active at the same time.                   However, a module will only have one active Phase in one of                   these contexts, and it should not register for more than one                   simultaneously active contexts.</p>                <p class=MsoNormal>In a module registration without context and                   without phases looks like this:</p>                <span class="codeXML"> &nbsp;&nbsp; &lt;module name=&quot;</span><span class="dataValue">MyFirstModule</span><span class="codeXML">&quot;                 type=&quot;</span><span class="dataValue">internal</span><span class="codeXML">&quot;&gt;<br>                      &nbsp; &nbsp; &nbsp;                 &lt;trigger from=&quot;</span><span class="dataValue">AIRCentral</span><span class="codeXML">&quot;                 type=&quot;</span><span class="dataValue">My.First.Type</span><span class="codeXML">&quot;                 /&gt;<br>                      &nbsp;&nbsp;                 <span>&nbsp; &nbsp;&lt;crank name=&quot;</span></span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML"><span>&quot;&gt;<br>                </span> &nbsp; &nbsp; &nbsp; <span>&lt;post</span><span style='color:fuchsia'>                 </span><span>to=&quot;</span></span><span class="dataValue">AIRCentral</span><span class="codeXML"><span>&quot; </span><span style='color:red'>type</span><span>=&quot;</span></span><span class="dataValue">My.Second.Type</span><span class="codeXML"><span>&quot; /&gt;<br>                </span> &nbsp;&nbsp; <span>&lt;/module&gt;</span></span> <p class=MsoNormal>This                   module only has one phase which belongs to the default context,                   <span class="keyConcept"> Psyclone.System.Ready</span>. This                   context will never be switched off until the system is shutting                   down. If this module tries to switch phase, it will end up in                   the same state as before.</p>                <p class=MsoNormal>If you define more than one context for a module,                   the module will be in one and only one (or none) of these contexts                   at any given time.</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;                   type=&quot;external&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>context</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Scene.Bright&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send first message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;/</span><b><u><span style='color:#0066CC;background:#FFFFCC'>context</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>context</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Scene.Dark&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>id</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;<br>                  </span></span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;/</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>context</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/module</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal>If you specify more than one phase in each                   context, the module will behave as explained in the <a href="#usingphases" class="navLink">phase                   tutorial</a>.</p>                <p>Internal modules will automatically be using the correct crank                   in the correct phase in the currently <span class="keyConcept">active                   context</span>. If they go out of context they will stop running                   and wait to be in context again. </p>                <p>External modules will have to detect whether they are in context                   at all, and if so, which one. The main loop should be checking                   this, as shown here:</p>                <p class="tutorialSectionHeading"> C++</p>                <blockquote>                   <p class="codeCPP"> while (true) {<br>                    &nbsp;&nbsp;if (plug-&gt;inContext()) {<br>                    &nbsp;&nbsp;if ((triggerMessage = plug-&gt;waitForNewMessage(3000))                     == NULL) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read the crank name<br>                    &nbsp;&nbsp;&nbsp;&nbsp;crankName = plug-&gt;getCurrentCrankName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read context name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;context = plug-&gt;getCurrentContextName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read phase name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;phase = plug-&gt;getCurrentPhaseName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// ... process trigger ... //<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    &nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;wait(50);<br>                    &nbsp;&nbsp;}<br>                    }</p>                </blockquote>                <p class="tutorialSectionHeading"> Java</p>                <blockquote>                   <p class="codeJava"> while (true) {<br>                    &nbsp;&nbsp;if (plug.inContext()) {<br>                    &nbsp;&nbsp;if ((triggerMessage = plug.waitForNewMessage(3000))                     == NULL) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read the crank name<br>                    &nbsp;&nbsp;&nbsp;&nbsp;crankName = plug.getCurrentCrankName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read context name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;context = plug.getCurrentContextName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read phase name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;phase = plug.getCurrentPhaseName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// ... process trigger ... //<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    &nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;Utils.pause(50);<br>                    &nbsp;&nbsp;}<br>                    }<br>                  </p>                </blockquote>                <p>&nbsp;</p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">                   <span class="navLink"><a href="#spec:psyspec">psySpec</a> <a href="#spec:phases">phases</a>                   <a href="#spec:wakeup">wakeup</a><a href="#dominosexample">                   running the domionsPsySpec.xml</a></span></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <p>&nbsp;</p>        <table width="670" height="101" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="usingphases" id="usingphases"></a><a name="spec:phases" id="spec:phases"></a>Using                 phases</font></font></font></b></td>              <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="88"></td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="71" valign="top"> <p class=MsoNormal>A module                   may go through two or more different states in its normal operation.                   Instead of managing this manually inside the code of the module,                   one can use phases to allow a module to change from one type                   of operation to the next. Each phase will have its own set of                   triggers, retrieves, crank and posts. Phases are grouped by                   <a href="#usingcontexts" class="navLink"> context</a> &#8212;                   each set of phases belongs to a particular context.</p>                <p class=MsoNormal>The simplest way to think about phases is like                   a sequencer. Here is an example of this idea:</p>                <blockquote>                   <p class="codeXML">&lt;module name=&quot;<span class="dataValue">Sequencer</span>&quot;                     type=&quot;<span class="dataValue">internal</span>&quot; allowselftriggering=&quot;<span class="dataValue">yes</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;phases&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase name=&quot;<span class="dataValue">One</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger                     name=&quot;<span class="dataValue">Sequence.Start</span>&quot;                     from=&quot;<span class="dataValue">WB1</span>&quot; after=&quot;<span class="dataValue">2000</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post                     name=&quot;<span class="dataValue">Sequence.Step.One</span>&quot;                     to=&quot;<span class="dataValue">WB1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase name=&quot;<span class="dataValue">Two</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger                     name=&quot;<span class="dataValue">Sequence.Step.One</span>&quot;                     from=&quot;<span class="dataValue">WB1</span>&quot; after=&quot;<span class="dataValue">2000</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post                     name=&quot;<span class="dataValue">Sequence.Step.Two</span>&quot;                     to=&quot;<span class="dataValue">WB1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase name=&quot;<span class="dataValue">Three</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger                     name=&quot;<span class="dataValue">Sequence.Step.Two</span>&quot;                     from=&quot;<span class="dataValue">WB1</span>&quot; after=&quot;<span class="dataValue">2000</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post                     name=&quot;<span class="dataValue">Sequence.Step.Three</span>&quot;                     to=&quot;<span class="dataValue">WB1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post                     name=&quot;<span class="dataValue">Sequence.Start</span>&quot;                     to=&quot;<span class="dataValue">WB1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;/phases&gt;<br>                    &lt;/module&gt;</p>                </blockquote>                <p class=MsoNormal>In this module, which is self-triggering, each                   phase will trigger the next phase. Whenever a module posts it                   will switch phase (this will happen by default unless the changephase                   parameter is set to false in the posted message). </p>                <p class=MsoNormal>This module only has one (hidden) phase: If                   it tries to switch phase, it will end up in the same phase (state)                   as before.</p>                <p class=MsoNormal>If you specify more than one phase:</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>type=&quot;external&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>phase</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Send                   first message group&quot;</span><span style='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><span style='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>The module will automatically switch to the                   next phase whenever it posts a message with the <a href="psycloneManual.html#psy:phasechange"><span class="navLink">phasechange</span></a>                   parameter set to <span class="keyConcept">yes</span>.</p>                <p class=MsoNormal>In the above example you can see that the module                   will alternate between posting the message DEMO.Domino.Flip                   and DEMO.Domino.Flop.</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>Internal Modules</b></p>                <p class=MsoNormal>For internal modules you simply put a different                   crank into each phase and Psyclone will automatically switch                   to the new crank code when the module switches phase.</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;                   </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>type=&quot;internal&quot;&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>phase</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Send                   first message group&quot;</span><span style='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><span style='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;cm1::MyCrank&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;</span><span style='font-size:10.0pt;font-family:Arial'><spanstyle='color:#000099;background:#F7F7F7'>cm2::</span></span><spanstyle='color:#000099;background:#F7F7F7'>MyCrank2&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>where cm1 and cm2 are dynamically loaded into                   Psyclone at startup. This means that for internal modules there                   is no code change when you want to use phases.</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>External Modules</b></p>                <p class=MsoNormal>External module will have to check themselves                   in the code to see which phase it is currently in. The easiest                   way is to use cranks just like internal modules</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;                   </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>type=&quot;external&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>executable                   ...</span></u></b><span style='font-size:10.0pt;font-family:Arial;color:#000099'>                   </span><span style='font-size:10.0pt;font-family:Arial;color:#003366'>/</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send first message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank2&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>When you receive a wakeup message you can simply                   read, in your main loop, what the current crank name is and                   you will know which phase your module is supposed to be in (all                   your cranks have unique names).</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>C++</b></p>                <p class=MsoNormal>&nbsp;<span class="codeCPP">&nbsp; JString                   crankName;<br>                  &nbsp;&nbsp; while (true) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((triggerMessage = plug-&gt;waitForNewMessage(3000))                   == NULL) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; crankName =                   plug-&gt;getCurrentCrankName();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (crankName.equals(&#8220;MyCrank&#8221;))                   {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg                   = new Message(&quot;&quot;, &quot;&quot;, &quot;&quot;);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (crankName.equals(&#8220;MyCrank2&#8221;))                   {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg                   = new Message(&quot;&quot;, &quot;&quot;, &quot;&quot;);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp; }</span></p>                <p class="tutorialSectionHeading">Java</p>                <p class="codeJava">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String crankName;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((triggerMessage                   = plug.waitForNewMessage(3000)) == null) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;crankName                   = plug.getCurrentCrankName();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if                   (crankName.equals(&#8220;MyCrank&#8221;)) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   msg = new Message(&quot;&quot;, &quot;&quot;, &quot;My.First.Output&quot;);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.addOutputMessage(msg);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   else if (crankName.equals(&#8220;MyCrank2&#8221;)) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   msg = new Message(&quot;&quot;, &quot;&quot;, &quot;My.First.Output&quot;);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.addOutputMessage(msg);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>                <p> Remember, that external modules do not use the crank if it                   is specified in any other way than the above example.</p>                <p></p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">                   <span class="navLink"><a href="#spec:psyspec">psySpec</a> <a href="#spec:contexts">contexts                   </a> <a href="#spec:wakeup">wakeup</a><a href="#dominosexample">                   running the domionsPsySpec.xml</a></span></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <p>&nbsp;</p>        <table align="center" bgcolor="#f7f7f7" border="0" cellpadding="0" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="usingmoduleparameters" id="usingmoduleparameters"></a>Using module parameters</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td height="1147" colspan="4" valign="top"> <p>All modules, internal                   and external, can have an unlimited number of parameters, which                   the module itself can control, but which other modules can interact                   with as well, both via a direct function call and <a href="#parametersviamessage">via                   (low-level) messages</a>, as explained below. Parameters work                   the same for both internal as well as external modules in all                   programming languages and the <span class="codeCPP">getParameter()</span>                   function returns the same value for internal and external modules,                   local or remote.<br>                </p>                <p> Parameters are defined in the <a href="psycloneManual.html#psy:psyspec">psySpec</a>:                 </p>                <p><span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">VideoServer1.Camera1</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">internal</span><span class="codeXML">&quot;                   &gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;&lt;/description&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter name="</span><span class="dataValue">Interval</span><span class="codeXML">"                   type="</span><span class="dataValue">Integer</span><span class="codeXML">"                   value="</span><span class="dataValue">200</span><span class="codeXML">"                   step="</span><span class="dataValue">50</span><span class="codeXML">"                   default="</span><span class="dataValue">100</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter name="</span><span class="dataValue">BitmapFiles</span><span class="codeXML">"                   type="</span><span class="dataValue">String</span><span class="codeXML">"                   value="</span><span class="dataValue">../../Video/Frame###.bmp</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter name="</span><span class="dataValue">Repeat</span><span class="codeXML">"                   type="</span><span class="dataValue">String</span><span class="codeXML">"                   value="</span><span class="dataValue">Yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;collection&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;entry&gt;</span><span class="dataValue">Yes</span><span class="codeXML">&lt;/entry&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;entry&gt;</span><span class="dataValue">No</span><span class="codeXML">&lt;/entry&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;/collection&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/parameter&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter name="</span><span class="dataValue">Resize</span><span class="codeXML">"                   type="</span><span class="dataValue">double</span><span class="codeXML">"                   value="</span><span class="dataValue">0.5</span><span class="codeXML">"                   min="</span><span class="dataValue">0.125</span><span class="codeXML">"                   max="</span><span class="dataValue">4.0</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter name="</span><span class="dataValue">Printlevel</span><span class="codeXML">"                   type="</span><span class="dataValue">Integer</span><span class="codeXML">"                   value="</span><span class="dataValue">0</span><span class="codeXML">"                   min="</span><span class="dataValue">0</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;context name="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;phase name="</span><span class="dataValue">ReadBitmaps</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;triggers&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger after="</span><span class="dataValue">100</span><span class="codeXML">"                   type="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;trigger from="</span><span class="dataValue">Vision</span><span class="codeXML">"                   after="</span><span class="dataValue">100</span><span class="codeXML">"                   type="</span><span class="dataValue">Command.Camera1*</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/triggers&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;crank name="</span><span class="dataValue">gui::BitmapVideoReader</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &nbsp;&nbsp;&nbsp;&nbsp;&lt;outputstream name="</span><span class="dataValue">Output</span><span class="codeXML">"                   source="</span><span class="dataValue">Input.Video.Camera1</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/phase&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>                  &nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p>In this example the module <span class="keyConcept">VideoServer1.Camera1</span>                   defines five named parameters, two of which are strings, two                   are integers and one is a double (floating point). Each has                   an initial value and some have a default value which is set                   when the parameter is being reset. </p>                <p> Some define a step value, which will restrict the parameter                   from taking on values which are not an integer times the step                   value away from the initial value. Some specify a minimum and/or                   a maximum value that the parameter can have. Finally, one parameter                   specifies the full list of values that that parameter can ever                   have. </p>                <p> When working with ones own parameters one can use the following                   API, defined for the Messenger object for internal modules and                   the Plug object for both C++ and Java external modules. </p>                <p> To check that the module has a parameter by name: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool hasParameter(String                   name); </p>                <p>To read one of the modul's own parameters, either as a string,                   integer or double: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String                   getParameterString(String param);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int getParameterInteger(String                   param);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double getParameterDouble(String                   param); </p>                <p>To se one of the module's own parameters, either as a string,                   integer or double: </p>                <p class="codeCPP"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool                   setParameterString(String param, String value);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool setParameterInteger(String                   param, int value);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool setParameterDouble(String                   param, double value); </p>                <p> To reset a parameter back to its default value: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool resetParameter(String                   param); </p>                <p> To tweak a parameter up or down one or more notches: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool increaseParameter(String                   param, int steps);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool decreaseParameter(String                   param, int steps); </p>                <p> To add another item value to an itemized parameter: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool addParameterItem(String                   param, String value);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool removeParameterItem(String                   param, String value); </p>                <p> When working with other modules' parameters one can use the                   following API, defined for the Messenger object for internal                   modules and the Plug object for both C++ and Java external modules.                 </p>                <p> When wishing to read another module's parameters: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String                   getParameterString(String module, String param);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; int getParameterInteger(String                   module, String param);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; double getParameterDouble(String                   module, String param); </p>                <p> The string version will always return either the string value                   of the knob value <span class="codeCPP">("2", "2.54", "text")</span>                   or if an error occurred the string <span class="codeCPP">PARAM_ERROR:                   &lt;reason&gt;</span> </p>                <p> The two numerical functions in case of errors return </p>                <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Java: <span class="codeJava">ret                   = Parameter.PARAM_ERROR<br>                  </span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; C++:&nbsp; <span class="codeCPP">ret                   = PARAM_ERROR </span> </p>                <p> For setting another module's parameters: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool setParameterString(String                   module, String param, String value, String notify);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool setParameterInteger(String                   module, String param, int value, String notify);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool setParameterDouble(String                   module, String param, double value, String notify); </p>                <p> notify is the name of the Whiteboard which should receive                   the notification messages. This is not needed for internal modules,                   as they already know which Whiteboard to post to, so the Messenger                   API does not include this last parameter for the functions or                   any of the functions below. </p>                <p> To tweak a parameter up or down one or more notches: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool parameterIncrease(String                   module, String param, int steps, String notify);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool parameterDecrease(String                   module, String param, int steps, String notify); </p>                <p> To add or remove an item from an itemized parameter: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool parameterAddItem(String                   module, String param, String value, String notify);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool parameterRemoveItem(String                   module, String param, String value, String notify); </p>                <p> To reset a parameter to its default value: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bool parameterReset(String                   module, String param, String notify); </p>                <p> You can also choose to create a new parameter in your own                   module manually from your code at any time: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; public                   boolean addParameter(String paramname, String xml) </p>                <p> With this a module can add an additional parameter to itself                   using the same XML as is used in the psySpec, i.e. </p>                <p class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parameter                   name="<span class="dataValue">Frequency</span>" type="<span class="dataValue">Integer</span>"                   value="<span class="dataValue">1</span>" min="<span class="dataValue">0</span>"                   max="<span class="dataValue">100</span>" step="<span class="dataValue">5</span>"                   /&gt; </p>                <p> Note that paramname in the code must match the <span class="codeXML">name=""</span>                   XML parameter name in the psySpec. </p>                <p> One can also ask for the full list of parameters from another                   module, including each parameter's specification: </p>                <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ObjectDictionary                   getParameterSpecs(String module)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Parameter getParameterSpec(String                   module, String parameter) </p>                <p> The former returns a dictionary of Parameter Specs and the                   latter just the one Parameter Spec which matches the name. Both                   can return null if no relevant information is found. </p>                <p> Armed with this spec one can look at the various spec fields,                   such as parameter.name, parameter.valueType, parameter.minValue,                   parameter.maxValue, but also the value of the parameter at the                   time of the request with parameter.value. </p>                <p><a name="parametersviamessage"></a> To set a parameter using                   a message, send the following message to the module (put the                   module's name in the <span class="keyConcept">cc</span> field                   of the message):</p>                <blockquote>                   <blockquote>                    <p class="codeXML"> message type = &quot;PARAM_SET&quot;<br>                      message content = &quot;myparam=myvalue&quot;</p>                  </blockquote>                </blockquote>                <p> This is a standard Psyclone lowlevel command, using the low-level                   OpenAIR message API.</p>                <p>&nbsp;</p></td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#f7f7f7" border="0" cellpadding="0" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="messageandmodulepriorities" id="messageandmodulepriorities"></a>Setting Messageand Module Priorities</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="90" valign="top">            <p>There are two priorities in Psyclone, one for messages and one                   for modules and whiteboards. Each module has a priority setting                   that determines its relative priority for accessing CPU cycles                   &#8212; i.e. its runtime priority. Messages have a prority                   that determines their relative order of scheduling, both in                   the whiteboards and in the modules. </p>            <p>This dual priority mechanism allows the system todynamically prioritize certain information paths over others, creatinga hierarchy of data significance, from the absolutely critical to thesupernumerary while also taking into account the computing cost ofproducing these. </p>            <p>To set this priority in the psySpec, do: </p>            <blockquote>              <p class="codeXML">&lt;modulepriority="3.0"&gt;<br>&nbsp;&nbsp;...<br>&lt;/module&gt; </p>            </blockquote>            <p>The message and runtime priority goes from 0.0(highest) to 6.999... (lowst), following the <a href="http://www.mindmakers.org/openair/airSpecPage.jsp#tag:priority=" class="navLink">OpenAIR specification</a>: </p>            <blockquote>              <p class="plainDataValue">0.0 - Highest.Reserved for I/O, network and other vital systems-related processes. <br>1.0 - Very High. Message scheduling; all whiteboards are at this level.              <br>2.0 - High. <br>3.0 - Medium. <br>4.0 - Low. <br>5.0 - Even lower. Used for rather unimportant processes, e.g. logging.<br>6.0 - Lowest. Background, non-real-time and immaterial tasks.</p>            </blockquote>            <p>When setting the runtime proirity of modules onthis scale, Psyclone will translate the selected priority into anequivalently ranked priority of the operating system that the module isrunning on, maintaining the relative differences between the levels.This means that internal and external modules, as well as whiteboards,are balanced directly against other processes running on the samecomputer. (Psyclone is designed to make no more use of CPU cycles thannecessary; its priority against other processes can be set on UNIX bydoing </p>            <p>If no priority is specified for a module itdefaults to 2.0; whiteboard priority defaults to <span class="keyConcept">1.0</span>. While the priority ofwhiteboards can be set, this is only recommended for unique situations.Priority <span class="keyConcept">0.x</span> isused for network activity and similar activities which are vital tonormal functioning of Psyclone. (The priority of these cannot bemodified). </p>            <p>To set the priority of whiteboards in the psySpecdo: </p>            <blockquote>              <p>&lt;whiteboard priority="2.2"&gt;<br>&nbsp;&nbsp;...<br>&lt;/whiteboard&gt; </p>            </blockquote>            <p>While the priorities of modules and whiteboardscan be set to any level, <span class="keyConcept">it isnot recommended to put anything at the 0 (network) level</span>as this can lead to fairly unpredictable system behaviors. </p>            <p>By default a message inherits the priority of themodule that posts it. The module that posts a message can set itspriority in the post() method. </p>            <p>In the code you can set the priority of a messageby doing </p>            <blockquote>              <p class="codeJava">msg.setPriority(3.3)</p>            </blockquote>            <p>where 3.3 is a float. In the psySpec you can setthe priority of a message by doing:</p>            <blockquote>              <p>&lt;post to="WB1"priority="2.2"&gt;My.Type.1&lt;/post&gt;</p>            </blockquote>            </td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <p>&nbsp;</p>        <table align="center" bgcolor="#f7f7f7" border="0" cellpadding="2" cellspacing="0" width="671">          <tbody>            <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td class="tutorialHeading" height="30" width="403"><a name="sharingresources" id="sharingresources"></a><a name="automaticmodulestartup" id="sharingresources"></a><a name="sharingresources" id="sharingresources"></a><a name="sharingresources"></a><span class="tutorialSectionHeading">Sharing                 Resources in External Modules</span></td>              <td align="right" width="65">&nbsp;</td>              <td align="right" width="108"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="79">&nbsp;</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="199" valign="top">                 <p>                 <p>External modules can share the network resources provided by a single                   Plug, to fit e.g. more socket connection per computer/Plug/Satellite than otherwise possible.                   To specify modules sharing resources use the parameter called                   <span class="codeXML">&lt;shareresources&gt;</span> in the psySpec:</p>                <blockquote>                <p class="codeXML"> &lt;module name=&quot;<span class="dataValue">ModuleB</span>&quot; type="<span class="dataValue">external</span>" shareresources=&quot;<span class="dataValue">ModuleA</span>&quot;&gt;<br>...</p>                </blockquote>                <p> and the function name in the Plug objects:                 <blockquote>                  <p class="codeJava">plug-&gt;shareResources(String name, String xml);</p>                </blockquote>				<p>				The modules that share a Plug need to be in the same executable.				</p>                 </td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>      </td>    </tr>  </tbody></table><p>&nbsp;</p><p>&nbsp; </p><table width="688" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td align="left" valign="bottom"><img src="images/simple-circle-line-1.gif" align="bottom"></td>      <td>&nbsp;</td>    </tr>  </tbody></table><table width="688" height="21" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td align="right" valign="top" width="556"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-2"><a href="COPYRIGHT.txt">2006&copy;</a><a href="http://www.cmlabs.com">Communicative         Machines Inc.</a></font></font></font></td>      <td align="right" valign="top" width="132"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-2"><a href="LICENSE.txt">License</a></font></font></td>    </tr>  </tbody></table><map name="Map"><area shape="circle" coords="184,206,9" href="#30mins:intmodule"><area shape="circle" coords="206,214,9" href="#30mins:intmodule"><area shape="circle" coords="228,202,9" href="#30mins:intmodule"><area shape="rect" coords="99,293,252,431" href="#30mins:anotherpsyclone"><area shape="rect" coords="297,294,386,396" href="#30mins:satellites"><area shape="circle" coords="321,419,13" href="#30mins:extmodule"><area shape="circle" coords="367,417,13" href="#30mins:extmodule"><area shape="circle" coords="50,335,17" href="#30mins:extmodule"><area shape="rect" coords="16,187,69,248" href="#30mins:psyspec"><area shape="rect" coords="16,369,68,430" href="#30mins:psyspec"><area shape="rect" coords="119,131,159,170" href="#30mins:whiteboard"><area shape="rect" coords="179,140,220,181" href="#30mins:whiteboard"><area shape="circle" coords="47,154,15" href="#30mins:part1"><area shape="circle" coords="267,94,15" href="#30mins:part3"><area shape="circle" coords="151,204,14" href="#30mins:part2"><area shape="circle" coords="151,272,15" href="#30mins:part4"><area shape="circle" coords="345,273,15" href="#30mins:part5"><area shape="poly" coords="35,37,50,31,65,36,111,36,131,20,164,34,187,39,187,68,164,75,136,40,124,70,98,56,67,55,49,60,35,51" href="#30mins:micmodule"><area shape="poly" coords="326,118,342,104,419,70,573,71,573,208,419,211,331,141" href="#30mins:graphicsmodule"><area shape="poly" coords="157,67,140,69,126,91,124,115,131,131,137,113,140,89,153,75" href="#30mins:communication"><area shape="poly" coords="173,77,167,84,168,113,180,134,192,140,186,128,179,109,179,85" href="#30mins:communication"><area shape="poly" coords="222,149,232,146,273,152,321,142,328,142,328,151,275,166,226,156" href="#30mins:communication"><area shape="rect" coords="138,232,218,249" href="#30mins:part1"></map><map name="Map2"><area shape="rect" coords="306,72,382,89" href="http://sourceforge.net/projects/corelibrary/"><area shape="rect" coords="306,48,383,66" href="http://www.mindmakers.org/openair/"><area shape="rect" coords="220,9,383,27" href="usingpsyclone"></map></body></html>