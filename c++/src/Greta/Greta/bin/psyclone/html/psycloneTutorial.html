<!DOCTYPE html PUBLIC "-//w3c//dtd html 4.0 transitional//en"><html><head>  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">  <link rel="stylesheet" href="style.css">  <title>Psyclone:Tutorial</title>  <script language="JavaScript">//if (self != top) {top.location=self.location;}//self.resizeTo(760,screen.availHeight)function stopErrors() {return true;}window.onerror = stopErrors;  </script>  <script language="JavaScript">function showAboutBox(thePage) {window.open(thePage, "About", 'width=190,height=100,toolbar=no,scrollbars=no,directories=no,menubar=no,status=no'); }function launchPostMessage(thePage) {window.open(thePage,'Post_Message','width=760,height=700,toolbar=yes,resize=yes,scrollbars=yes,directories=no,menubar=no,status=no'); }function openPage(thePage) {window.open(thePage,'','width=700,height=600,toolbar=yes,resize=yes,scrollbars=yes,directories=no,menubar=no,status=no'); }  </script><!--990000 //cccc99 -->  <link href="style.css" rel="stylesheet" type="text/css"></head><body leftmargin="20" topmargin="20" size="-2" face="Verdana, Arial, Helvetica, sans-serif" style="color: rgb(102, 0, 0);" link="#914e23" alink="#cc0000" vlink="#73643f"><div align="center">  <table bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" height="36" width="688">    <tbody>      <tr align="right" valign="bottom">         <td class="navLink" align="left" height="18" width="129">&nbsp;</td>        <td class="navLink" align="left" height="18" width="130">&nbsp;</td>        <td class="navLink" align="left" height="30" width="217"> <div align="right"></div></td>        <td class="navLink" width="109"><a href="psycloneManual.html">manual_:</a>:</td>        <td class="navLink" width="103"><a href="index.html">index_:</a>:</td>      </tr>      <tr align="right" valign="middle">         <td colspan="5" align="left" height="18"><br> <img src="images/simple-circle-line-1.gif"></td>      </tr>    </tbody>  </table>  <table border="0" cellpadding="0" cellspacing="0" height="90" width="688">    <tbody>      <tr>         <td align="left" background="" height="90" valign="middle" width="688"><img src="images/psycloneTutorialLogo.gif">           <br> <img src="images/simple-circle-line-1.gif"> </td>      </tr>    </tbody>  </table></div><p>&nbsp; </p><table width="688" height="32" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td class="tutorialSectionHeading" align="left" height="32" valign="top" width="147"><b><a href="index.html" class="tutorialSubsectionHeading">Backto Index</a></b></td>      <td align="left" valign="CENTER" width="95"></td>      <td class="smallSizeNonConspicuous" align="right" valign="middle" width="446">An         index to the main sections below is stored in index.html <br>        that should be part of the distribution that includes this file</td>    </tr>  </tbody></table><p>&nbsp;</p><p align="center"><img src="images/simple-circle-line-1.gif"></p><p>&nbsp;</p><table width="688" border="1" align="center" cellpadding="0" cellspacing="0" bordercolor="#cccccc">  <tbody>    <tr>      <td background="images/light-brown-bk1.gif" height="32" valign="top">      <table border="0" cellpadding="0" cellspacing="0" height="31" width="678">        <tbody>          <tr>            <td align="left" height="31" valign="CENTER" width="145"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#990000"><font size="-1"><a name="introduction"></a></font></font></font></b><span class="tutorialSectionHeading">Introduction</span></td>            <td align="left" valign="CENTER" width="223">            <div align="right">            <p class="infoLink">&nbsp;</p>            </div>            </td>            <td align="right" valign="CENTER" width="154"></td>            <td align="right" valign="CENTER" width="54"></td>            <td align="right" valign="CENTER" width="102"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></td>          </tr>        </tbody>      </table>      </td>    </tr>  </tbody></table><table width="688" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#cccccc">  <tbody>    <tr>      <td bgcolor="#e6e6e6" height="513" valign="top">      <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"> <br>      </font></font></font></p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" valign="CENTER">            <td class="tutorialSubsectionHeading" bgcolor="#f7f7f7" height="30" width="465"><b><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><a name="about"></a>About Tutorial<font size="-1">s</font></font></b></td>            <td align="right" bgcolor="#f7f7f7" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" bgcolor="#f7f7f7" width="87"></td>          </tr>          <tr>            <td colspan="3" height="122" valign="top">            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">You are lookingat the </font></font></font><span class="keyConcept">Psyclone&trade; Tutorial</span><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font color="#333333">. To use thistutorial you must be familiar with certain concepts and have experiencewith certain things, as listed in the section <a href="#prerequisits" class="navLink">Prerequisits</a>.</font></font></font>            </p>            <p>This set of tutorials is designed to familiarizeyou with the Psyclone feature set and some important concepts throughexplicit examples in the use of Psyclone and the construction ofsystmes using it. You should walk away from this set of tutorials withthe ability to easily, effectively and comfortably design and buildmixed-language, highly configurable intelligent distributedenvironments. </p>            </td>          </tr>        </tbody>      </table>      <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;</font></font></font></p>      <table align="center" bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="670">        <tbody>          <tr background="images/grey-bk.gif" valign="CENTER">            <td class="tutorialSubsectionHeading" bgcolor="#f7f7f7" height="30" width="520"><b><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><a name="userknowledge"></a><a name="prerequisits" id="prerequisits"></a>Prerequisits</font></b></td>            <td align="right" bgcolor="#f7f7f7" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" bgcolor="#f7f7f7" width="88"></td>          </tr>          <tr>            <td colspan="3" height="104" valign="top">            <p>To work through the tutorials successfully, you should be familiar                   with the Java and/or C++ programming languages and XML. </p>                <p>It is also necessary to be familiar with the command line interface.                   Here are tutorials on various command lines: <a href="http://www.linuxcommand.org/" class="navLink">Linux</a>                   <a href="http://www.macobserver.com/tips/macosxcl101/" class="navLink">Mac                   OS X</a> <a href="http://www.horstmann.com/bigj/help/windows/tutorial.html" class="navLink">Windows</a></p>            <p> If you want to develop modules in Java or C++,you must also make sure you have the AIRPlugs (for external modules) orthe Psyclone SDK (for internal modules). To develop in Java, you willalso need the Java SDK; the Sun Java SDK will suffice (<a href="http://java.sun.com/j2se/" class="navLink">http://java.sun.com/j2se/</a>).            </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>      <p>&nbsp;</p>      </td>    </tr>  </tbody></table><p>&nbsp;</p><p>&nbsp; </p><p align="center"><img src="images/simple-circle-line-1.gif"><a name="usingpsyclone" id="usingpsyclone"></a><a name="orderedlessons" id="orderedlessons"></a>   <br>  &nbsp; <table width="688" border="1" align="center" cellpadding="0" cellspacing="0" bordercolor="#cccccc">  <tbody>    <tr>      <td background="images/light-brown-bk1.gif" height="32" valign="top">      <table align="center" border="0" cellpadding="0" cellspacing="0" height="32" width="678">        <tbody>          <tr>            <td align="left" height="32" valign="CENTER" width="144"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#990000"><font size="-1">Ordered Lessons            </font></font></font></b></td>            <td align="left" valign="CENTER" width="221"></td>            <td align="right" valign="CENTER" width="153"></td>            <td align="right" valign="CENTER" width="75"></td>            <td align="right" valign="CENTER" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>          </tr>        </tbody>      </table>      </td>    </tr>  </tbody></table><table width="689" border="1" align="center" cellpadding="2" cellspacing="0" bordercolor="#999999" bgcolor="#cccccc">  <tbody>    <tr>      <td width="681" height="41934" valign="top" bordercolor="#999999" bgcolor="#cccccc">         <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="gettingstarted" id="gettingstarted"></a></font></font></font></b><span class="tutorialSubsectionHeading">Getting Started withPsyclone</span></td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="88">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="947" valign="top"> <p>To learn the basic                   tenets of Psyclone jargon, go <a href="psycloneManual.html#psy:intro" class="navLink">here</a>.                 </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">In                   the <span class="keyConcept">psyclone</span> directory you will                   find the Psyclone executable for your operating system ("psyclone"                   for OS X and Linux; "psyclone.exe" for Windows). </font></font>                 </p>                <p><font color="#333333"> <a name="commandlineip" id="commandlineip"></a>                   <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">To                   run Psyclone, open a console window and cd into the psyclone                   directory.&nbsp;</font></font></font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">The                   </font></font><span class="keyConcept">psyclone</span><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">                   executable is run by the following command:</font></font> <span class="keyConcept"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><strong>psyclone</strong></font></font></font>                   </span> </p>                <p><font color="#333333"><i><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;Example:</font></font></i>                   <br>                  </font> <span class="commandlineText">&nbsp; &gt;./psyclone</span>                 </p> <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">This                   should start Psyclone, giving some printout of its acitivities                   in the console.&nbsp;</font></font> </p>                <blockquote>                  <p><span class="smallSizeNonConspicuous"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666"><font size="1">NOTE:                     If you get the following message:&nbsp;</font></font></font>                     <font size="1"><br>                    <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">&nbsp;&nbsp;                     ./psyclone: Permission denied.</font></font></font> <font size="1"><br>                    <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">you                     do not have execution permission in this directory. Execute                     the command:</font></font></font> <font size="1"><br>                    <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">&nbsp;                     &gt;chmod a+rwx *</font></font></font> <font size="1"><br>                    <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">at                     the command line, and then try running Psyclone again.</font></font></font>                     <font size="1"><br>                    </font></span><a name="usingpsyclone:psyspec" id="usingpsyclone:psyspec"></a>                   </p>                </blockquote>                <p> <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">You                   can specify a setup file to use at the command line, called                   a <a href="psycloneManual.html#psy:psyspec">psySpec</a>, to                   initialize the system. The psySpec is read in by doing:</font></font>                 </p>                <p><font color="#333333"> <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;&nbsp;                   <span class="keyConcept"><strong>psyclone spec="</strong>[<strong>psySpecName</strong>]"</span></font></font></font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;Example:</font></font>                   <br>                  <span class="commandlineText">&nbsp; &gt;./psyclone spec="roundRobinPsySpec.xml"                   </span></p>                <p>The roundRobinPsySpec.xml is a simple example psySpec (should                   be included with your copy of Psyclone). To see what each of                   its parts mean, see the <a href="#roundrobintutorial" class="navLink">roundRobinPsySpec                   tutorial</a> below.</p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">Psyclone                   will print out an error if (a) it cannot find the specified                   psySpec. It will also print out errors if (b) the port specified                   is in use. <a href="#troubleshooting" class="navLink">Troubleshooting</a>.</font></font>                 </p>                <p> <font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="2">To                   quit Psyclone at the <a href="psycloneManual.html#psy:commandline" class="navLink">command                   line</a> press CTRL+C. <br>                  If CTRL+C at the command line doesn't work, pressing CTRL+C                   three times will perform a hard exit.</font> </p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font color="#333333"><b><i>                   </i></b><span class="navLink"><a href="#usingpsyspec">constructing                   a psySpec</a></span></font></font></font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">There                   is a third parameter you can specify, which will help you understand                   what is going on at run-time with Psyclone. It is called verbose,                   and it is used in the following way:</font></font> <font color="#333333"><br>                  <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;                   </font></font></font><span class="keyConcept"><font face="Verdana, Arial, Helvetica, sans-serif"><strong>psyclone                   port=</strong>[<strong>port</strong>]<strong> spec="</strong>[<strong>psySpecName</strong><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">]</font></font><strong>"                   verbose=</strong>[<strong>1,2,3,4</strong><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">]</font></font></font>                   </span> </p>                <p><font color="#333333"><i><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;Example:</font></font></i>                   <br>                  </font><span class="commandlineText">&nbsp; &gt;./psyclone port=20000                   spec="testPsySpec.xml" verbose=4 </span> </p>                <p><span class="mediumSizeNonConspicuous"><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><b><i>Related:</i></b></font></font></span><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif">                   </font><span class="navLink"><a href="psycloneManual.html#console">command                   line parameters</a> <a href="psycloneManual.html#psy:verbose">verbose=</a><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif">                   </font><a href="psycloneManual.html#psy:spec">spec=</a></span></font></font>                 </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">If                   verbose is specified, Psyclone will print run-time messages                   to the console while running.&nbsp;</font></font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">To                   see the status of Psyclone at run time, use </font></font><span class="conceptLink"><a href="#usingpsyprobe" class="conceptLink">psyProbe</a></span><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">,                   the Web-based monitoring tool.</font></font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">Run                   <span class="navLink">the <a href="#runningexternalmoduleexamples">example                   posting and receiving modules</a></span> to see a demonstration                   of how the posting and registration works in Psyclone.</font></font>                 </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="2"><a name="quitpsyclonefrompsyprobe" id="quitpsyclonefrompsyprobe"></a>To                   quit Psyclone from <a href="psycloneManual.html#psyprobe" class="navLink">psyProbe</a>                   you can use the link the bottom of the main psyProbe page. <br>                  <br>                  To quit Psyclone at the <a href="psycloneManual.html#commandline" class="navLink">command                   line</a> press CTRL-C. </font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="2">                   If CTRL-C at the command line doesn't make Psyclone shut down                   nicely, pressing CTRL-C three times will perform a hard exit.</font>                 </p></td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>      <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">        <tbody>          <tr>            <td background="images/grey-bk.gif" bgcolor="#f7f7f7" height="20" valign="middle" width="193">            <p><span class="tutorialSubsectionHeading"><a name="usingpsyprobe" id="usingpsyprobe"></a>UsingpsyProbe</span> </p>            </td>            <td align="right" background="images/grey-bk.gif" bgcolor="#f7f7f7" height="30" valign="CENTER" width="390"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="top" width="75">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="3" height="157" valign="top"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><b><a href="psycloneManual.html#psyprobe">psyProbe</a></b>is the web-based monitoring interface for <a href="#psyclone" class="navLink">Psyclone</a>. With it you can view theinternals of Psyclone at run-time. Before you can use psyProbe you haveto <a href="#usingpsyclone" class="navLink">runPsyclone</a>. </font></font></font>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Use psyProbe </font><font size="-1"> by typing the following into the URL box on yourbrowser: <br>            <br>&nbsp;&nbsp;<strong>http://</strong></font><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">[</font><font size="-1"><strong>machine</strong>]<strong>:</strong></font><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">[</font><font size="-1"><strong>psyclonePort</strong>]<br>            <br>where <span class="keyConcept">[psyclonePort]</span>is the <a href="psycloneManual.html#commandlineip" class="navLink">port</a> that Psyclone was started upwith, or assigned to psyProbe in the psySpec (the default is <strong>10000</strong>if nothing is specified), and <span class="keyConcept">[machine]</span>is either the IP address for the machine that Psyclone is running on,or its name, or the word "localhost". </font></font></font>            </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">For example, ifyour machine's name is "matrix", and Psyclone is running on port 10000,you would type <em>http://matrix:10000 into your browser. Youcan also type http://localhost:10000</em></font></font></font></p>            <blockquote>              <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666" size="-2">Notice: You may have to use              <strong>http://</strong> in the path sincemost browsers do not default to this protocol by themselves. Morespecifically, </font><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><font color="#666666" size="1"> when you use psyProbe youare not using port 80 on the computer (the default port for httptransfer); the browser may not know to default to the http:// protocolfor any other port than port 80.</font></font></font></font></font></p>            </blockquote>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="postmessage" id="postmessage"></a><span class="tutorialSubsectionHeading"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Posting Messages<br>            </font></font></font></span>Go tothe Post Message page by clicking on the <span class="navLink"><b>post_message_page_::</b></span>link on the main psyProbe page (if you have Psyclone currently runningyou can go there now by clicking <a href="JavaScript:launchPostMessage('postmessage');">here</a>).&nbsp;</font></font></font>            </p>                <p><span class="tutorialSubsectionHeading"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">                   </font></font></font></span><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">                   To post a message to a Psyclone Whiteboard you need to specify                   three things, at a minimum: Who the message is from, which Whiteboard(s)                   will receive the message, and what type the message is. You                   specify the sender in the first panel (the one called <b>from</b>).                   The <b>to</b> on the page contains a list of the Whiteboards                   &#8212; check off one or more Whiteboards. The third                   panel on the page, <span class="navLink"><b>post_message_::</b></span>,                   allows you to manually key in the message type, and the message                   content, if you have any. When this is done, you can post your                   message by pressing the 'post' button at the bottom.</font></font></font>                 </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">In addition tothis, you can make any module receive a '<b>cc</b>' on yourmessage. This is done in the <b>from</b> panel. A 'cc'dmodule will receive (i.e. it will be woken up by) the message no matterwhether it registered for its type or not.</font></font></font>            </p>            <p><span class="tutorialSubsectionHeading"><a name="usingwbfilters" id="usingwbfilters"></a><a name="usingbbfilters" id="usingbbfilters"></a>UsingWhiteboard Filters<br>            </span> <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The Whiteboardpage allows you to filter the messages shown on the messages page. Ifyou are using the <a href="psycloneManual.html#psy:messagetypeontology">recommended</a>dot-delimited message name format (e.g. My.Example.Message.Type,Input.hearing.voice), you can construct filters using a star (*) as awildcard. </font></font></font></p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">For example,let's say that the Whiteboard contains the following 5 message types:</font></font></font>            </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><em>&nbsp;Namespace.Input.Message.One</em></font></font></font>            <em><br>            <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp; <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>Namespace.</em></font></font>Output.Message.Alpha</font></font></font>            <br>            <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp; <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>Namespace2.</em></font></font>Output.Message.Omega</font></font></font>            <br>            <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp; <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>Namespace3.</em></font></font>My.Input.Message.One</font></font></font>            <br>            <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp; <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>Namespace3.</em></font></font>My.Output.Info.Two</font></font></font>            </em> </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The filterpattern <b>*Namespace.*</b> will result in only the firstand second messages types showing on the page. The pattern <b>Namespace3.My.Input.*</b>will block all messages except the fourth in the list. The pattern <b>*.Message.*</b>will, in this example, show all messages except the last one. </font></font></font>            </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">This mechanismis very useful for making sure that messages that should be posted havebeen posted. The filtering is not limited to dot-delimitation; you canspecify for example <strong>*M*</strong> and allmessagetypes above above will be allowed; <strong>*essag*</strong>to exclude the last one.</font></font></font> </p>            <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Thecontent filter allows you to filter on any content of the messages. Ifyou use this feature only messages which contain a particular string intheir content will be listed in the list. </font><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">(Content refersto the <strong>payload</strong> of messages.) The inputfield in the <strong>content</strong> filter allows you toinput any ASCII string for this purpose. For example, <span class="keyConcept">*clone*</span> will filter out allmessages except those which contain the string "clone" somewhere in thecontent.</font></font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The                   amount of content shown in the table can also be set with the                   radio buttons <strong>none</strong>, <strong>tiny</strong>,                   <strong>full</strong>. Selecting "none" will hide the content                   of the messages; selecting tiny will show the first line of                   the content (or a summary of the content, if Psyclone knows                   how to parse it); "full" will show the full content of all messages                   below each message in the table.</font></font></font> </p>                <p class="tutorialSubsectionHeading">Using psyProbe With Satellites</p>                <p>If you want to use <a href="#psyprobe" class="navLink">PsyProbe</a>                   to see WBs running in the <a href="#usingsatellites"><span class="navLink">Satellite</span></a>,                   you must put a copy of the full HTML tree (from the Psyclone                   distribution) next to the Psyclone Satellite Server in the directory                   where you run the Psyclone -satelliteserver command.                 </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="455"><a name="creatingyourfirstpsyclone" id="creatingyourfirstpsyclone"></a>Creating andrunning your first Psyclone system</td>            <td align="right" width="49">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="509" valign="top">            <p>Whether you are a novice or expert in modelingcomplex systems the best place to start will probably be the examplesprovided with the Psyclone distribution (see the <a href="index.html" class="navLink">index</a>). </p>            <p>The path of least resistance (can be taken in anyorder, except the first two):</p>                <blockquote>                   <p><span class="navLink"><a href="#gettingstarted">Getting started                     with Psyclone</a> <br>                    <a href="psycloneManual.html#concepts">Concepts: Whiteboards,                     Modules, Messages, Streams</a><br>                    <a href="#runningjavaexamples">Running the provided external                     Java examples</a><br>                    <a href="#runningcppexamples">Running the provided external                     C++ examples</a><br>                    <a href="#runninginternalcppexamples">Running the provided                     internal C++ examples</a><br>                    <a href="#dominosexample">Running the provided roundRobinPsySpec                     example</a> <br>                    <a href="#dominosexample">Running the provided dominoPsySpec                     example</a> </span></p>            </blockquote>            <p>There are several things that need to beconsidered when creating the first system using Psyclone. Firstly,Psyclone uses a few <a href="psycloneManual.html#concepts">newconcepts</a> that you may want to familiarize yourself with.Secondly, you will want to look at the message and routing protocolthat Psyclone uses, called <a href="http://www.mindmakers.org/openair/">OpenAIR</a>.Thirdly you probably should look at the examples provided with thedistribution. </p>                <p>One of the complicating things about real-time systems with independent                   elements is the way that causality works in them &#8212;                   when each element can operate independent of the others some                   causal chain of events that the designer wanted to happen may                   not happen because one or more events in the system don't always                   happen at the right time. Systems which are highly time-dependent,                   and especially systems which are intended to interact with the                   real world, will most likely need to be tuned and tested before                   they operate as intended. Yet there is no other way to model                   many of the highly complex systems we see in the world. Here                   is what you can do: </p>                <ul>                  <li> <span class="basicBullets">The Constructionist Design Methodology                     provides some principles to help with this and related problems.                     Mindmakers.org has <a href="http://www.mindmakers.org/courseMaterialsPage.jsp">a                     </a></span><span class="navLink"><a href="http://www.mindmakers.org/courseMaterialsPage.jsp">section                     on this methodology</a></span><span class="basicBullets">.                     </span></li>                  <li> <span class="basicBullets">Go through as many tutorials                     on Psyclone as you can before starting to design your own                     system &#8212; be prepared to have to redo some of                     your design.</span></li>                  <li class="basicBullets">Use your own carefully designed <a href="psycloneManual.html#psy:messagetypeontology" class="navLink">message/stream                     type ontology</a> or a third-party ontology.</li>                  <li class="basicBullets">Desing your system to be resilient                     to temporal variation is events. <span class="navLink"> </span>                   </li>                </ul>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" height="879" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSectionHeading" height="30" width="407"><a name="runningjavaexamples" id="runningjavaexamples"></a> <a name="runningexternalmoduleexamples"></a>Running theprovided external Java examples</td>            <td align="right" width="34">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="100">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td height="860" colspan="4" valign="top">                 <p>Java examples are                   included in the JavaAIRPlug download. <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The                   examples included are <span class="keyConcept"><strong>JavaPoster.java</strong></span>                   and <strong> <span class="keyConcept">JavaReader.java</span></strong>.                   The JavaPoster simply posts a message <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">of                   type <span class="keyConcept"><b>My.Test.Message.Type</b></span></font></font></font>                   <font size="-1">to whiteboard <span class="keyConcept"><strong>WB1</strong></span>                   when you press the return key. The JavaReader is an example                   of a module that registers with whiteboard <strong> <span class="keyConcept">WB1</span></strong>                   for that same message type, and simply prints it to the console.</font></font></font></p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">To                   run (on Linux and Mac OS X), do:</font></font></font> <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   java -classpath ./:JavaOpenAIR.jar JavaReader psyclone=[psyclone                   host</font><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">]:</font></font></font></font><font size="-1">[psyclone                   port]</font></font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">where                   [psyclone host] is either the <a href="psycloneManual.html#computeripaddress" class="navLink">IP                   address</a> of your machine or the word <i>localhost</i>, and                   [psyclone port] is the port that you <a href="#gettingstarted" class="navLink">started                   Psyclone up with</a>.</font></font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Notice                   that on <span class="keyConcept"><b>Windows</b></span> you will                   be using a slightly different syntax for paths:&nbsp;</font></font></font>                   <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   java -classpath .;<font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">JavaOpenAIR</font></font>.jar                   JavaReader psyclone=[psyclone host]:[psyclone port]<br>                  <br>                  i.e. use semicolon instead of colon.</font></font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Furthermore,                   if you are using <span class="keyConcept"><b>Cygwin</b></span>                   on <span class="keyConcept"><b>Windows</b></span> you will be                   using yet another syntax for paths:</font></font></font><br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   java -classpath .;<font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">JavaOpenAIR</font></font>.jar                   JavaReader [psyclone host] [psyclone port]<br>                  <br>                  i.e. use semicolon instead of colon, and for paths, use backslash                   "\" instead of forward slash "/".</font></font></font> </p>                <p class="example"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   Example command (on Linux, with Psyclone running on port 20001):&nbsp;</font></font></font>                   <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   <i>&gt;java -classpath ./:</i><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>JavaOpenAIR</em></font></font><i>.jar                   JavaReader psyclone=localhost:10000</i></font></font></font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Now                   you need to go to another console window, and in the same JavaExamples                   directory, do:</font></font></font> <br>                  <span class="example"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   Example (Linux):&nbsp;</font></font></font> <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   <i>&gt;java -classpath ./:</i><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><em>JavaOpenAIR</em></font></font><i>.jar                   JavaPoster psyclone=localhost:10000</i></font></font></font>                   <br>                  </span> <font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1"><br>                  </font> <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Pressing                   Enter on the <span class="keyConcept"><b>JavaPoster</b></span>                   you should see the <span class="keyConcept"><b>JavaReader</b></span>                   print out that it received it, on the command line.</font></font></font>                 </p>                <blockquote>                  <p><font face="Verdana, Arial, Helvetica, sans-serif"><span class="smallSizeNonConspicuous"><font color="#666666"><font size="1">If                     you get a message of the effect 'java.lang.OutOfMemoryError',                     you may need to provide a command-line parameter to ensure                     sufficient memory allocation for Java.&nbsp;</font></font></span></font>                     <span class="smallSizeNonConspicuous"><font size="1"><br>                    <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">Use                     the following command to run Java:</font></font></font> <font size="1"><br>                    </font></span><font size="1"> <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">&nbsp;Example:</font></font>                     <br>                    <span class="example"><i><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">&nbsp;                     &gt;java -Xincgc -Xms50M -Xmx200M -classpath ./:JavaOpenAIR.jar                     JavaReader psyclone=localhost:10000&nbsp;<br>                    </font></font></i></span><i><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">                     <br>                    </font></font></i><span class="smallSizeNonConspicuous"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#666666">The                     first parameter is incremental garbage collection, the second                     is the startup memory size and the third is the maximum. In                     this example, an out of memory error would not occur until                     Java has used up 200MB of memory.&nbsp;</font></font></span></font>                   </p>                </blockquote>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">To                   <span class="keyConcept"><b>compile the Java examples</b></span>                   you need to include the <span class="keyConcept"><strong>JavaOpenAIR</strong></span>                   libraries.</font></font></font> <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">To                   compile the Java examples you will need the need to download                   and use the <a href="http://java.sun.com/j2se/1.4.2/download.html" class="navLink">Sun                   Java SDK</a> (c</font></font></font></font></font><font size="-1">hoose                   the one that is appropriate to your platform).<br>                  </font></font></font><br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   javac -classpath <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">JavaOpenAIR</font></font>.jar                   JavaReader.java</font></font></font> <br>                  <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;                   javac -classpath <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">JavaOpenAIR</font></font>.jar                   JavaPoster.java&nbsp;</font></font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">To                   compile on <span class="keyConcept"><b>Linux</b></span><b> </b>and<b>                   <span class="keyConcept">Mac OS X</span></b>, do:</font></font></font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;Example:&nbsp;</font></font></font>                   <br>                  <span class="commandlineText">&nbsp; &gt;javac -classpath ./:JavaOpenAIR.jar                   JavaPoster.java </span><span class="example"><br>                  <i><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">&nbsp;and:</font></font></font></i>                   <br>                  </span><span class="commandlineText">&nbsp; &gt;javac -classpath                   ./:JavaOpenAIR.jar JavaReader.java </span> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Both                   should return <font color="#661e20">without</font> error (<a href="mailto:support@cmlabs.com" class="navLink">let                   us know</a> if you have problems). Use the above commands to                   run them.</font></font></font></p></td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="460"><a name="externaljavaexampleindetail" id="externaljavaexampleindetail"></a>External Javamodule example in detail</td>            <td align="right" width="18">&nbsp;</td>            <td align="right" width="112"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="80">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="70" valign="top">            <p>To read about external modules in general, go <a href="psycloneManual.html#psy:externalmodules" class="navLink">here</a>.            </p>            <p>To write an external module in Java, you will needthe Java AIR Plug. (If JavaAIRPlug was not included with thisdistribution you can download the plug by going to <a href="http://www.cmlabs.com/psyclone/download/" class="navLink">http://www.cmlabs.com/psyclone/download/</a>,and selecting the platform that you are developing your external moduleon). </p>            <p> We will assume that you start your external Javamodule manually. To start modules automatically, see the tutorial on <a href="#automaticmodulestartup"><span class="navLink">Automaticallystarting modules</span></a>. </p>            <p> To write an external Java module, you will needto create a source file bearing the name of your module. We will createa module call Reader, with source Reader.java. </p>            <p> Initially in your source file you will alwaysneed to import the AIR package that come with the plug:<br>package com.cmlabs.air; After creating a class definition and creatinga few instance variable: </p>            <blockquote>              <p class="codeJava"> public class Reader {<br>private JavaAIRPlug plug; // the connection to Psyclone<br>private Message triggerMessage; // reusable incoming message<br>private Message msg; // reusable ougoing message</p>            </blockquote>            <p> you will create a 3-arg constructor:</p>            <blockquote>              <p class="codeJava"> public Reader(StringplugName, String host, int port) {</p>            </blockquote>            <p> In the constructor, instantiate the module</p>            <blockquote>              <p class="codeJava"> plug = newJavaAIRPlug(plugName, host, port);</p>            </blockquote>            <p> and use the plug call init() to connect toPsyclone:</p>            <blockquote>              <p class="codeJava"> if (!plug.init()) {<br>                    &nbsp;&nbsp;&nbsp;System.out.println("Could not connect to                     the Server on " + host +  on port " + port + "...");<br>&nbsp;&nbsp;&nbsp;System.exit(0);<br>} </p>            </blockquote>            <p> Next, the important work that the module needs todo can now be written. This sample code simply waits for a triggermessage (of message type that is specified in the psySpec for thismodule) by using the plug call <span class="codeJava">waitForNewMessage(longms)</span>, and prints information about the trigger message whenthe module is woken up. Additionally, a new basic message is create,given to the plug as a message to post using the plug call <span class="codeJava">addOutputMessage()</span>, and thenpost a message (of message type that is specified in the psySpec forthis module) using the call <span class="codeJava">sendOutputMessages()</span>:            </p>            <blockquote>              <p class="codeJava"> while (true) {<br>&nbsp;&nbsp;&nbsp;if ((triggerMessage =plug.waitForNewMessage(50)) != null) {<br>&nbsp;&nbsp;&nbsp;System.out.println(triggerMessage.postedTime.printTime()+ ": Reader&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;receivedmessage " + triggerMessage.type + " from " +&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triggerMessage.from);              <br>&nbsp;&nbsp;&nbsp;msg = new Message("", "", "");<br>&nbsp;&nbsp;&nbsp;plug.addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;plug.sendOutputMessages();<br>} else {<br>if (!tv.isServerAvailable())<br>&nbsp;&nbsp;&nbsp;System.out.printf("Psyclone is availablebut the module <br>&nbsp;&nbsp; has not been awoken ");<br>else<br>&nbsp;&nbsp;&nbsp;System.out.printf ("Psyclone is notavailable");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br>} </p>            </blockquote>            <p> Finally, you will need a <span class="codeJava">main()</span> method in the class inorder to startup the module. The main() method will generally compriseof code that interprets some of the command-line parameters that wouldbe important, such as the host and port that Psyclone is running on.Some sample code that can be used in the external module to do thiswould be: </p>            <blockquote>              <p class="codeJava"> public static voidmain(String[] args) {<br>String usage = "Reader usage: Reader&nbsp;&nbsp;[psyclone=[psycloneHost][:psyclonePort]][name=Reader] (eg \"Reader &nbsp;&nbsp;psyclone=:27000\")";<br>// default host and port<br>String host = "localhost";<br>int port = 10000;<br>String name = "Reader";<br>String arg;<br>for (int n = 0; n &lt; args.length; n++) {<br>&nbsp;&nbsp;&nbsp;arg = args[n];<br>&nbsp;&nbsp;&nbsp;if (arg.startsWith("psyclone=")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String str= arg.substring(9);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(str.length() &gt; 0) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;intpos = str.indexOf(":");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(pos &lt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host= str;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif (pos &gt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host= str.substring(0, pos);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port= Utils.str2int(str.substring(pos + 1));<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;} else if (arg.startsWith("name=")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name =arg.substring(5);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;Reader reader = new Reader(name, host,port);<br>} </p>            </blockquote>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="413"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="runningcppexamples" id="runningcppexamples"></a><a name="runningexternalcppexamples" id="runningexternalcppexamples"></a>Running theprovided external c++ examples</font></font></font></b></td>            <td align="right" width="61">&nbsp;</td>            <td align="right" width="116"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="80">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="418" valign="top"> <p>The C++ examples are                   included in the CppAIRPlug download. <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">The                   C++ examples are <strong>Poster</strong> and <strong>Reader</strong>.                   The </font><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">CppPoster</font></font><font size="-1">                   simply posts a message <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">of                   type <b>My.Test.Message.Type</b></font></font></font> <font size="-1">to                   whiteboard <strong>WB1</strong> when you press the return key.                   The </font><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">CppReader</font></font><font size="-1">                   is an example of a module that registers with whiteboard<strong>                   WB1</strong> for that same message type, and simply prints it                   to the console.</font></font> </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">To                   run the <b>C++ examples</b> you will have to have a Whiteboard                   called WB1 already running in Psyclone (the simplest way to                   do this is to start up Psyclone without a spec specified at                   the command line). In the directory where the C++ examples are,                   give the commands:</font></font> </p>                <p></p>                <span class="commandlineText">&nbsp; Reader psyclone=[psyclone                 host][:any port number] </span> <p class="smallSizeNonConspicuous"><font face="Verdana, Arial, Helvetica, sans-serif">Note                   that the : has to be there if you give a port, and that you                   don't need to specify psyclone=localhost:10000 at all if you                   want to use the default of localhost:10000. </font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif">and in another                   console window, do: </font> </p>                <p class="commandlineText">&nbsp; Poster psyclone=[psyclone host][:any                   port number] </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">in                   this order, each in its own console window, where <span class="keyConcept">&lt;psyclone                   host&gt;</span> is the IP address of the computer running Psyclone,                   the name of the computer running Psyclone (or the word "localhost",                   if you're running the example on the same machine as Psyclone).                   The Reader will register with whiteboard WB1 for a message of                   type Test.Message.Type. CppPoster will post a message of type                   Test.Message.Type once every second. </font></font></p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">When                   Poster posts a message it goes to WB1 which then sends it to                   the registered Reader module. If you look at WB1 in <a href="psycloneManual.html#psyprobe"><span class="navLink">psyProbe</span></a>                   you can see the message entered every time foor both events.                   Compare the timestamps to see how long it took for the message                   to go across from one module to the other.&nbsp; </font></font></p>                <p class="tutorialSectionHeading"><font face="Verdana, Arial, Helvetica, sans-serif">Compiling                   the C++ Examples</font></p>                <p><font size="2">To compile the C++ examples for Linux or Mac                   OS X, use the </font><span class="keyConcept">Make file</span><font size="2">                   included with the examples. For Windows you need the Visual                   Studio 6 (.NET project files can be made available). To start                   up the project in Visual Studio, double-click on the <span class="codeCPP">mycmdll.sln</span>                   file. Then build the solution. This will compile and build the                   library file</font></p>                <blockquote>                  <p><font size="2"> <span class="codeCPP">cm.dll</span></font></p>                </blockquote>                <p><font size="2"> To include crank functions as part of an external                   library when running Psyclone you will need to create a <a href="#psy:psyspec"><span class="navLink">psySpec</span></a>                   and define a <a href="psycloneManual.html#psy:module" class="navLink">module</a>                   using the specific crank function as a crank. For example, to                   define a module which uses the crank function <span class="keyConcept">testCrank1</span>                   located inside the example library called <span class="codeCPP">cm</span>,                   you would specify the module like this: </font></p>                <blockquote>                   <p align="left" class="codeXML"> <span class="codeXML"> &lt;module                     name="</span><span class="dataValue">MyModule</span><span class="codeXML">">                     <br>                    &nbsp;&nbsp;&lt;description></span><span class="dataValue">This                     module is my first module</span><span class="codeXML">&lt;/description&gt;                     <br>                    &nbsp;&nbsp;&lt;trigger after="</span><span class="dataValue">100</span><span class="codeXML">"                     type="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"/&gt;                     <br>                    &nbsp;&nbsp;&lt;crank name="</span><span class="dataValue">cm::testCrank1</span><span class="codeXML">"                     /&gt; <br>                    &nbsp;&nbsp;&lt;post to="</span><span class="dataValue">WB1</span><span class="codeXML">"                     type="</span><span class="dataValue">Some.Message.Type</span><span class="codeXML">"                     /&gt; <br>                    &lt;/module&gt; </span></p>                </blockquote>                <p><span class="mediumSizeNonConspicuous">Related:</span>&nbsp;<span class="navLink"><a href="http://www.mindmakers.org/projects/Psyclone/pages/info/Windows_PsycloneSDK_info.html#howtorun">How                   to run the SDK</a></span></p></td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="387"><a name="externalcppexampleindetail" id="externalcppexampleindetail"></a>External C++module example in detail</td>            <td align="right" width="91">&nbsp;</td>            <td align="right" width="112"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="80">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="78" valign="top">            <p>To read about external modules in general, go <a href="psycloneManual.html#psy:externalmodules" class="navLink">here</a>.            </p>            <p>To write an external module in C++, you will needthe CppAIRPlug. (If CppAIRPlug was not included with this distributionyou can download the plug by going to <a href="http://www.cmlabs.com/psyclone/download/" class="navLink">http://www.cmlabs.com/psyclone/download/</a>,and selecting the platform that you are developing your external moduleon). </p>            <p> We will run this external module manually. (Thetutorial on <a href="#automaticmodulestartup"><span class="navLink">Automatically starting modules</span></a>explains how to do this automatically.) </p>            <p> To write an external C++ module, you will need asource and header file bearing the name of your module. The Readerexample with the Psyclone distribution is <span class="keyConcept">Reader.cpp</span>and <span class="keyConcept">Reader.h</span>. </p>            <p> The header file must contain at least thefollowing, using Reader as the example: </p>            <blockquote>              <p class="codeCPP"> #include "Communicator.h"<br>#include "Component.h"<br>#include "CppAIRPlug.h"<br>class Reader : public CppAIRPlug<br>{<br>&nbsp;&nbsp;&nbsp;public:<br>&nbsp;&nbsp;&nbsp;Reader(JString name, JString host, intport);<br>&nbsp;&nbsp;&nbsp;virtual ~Reader();<br>};</p>            </blockquote>            <p> The source files must first and foremost includethe header:</p>            <blockquote>              <p class="codeCPP"> #include "Reader.h"</p>            </blockquote>            <p> The source file must also have a constructor anddestructor:</p>            <blockquote>              <p class="codeCPP">CppReader::CppReader(JStringname, JString host, int port) :CppAIRPlug(name, host, port) {}<br>CppReader::~CppReader() {}</p>            </blockquote>            <p> The source file must have a <span class="codeCPP">main()</span> function in order tostartup the module:</p>            <blockquote>              <p class="codeCPP"> int main(int argc, char*argv[]) </p>            </blockquote>            <p> The <span class="codeCPP">main()</span>function will generally first contain some code that interprets some ofthe command-line parameters that would be important, such as the hostand port that Psyclone is running on. Some sample code that can be usedin the external module to do this would be: </p>            <blockquote>              <p class="codeCPP"> JString host ="localhost";<br>int port = 10000;<br>JString allArgs;<br>for (int ii=0; ii&lt;argc; ii++) {<br>&nbsp;&nbsp;&nbsp;allArgs += JString(argv[ii]) + " ";<br>}<br>allArgs.trim();<br>Dictionary argDict = allArgs.splitCommandLine();<br>JString arg;<br>JString val;<br>for (int n=1; n&lt;argDict.getCount(); n++) {<br>&nbsp;&nbsp;&nbsp;arg = argDict.getKey(n);<br>&nbsp;&nbsp;&nbsp;val = argDict.get(n);<br>&nbsp;&nbsp;&nbsp;if (arg.equalsIgnoreCase("psyclone")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Collectioncol = val.trim().split(":");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(col.get(0).length() &gt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;host =col.get(0);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(col.get(1).length() &gt; 0)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;port =col.get(1).toInt();<br>&nbsp;&nbsp;&nbsp;}<br>} </p>            </blockquote>            <p> The module should then be instantiated: </p>            <blockquote>              <p class="codeCPP"> CppReader* tv = newCppReader("CppReader", host, port); </p>            </blockquote>            <p> and use the plug call <span class="codeCPP">init()</span>to connect to Psyclone: </p>            <blockquote>              <p class="codeCPP"> if (!tv-&gt;init()) {<br>&nbsp;&nbsp;&nbsp;printf("Could not connect to Psyclone on'%s' port %d, exiting...\n\n", (char*) host, port);<br>return 0;<br>} </p>            </blockquote>            <p> Since you are running the module manually, youmay now test for the availability of Psyclone and, if available, startthe module, otherwise, delete the module and exit from the program: </p>            <blockquote>              <p class="codeCPP"> if(tv-&gt;isServerAvailable()) {<br>&nbsp;&nbsp;&nbsp;tv-&gt;start();<br>} else {<br>&nbsp;&nbsp;&nbsp;printf("Could not connect to Psyclone on'%s' port %d, <br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;exiting...\n\n",(char*) host, port);<br>&nbsp;&nbsp;&nbsp;delete(tv);<br>&nbsp;&nbsp;&nbsp;exit(0);<br>} </p>            </blockquote>            <p> Finally, the important work that the module needsto do can now be written. This sample code simply waits for a triggermessage (of message type that is specified in the psySpec for thismodule) by using the plug call <span class="codeCPP">waitForNewMessage(longms)</span>, and prints information about the trigger message whenthe module is woken up. Additionally, a new basic message is create,given to the plug as a message to post using the plug call <span class="codeCPP">addOutputMessage()</span>, and thenpost a message (of message type that is specified in the psySpec forthis module) using the call <span class="codeCPP">sendOutputMessages()</span>:            </p>            <blockquote>              <p class="codeCPP"> Message* triggerMessage;<br>Message* msg<br>int count = 0;<br>while (true) {<br>&nbsp;&nbsp;&nbsp;if ((triggerMessage =tv-&gt;waitForNewMessage(100)) != NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("\r%s:CppReader received message %s from %s...\n", (char*)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;triggerMessage-&gt;getTimestamp().printTimeMS(),(char*) triggerMessage-&gt;getType(),&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(char*)triggerMessage-&gt;getFrom());<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg = newMessage("", "", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fflush(stdout);<br>&nbsp;&nbsp;&nbsp;} else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!tv-&gt;isServerAvailable())<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Psycloneis available but the module has not been awoken");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Psycloneis not available"); <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br>return 0; </p>            </blockquote>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>      <table align="center" border="0" cellpadding="0" cellspacing="0" width="670">        <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="414"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="runninginternalcppexamples" id="runninginternalcppexamples"></a>Runningthe provided internal c++ examples</font></font></font></b></td>            <td align="right" width="90">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="150" valign="top">            <p>Internal modules are designed to run insidePsyclone for maximum performance and efficiency. They are similar toexternal modules, but somewhat simpler to design, implement andmaintain. </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif">A librarycontains <a href="psycloneManual.html#psy:cranks"> <span class="navLink">crank</span></a> functions,which can be as complex as the designer wants. Cranks share the sameinterface definition, but must have different names. Any number oflibraries can be loaded by Psyclone at the same time.</font> </p>            <p><font face="Verdana, Arial, Helvetica, sans-serif">When anInternal Module is specified in the <a href="psycloneManual.html#psy:psyspec">psySpec</a>file, it may include a crank section. The crank section can list one ormore cranks to be executed. These then reference crank methods in theexternally loaded library. To take an example, a crank 'mycrank',contained in an external library called 'mylib', can be specified inthe psySpec file as</font></p>            <p class="codeXML"><font face="Verdana, Arial, Helvetica, sans-serif">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crank name="<span class="dataValue">mylib::mycrank</span>"/&gt;</font></p>            <p><font face="Verdana, Arial, Helvetica, sans-serif">This means thatwhen the Internal Module that contains this crank specification gets <a href="psycloneManual.html#psy:wakeup">awoken</a> witha trigger, the triggering message and any retrieved messages will bedelivered as input to the crank. In return the Internal Module expectszero or more output messages, that is, the crank may post something asa result of having been awakened.</font></p>            </td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="452"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="roundrobinexample" id="roundrobinexample"></a><a name="runningroundrobinpsyspec" id="runningroundrobinpsyspec"></a>Running                 the provided roundRobinPsySpec example</font></font></font></b></td>              <td align="right" width="141"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="77">&nbsp;</td>            </tr>            <tr align="center" bgcolor="#f7f7f7" valign="top">               <td colspan="3" height="1166">                 <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1"><strong>If                   you are new to Psyclone this is a good place to start</strong>.                   </font></font></p>                <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">A                   psySpec is an XML file which is used to initialize things. </font></font><font size="-1">                   The psySpec dictates for example which whiteboards and which                   modules to start up, as well as some other things. </font></font></p>                <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">T<font size="-1">he                   <span class="keyConcept">roundRobin<strong>PsySpec.xml</strong></span>                   psySpec file is included with Psyclone and reproduced here in                   full, for convenience. </font></font></font></font></font><font color="#333333" size="-1">It                   should take you about 5-10 minutes to go through this example.                   </font></font></p>                <p align="left"><font color="#333333" size="-1" face="Verdana, Arial, Helvetica, sans-serif">The                   file itself looks like this:</font></p>                <blockquote>                   <p align="left" class="codeXML">&lt;psySpec name=&quot;<span class="dataValue">Demonstration                     of Whiteboards, Modules and Messages</span>&quot; version=&quot;1.2&quot;&gt;</p>                  <p align="left"> <span class="codeXML">&nbsp;&nbsp;&lt;global&gt;<br>                    &nbsp;&nbsp;&lt;title&gt;Round-robin psySpec&lt;/title&gt;<br>                    &nbsp;&nbsp;&lt;description&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;This demo shows basic usage of Whiteboards                     Modules and Messages. <br>                    &nbsp;&nbsp;&lt;/description&gt;<br>                    &nbsp;&nbsp;&lt;/global&gt; </span></p>                  <p align="left"><span class="codeXML"> &nbsp;&nbsp;&lt;whiteboard                     name=&quot;</span><span class="dataValue">Whiteboard.1</span><span class="codeXML">&quot;                     maxcount=&quot;</span><span class="dataValue">15000</span><span class="codeXML">&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;Stores all messages                     from the three round-robin modules.&lt;/description&gt;<br>                    &nbsp;&nbsp;&lt;/whiteboard&gt;</span></p>                  <p align="left" class="codeXML"> &lt;!-- ####################                     ROUND ROBIN MODULES #################### --&gt; </p>                  <p align="left" class="codeXML"> <span class="codeXML">&nbsp;&nbsp;</span>&lt;module                     name=&quot;<span class="dataValue">RoundRobin-1</span>&quot;&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>&lt;description&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;</span>This                     module gets initially triggered by Psyclone.System.Ready,                     <br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;</span>which                     is posted by Psyclone when it's ready, <br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>and                     after that it is triggered by Trigger3 <br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>which                     is posted by the RoundRobin-3 module.<br>                    <span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;/description&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>&lt;triggers                     from=&quot;Whiteboard.1&quot;&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;trigger                     after=&quot;<span class="dataValue">100</span>&quot; type=&quot;<span class="dataValue">Psyclone.System.Ready</span>&quot;/&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;</span>&lt;trigger                     after=&quot;<span class="dataValue">500</span>&quot; type=&quot;<span class="dataValue">Trigger3</span>&quot;/&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>&lt;/triggers&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span><span class="codeXML">&nbsp;&nbsp;</span>&lt;post                     to=&quot;<span class="dataValue">Whiteboard.1</span>&quot;                     type=&quot;<span class="dataValue">Trigger1</span>&quot; /&gt;<br>                    <span class="codeXML">&nbsp;&nbsp;</span>&lt;/module&gt;</p>                  <p align="left"> <span class="codeXML">&nbsp;&nbsp;&lt;module                     name=&quot;</span><span class="dataValue">RoundRobin-2</span><span class="codeXML">&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;This module will                     trigger off RoundRobin-1's posting.&lt;/description&gt;<br>                    </span><span class="codeXML"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger                     from=&quot;</span><span class="dataValue">Whiteboard.1</span><span class="codeXML">&quot;                     </span><span class="codeXML">after=&quot;</span><span class="dataValue">500</span><span class="codeXML">&quot;                     type=&quot;</span><span class="dataValue">Trigger1</span><span class="codeXML">&quot;/&gt;<br>                    &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&lt;post to=&quot;</span><span class="dataValue">Whiteboard.1</span><span class="codeXML">&quot;                     type=&quot;</span><span class="dataValue">Trigger2</span><span class="codeXML">&quot;                     /&gt;<br>                    &nbsp;&nbsp;&lt;/module&gt;</span></p>                  <p align="left"><span class="codeXML">&nbsp;&nbsp;&lt;module                     name=&quot;</span><span class="dataValue">RoundRobin-3</span><span class="codeXML">&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;This module will                     trigger off RoundRobin-2's posting.&lt;/description&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from=&quot;</span><span class="dataValue">Whiteboard.1</span><span class="codeXML">&quot;                     after=&quot;</span><span class="dataValue">500</span><span class="codeXML">&quot;                     type=&quot;</span><span class="dataValue">Trigger2</span><span class="codeXML">&quot;/&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;post to=&quot;</span><span class="dataValue">Whiteboard.1</span><span class="codeXML">&quot;                     type=&quot;</span><span class="dataValue">Trigger3</span><span class="codeXML">&quot;                     /&gt;<br>                    &nbsp;&nbsp;&lt;/module&gt;</span></p>                  <p align="left" class="codeXML">&lt;/psySpec&gt;</p>                </blockquote>                <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">                   When Psyclone starts up it can be told to read in this <a href="#spec:thebasics" class="navLink">psySpec</a>.                   </font></font><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">Go                   to the <a href="#gettingstarted" class="navLink">specification                   of running Psyclone</a>; use the roundRobinPsySpec.xml as the                   value for the 'spec' <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">parameter</font></font></font></font></font>.                   </font></font></font></font></font>                   <map name="MapMapMap">                    <area shape="circle" coords="184,206,9" href="#30mins:intmodule">                    <area shape="circle" coords="206,214,9" href="#30mins:intmodule">                    <area shape="circle" coords="228,202,9" href="#30mins:intmodule">                    <area shape="rect" coords="99,293,252,431" href="#30mins:anotherpsyclone">                    <area shape="rect" coords="297,294,386,396" href="#30mins:satellites">                    <area shape="circle" coords="321,419,13" href="#30mins:extmodule">                    <area shape="circle" coords="367,417,13" href="#30mins:extmodule">                    <area shape="circle" coords="50,335,17" href="#30mins:extmodule">                    <area shape="rect" coords="16,187,69,248" href="#30mins:psyspec">                    <area shape="rect" coords="16,369,68,430" href="#30mins:psyspec">                    <area shape="rect" coords="119,131,159,170" href="#30mins:whiteboard">                    <area shape="rect" coords="179,140,220,181" href="#30mins:whiteboard">                    <area shape="circle" coords="47,154,15" href="#30mins:part1">                    <area shape="circle" coords="267,94,15" href="#30mins:part3">                    <area shape="circle" coords="151,204,14" href="#30mins:part2">                    <area shape="circle" coords="151,272,15" href="#30mins:part4">                    <area shape="circle" coords="345,273,15" href="#30mins:part5">                    <area shape="poly" coords="35,37,50,31,65,36,111,36,131,20,164,34,187,39,187,68,164,75,136,40,124,70,98,56,67,55,49,60,35,51" href="#30mins:micmodule">                    <area shape="poly" coords="326,118,342,104,419,70,573,71,573,208,419,211,331,141" href="#30mins:graphicsmodule">                    <area shape="poly" coords="157,67,140,69,126,91,124,115,131,131,137,113,140,89,153,75" href="#30mins:communication">                    <area shape="poly" coords="173,77,167,84,168,113,180,134,192,140,186,128,179,109,179,85" href="#30mins:communication">                    <area shape="poly" coords="222,149,232,146,273,152,321,142,328,142,328,151,275,166,226,156" href="#30mins:communication">                    <area shape="rect" coords="138,232,218,249" href="#30mins:part1">                  </map>                </p>                <p align="left"><span class="mediumSizeNonConspicuous">READ MORE:                   </span><a href="#gettingstarted" class="navLink">running Psyclone</a>                 </p>                <p align="left"><span class="tutorialSubsectionHeading"><font size="-1">                   </font></span><font size="-1"> <font face="Verdana, Arial, Helvetica, sans-serif">                   If the psySpec specifies <a href="psycloneManual.html#psy:internalmodules" class="navLink">internal                   modules</a>, Psyclone also spawns these. In the roundRobinPsySpec.xml                   file we have defined three internal modules. These modules are                   so that they only use functionality that is built into Psyclone:                   receiving and posting messages.</font></font> </p>                <p align="left"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif">By                   default, Psyclone always spawns (creates) the <span class="navLink"><font face="Verdana, Arial, Helvetica, sans-serif"><a href="psycloneManual.html#psy:whiteboard">whiteboard</a></font></span>                   AIRCentral. This is because Psyclone is <a href="http://www.mindmakers.org/openair" class="navLink">OpenAIR</a>                   compliant. </font></font>In the case of the roundRobinPsySpec.xml                   we also create a second whiteboard, <span class="keyConcept">whiteboard.1</span>.                 </p>                <p align="left">When roundRobinPsySpec starts up the modules start                   to post messages, each in turn. This is because they have been                   rigged in the psySpec to trigger each other in a loop: module                   RoundRobin-1 posts a message type which RoundRobin-2 has subscribed                   to, and so on; RoundRobin-1 also subscribes to a message type                   that is posted by RoundRobin-3. Each of the triggers are outfitted                   with a delay, the after= parameter. This means that Psyclone                   will wait for the specified number of milliseconds before waking                   the module up with that trigger.</p>                <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><span class="mediumSizeNonConspicuous">READ                   MORE: </span><span class="navLink"><a href="#runninginternalcppexamples">psySpec                   internal module example</a> </span></font></font></font><span class="navLink"><a href="#spec:thebasics">writing                   a psySpec</a> <a href="#dominospsyspec">running the dominosPsySpec</a></span></p>                <div align="left"></div></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="452"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="dominosexample"></a><a name="runningdominospsyspec" id="runningdominospsyspec"></a>Runningthe provided dominosPsySpec example</font></font></font></b></td>            <td align="right" width="141"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="77">&nbsp;</td>          </tr>          <tr align="center" bgcolor="#f7f7f7" valign="top">            <td colspan="3" height="1243">            <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1"><strong>If                   you are new to Psyclone you might first want to look at <a href="#roundrobinexample" class="navLink">Running                   the provided roundRobinPsySpec example</a></strong>. If                   you follow most of the links provided down one level of detail,                   it should take you about 10 minutes to go through all points.                   A good way to proceed is to first go through all the steps,                   and then go back and look further at some of the links provided.</font></font>                 </p>            <p align="left"><span class="tutorialSubsectionHeading"><strong>1. PsycloneStartup</strong></span><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><br>                  When Psyclone starts up it reads in the <a href="#spec:thebasics" class="navLink">psySpec</a>,                   an XML file which is used to initialize. The psySpec dictates                   for example which whiteboards and which modules to start up,                   as well as some other things. </font></font> </p>            <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">T<font size="-1">he <span class="keyConcept"><strong>dominosPsySpec.xml</strong></span>file is included with Psyclone. Go to the <a href="#gettingstarted" class="navLink">specification of running Psyclone</a>;use the dominosPsySpec.xml as the value for the 'spec' <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">parameter</font></font></font></font></font>.            </font></font></font></font></font>            <map name="MapMap">            <area shape="circle" coords="184,206,9" href="#30mins:intmodule">            <area shape="circle" coords="206,214,9" href="#30mins:intmodule">            <area shape="circle" coords="228,202,9" href="#30mins:intmodule">            <area shape="rect" coords="99,293,252,431" href="#30mins:anotherpsyclone">            <area shape="rect" coords="297,294,386,396" href="#30mins:satellites">            <area shape="circle" coords="321,419,13" href="#30mins:extmodule">            <area shape="circle" coords="367,417,13" href="#30mins:extmodule">            <area shape="circle" coords="50,335,17" href="#30mins:extmodule">            <area shape="rect" coords="16,187,69,248" href="#30mins:psyspec">            <area shape="rect" coords="16,369,68,430" href="#30mins:psyspec">            <area shape="rect" coords="119,131,159,170" href="#30mins:whiteboard">            <area shape="rect" coords="179,140,220,181" href="#30mins:whiteboard">            <area shape="circle" coords="47,154,15" href="#30mins:part1">            <area shape="circle" coords="267,94,15" href="#30mins:part3">            <area shape="circle" coords="151,204,14" href="#30mins:part2">            <area shape="circle" coords="151,272,15" href="#30mins:part4">            <area shape="circle" coords="345,273,15" href="#30mins:part5">            <area shape="poly" coords="35,37,50,31,65,36,111,36,131,20,164,34,187,39,187,68,164,75,136,40,124,70,98,56,67,55,49,60,35,51" href="#30mins:micmodule">            <area shape="poly" coords="326,118,342,104,419,70,573,71,573,208,419,211,331,141" href="#30mins:graphicsmodule">            <area shape="poly" coords="157,67,140,69,126,91,124,115,131,131,137,113,140,89,153,75" href="#30mins:communication">            <area shape="poly" coords="173,77,167,84,168,113,180,134,192,140,186,128,179,109,179,85" href="#30mins:communication">            <area shape="poly" coords="222,149,232,146,273,152,321,142,328,142,328,151,275,166,226,156" href="#30mins:communication">            <area shape="rect" coords="138,232,218,249" href="#30mins:part1">            </map>            </p>            <p align="left"><span class="mediumSizeNonConspicuous">READ MORE: </span><a href="#gettingstarted" class="navLink">runningPsyclone</a> </p>                <p align="left"><span class="tutorialSubsectionHeading">2. Spawning                   Internal Modules<font size="-1"><br>                  </font></span><font size="-1"> <font face="Verdana, Arial, Helvetica, sans-serif">                   If the psySpec specifies <a href="psycloneManual.html#psy:internalmodules" class="navLink">internal                   modules</a>, Psyclone also spawns these. In the dominosPsySpec.xml                   file we have defined a few internal modules. These modules have                   very simple functionality &#8212; so simple in fact that                   they only use functionality that is built into Psyclone, that                   of receiving and posting messages.</font></font> </p>            <p align="left"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif">By default,Psyclone always spawns (creates) the <span class="navLink"><font face="Verdana, Arial, Helvetica, sans-serif"><a href="psycloneManual.html#psy:whiteboard">whiteboards</a></font></span>AIRCentral, WB1 and WB2. This is because Psyclone is <a href="http://www.mindmakers.org/openair" class="navLink">OpenAIR</a>compliant. </font></font>In the case of thedominosPsySpec.xml it also creates <span class="keyConcept">whiteboard.1</span>and <span class="keyConcept">whiteboard.2</span>. </p>            <p align="left">When dominosPsySpec starts upit creates eight modules. Three of these will continue to post messagesafter the program starts up. This is because they have been rigged inthe psySpec to trigger each other in a loop. </p>            <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><span class="mediumSizeNonConspicuous">READ MORE: </span><span class="navLink"><a href="#runninginternalcppexamples">psySpecinternal module example</a> </span></font></font></font><span class="navLink"><a href="#spec:thebasics">writinga psySpec</a> </span></p>            <p align="left"><span class="tutorialSubsectionHeading">3. Contexts</span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font size="-1"><font size="3"><br>            </font> </font></font></font></font></font><a href="psycloneManual.thml#psy:contexts"><span class="navLink">C<strong>ontexts</strong></span></a><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font size="-1"> can be used tomanage the activity of modules in the system. They are a convenient wayto make sure that sets of modules be <span class="keyConcept"><strong>activeduring certain states and not others</strong></span>. Eventhough contexts have certain features of their own that make themspecial, in some ways they can be thought of as global variables. <font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">Contexts are defined <span class="keyConcept"><strong>hierarchically</strong></span>;in a typical system specific modules are used to post contexts andmanage transition between. Their syntax is<strong> <span class="keyConcept">period-delimited</span></strong>.</font></font></font></font></font></font></font></p>            <p align="left">Once Psyclone is running, goto a browser and <a href="#usingpsyprobe">start up <span class="conceptLink">psyProbe</span></a>, theweb-based interface to Psyclone. This will enable you to open anotherpage, called <span class="keyConcept">contexts+phases page</span>,listed at the top of the main psyProbe page. </p>            <p align="left">Once you have the <a href="psycloneManual.html#psyprobe:contextsandphasespage" class="navLink">contexts+phases</a> page loaded, takea look at the following modules listed there: <strong>Domino-1</strong>,            <strong>Domino-2</strong>, <strong>Domino-3</strong>,            <strong>Domino-40</strong>,<strong>Domino-50</strong> and<strong> Domino-60</strong>.These modules are internal modules. Domino-1, 2 and 3 are set up to <strong>triggereach other</strong> in a cycle, as are Domino-40, 50 and 60,using the <a href="psycloneManual.html#psy:after=" class="navLink">after=</a> parameter of the <a href="psycloneManual.html#psy:triggers" class="navLink">trigger            </a> for each module. </p>                <p align="left">Currently, as you can see in the list of contexts                   at the top of the page, the contexts <strong>System.Ready</strong>                   and <strong>Dominos.Chain-1</strong> are active. Now, using                   the <a href="psycloneManual.html#psyprobe:contextsandphasespage:postcontextsection" class="navLink">post                   context</a> button, you can switch the Dominos context to <strong>Dominos.Chain-2</strong>                   (select this context from the drop-down, and click on <strong>post                   context </strong>button.) When you post Dominos.Chain-1 the                   Dominos.Chain-2 context becomes invalid. (However, if you post                   a context called Dominos.Chain-1.hello the Dominos.Chain-1 will                   still be valid &#8212; the latter subsumes the former.)</p>                <p align="left">Now you should see <strong>Domino-1</strong>,                   <strong>2</strong> and <strong>3</strong> go out of context,                   while the modules <strong>Domino-40</strong>, <strong>50</strong>                   and <strong>60</strong> are in context. You can further verify                   that this is true by going to the <strong>whiteboard pages</strong>                   (click on the whiteboard's name on the main psyProbe page, i.e.                   <strong>Whiteboard.1</strong>), and see that only System.Report                   messages are posted there. If you look at <strong>Whiteboard.2</strong>,                   however, you'll see that the domino chain 2 has started &#8212;                   there are now plenty of messages on Whiteboard.2.</p>            <p align="left"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><span class="mediumSizeNonConspicuous">READMORE: </span><a href="#spec:contexts" class="navLink">usingcontexts</a></font></font></font></font></font></p>            <p align="left"><a name="spec:phaseexample" id="spec:phaseexample"></a></p>            <p align="left"><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1"><span class="tutorialSubsectionHeading">4. Phases</span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font size="-1"><font size="3"><br>            </font></font></font></font></font></font>Everymodule has one or more <a href="psycloneManual.html#psy:phases"><span class="navLink">phases</span></a>. Phases worklike states in a <strong>sequencer</strong>: A module withonly one phase has only one state while active; a module with two ormore phases cycles through the phases. Typically, a phase is changedimmediately after a module has posted (this can be specified in thepsySpec definition for the module by setting the post parameterphasechange="yes"). A module can also simply post an explicit phasechange. </font></p>            <p align="left"><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Phases can be <strong>grouped under contexts</strong>.Phases belonging to the same context get activated one after another,like a sequencer. For every phase there may be different triggers; whenthe module is in a particular phase, any message types listed astriggers for that phase will cause the module to get a wakeup if theyappear on the Whiteboard. <br>            <br>The phases are listed in the psySpec (<a href="#spec:phaseexample" class="navLink">example</a>).<br>            <br>When a module has two or more contexts (each with one or more phases),and the context gets switched, the first phase in that context isactivated.</font> </p>            <div align="left">            <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">            </font><span class="navLink"><a href="#usingcontexts">using contexts</a> <a href="#usingpsyspec">using psySpec</a> <a href="psycloneManual.html#wakeup">wakeup</a> <a href="psycloneManual.html#psy:triggers">triggers</a> </span></p>            </div>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="455"><a name="creatingexternaljavamodules" id="creatingexternaljavamodules"></a>Creating externalmodules in Java</td>            <td align="right" width="49">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="3750" valign="top">            <blockquote>              <p>To read about external modules in general, go <a href="psycloneManual.html#psy:externalmodules" class="navLink">here</a>.              </p>              <p>To write an external module in Java, you willneed the JavaAIRPlug or JavaOpenAIR. (JavaOpenAIR can be downloadedfrom <a href="http://www.mindmakers.org/openair/download" class="navLink">http://www.mindmakers.org/openair/download/</a>).              </p>            </blockquote>            <p> External modules are designed to run outsidePsyclone in separate executables. They are very similar to internalmodules and they can be written in other languages, such as Java. </p>                <p> Any module has two distinct functionalities: message handling                   and message processing. Like internal modules, external modules                   only have to worry about the message processing (called a <a href="psycloneManual.html#psy:crank"><span class="navLink">crank</span></a>),                   because all the message handling (receiving, organizing, posting,                   etc.) is done automatically. </p>            <p> To create an external module in Java one normallywould use an AIR Plug. This is a Java object which can be instantiatedinside any Java program and the plug is used for all communication withPsyclone. </p>            <p> This is an example of a simple Java program andhow to use the plug: </p>            <blockquote>              <p class="codeJava"> import com.cmlabs.air.*;<br>public class MyModule {<br>public static void main(String[] args) {<br>// while (poster.isConnected()) {<br>JavaAIRPlug plug = new JavaAIRPlug("MyModule", "localhost", 10000);<br>if (!plug.init()) {<br>&nbsp; System.out.println("Could not connect to Psyclone");<br>&nbsp; System.exit(0);<br>&nbsp; }<br>Message triggerMessage;<br>Message msg;<br>&nbsp;&nbsp;&nbsp;&nbsp; <br>while (true) {<br>&nbsp; if ((triggerMessage = plug.waitForNewMessage(3000)) == null){<br>&nbsp; &nbsp; // ... processing ... //<br>&nbsp; &nbsp; msg = new Message("", "", "My.First.Output");<br>&nbsp; &nbsp; plug.addOutputMessage(msg);<br>&nbsp; &nbsp; plug.sendOutputMessages();<br>&nbsp; &nbsp; }<br>&nbsp; else {<br>&nbsp; &nbsp; // ... do something else for a while ... //<br>&nbsp; &nbsp; }<br>&nbsp; }<br>}<br>}</p>            </blockquote>            <p> This program assumes that Psyclone is running onthe local computer on the standard Psyclone port 10000. </p>            <p> For Psyclone to use the module, you will need totell Psyclone about it. You do this in the central psySpecconfiguration file by defining a module entry like this: </p>            <blockquote>              <p class="codeXML"> &lt;module name="<span class="dataValue">MyFirstModule</span>"&gt;<br>&lt;executable/&gt;<br>&lt;description&gt;&lt;/description&gt;<br>&lt;context name="<span class="dataValue">Psyclone.System.Ready</span>"&gt;<br>&nbsp; &nbsp; &lt;phase name="<span class="dataValue">Default</span>"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;trigger from="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.First.Type</span>" /&gt;<br>&nbsp; &nbsp; &nbsp; &lt;post to="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.First.Output</span>" /&gt;<br>&nbsp; &nbsp; &lt;/phase&gt;<br>&lt;/context&gt;<br>&lt;/module&gt;</p>            </blockquote>            <p> You will need to start up your external modulemanually after you start up Psyclone. </p>            <p> Note that you need to use the <span class="keyConcept">&lt;executable /&gt;</span>tag to tell Psyclone that this is an external module. Otherwise,Psyclone will create it as an internal module. In a later tutorial youcan see how to fill in the &lt;executable&gt; tag to <a href="#automaticstartup" class="navLink">automaticallystart up your module</a>. </p>            <p> Now Psyclone knows that when any message withtype My.First.Type is posted to the Whiteboard AIRCentral, your modulewith the name MyFirstModule should be woken up with this message. </p>            <p> In most cases you probably want to do a bit morein your module. The Plug object is a communication device, which youcan use to get the triggering message and any other messages which mayhave been delivered if you asked for it in the psySpec using the&lt;retrieve&gt; tag (see below). If you post messages usingthe Plug the messages are automatically sent to the correctdestinations. </p>                <p> When this empty message is posted, the :from                   and the :to fields are automatically filled in                   and a copy is sent to every destination Whiteboard defined in                   the psySpec, each with the correct type filled in. For example,                   if the psySpec had defined two post destinations: </p>            <blockquote>              <p class="codeXML"> &lt;posts&gt;<br>&nbsp; &lt;post to="<span class="dataValue">AIRCentral</span>"type="<span class="dataValue">My.Second.Type</span>"/&gt;<br>&nbsp; &lt;post to="<span class="dataValue">AIRCentral</span>"type="<span class="dataValue">My.Third.Type</span>"/&gt;<br>&lt;/posts&gt;</p>            </blockquote>            <p> the AirCentral whiteboard would receive twomessages, one with type My.Second.Type and one with My.Third.Type. </p>            <p> If, however, the function had created a messagelike this: </p>            <blockquote>              <p class="codeJava"> msg = new Message("","", "My.Second.Type");</p>            </blockquote>            <p> only one message would be sent out, as only thefirst post matches the type. Likewise, had the message been createdwith </p>            <blockquote>              <p class="codeJava"> msg = new Message("","", "My.Other.Type");</p>            </blockquote>            <p> no message would be sent out. </p>            <p> If you wish to bypass the post section manually,you can always do: </p>            <blockquote>              <p class="codeJava"> msg = new Message("","MyOtherWB", "My.Other.Type");</p>            </blockquote>            <p> in which case only one message would be sent tothe MyOtherWB Whiteboard. </p>            <p> When you in the psySpec specify which messagetypes will trigger your module you may wish to retrieve additionalmessages from the same or other Whiteboards to be delivered along sidethe triggering message: </p>            <blockquote>              <p class="codeXML"> ...<br>&lt;triggers&gt;<br>&nbsp; &lt;trigger from="<span class="dataValue">AIRCentral</span>"type="<span class="dataValue">My.First.Type</span>"/&gt;<br>&lt;/triggers&gt;<br>&lt;retrieves&gt;<br>&nbsp; &lt;retrieve from="<span class="dataValue">BBX</span>"type="<span class="dataValue">Input.Sens.UniM.Hear</span>"/&gt;<br>&nbsp; &lt;retrieve from="<span class="dataValue">BBX</span>"type="<span class="dataValue">Input.Person.Found.True</span>"&gt;<br>&nbsp; &nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">10</span>&lt;/latest&gt;<br>&nbsp; &nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">200</span>&lt;/lastmsec&gt;<br>&nbsp; &lt;/retrieve&gt; <br>&lt;/retrieves&gt;<br>...</p>            </blockquote>            <p> In your code, you can read these additionalmessages, if any, by asking the Messenger object: </p>            <blockquote>              <p class="codeJava"> // Get the currentnumber of retrieved messages<br>int getRetrievedMessageCount();<br>// Get a specific retrieved message<br>Message getRetrievedMessage(int pos);<br>// Get the full collection of the retrieved messages<br>ObjectCollection getAllRetrievedMessages();</p>            </blockquote>            <p> Should you want to manually retrieve messagesfrom the crank without specifying this in the psySpec, you can ask theMessenger object: </p>            <blockquote>              <p class="codeJava"> // Retrieve additionalmessages from a source<br>ObjectCollection retrieveMessages(String retrieveFrom, StringretrieveSpecXML);</p>            </blockquote>            <p> where retrieveSpecXML uses the same format as youwould have used in the psySpec including the surrounding <span class="codeXML">&lt;retrieves&gt;&hellip;&lt;/retrieves&gt;</span>.            </p>            <p> You do not have to register cranks for externalmodules, but if you do it is a good way of telling your module what todo with a message. If we add a crank in the psySpec like this: </p>            <blockquote>              <p class="codeXML"> &lt;module name="<span class="dataValue">MyFirstModule</span>"&gt;<br>&nbsp; &lt;context name="<span class="dataValue">Psyclone.System.Ready</span>"&gt;<br>&nbsp; &nbsp; &lt;phase name="<span class="dataValue">Default</span>"&gt;<br>&nbsp; &nbsp; &nbsp; &lt;triggers&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;trigger from="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.First.Type</span>" /&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/triggers&gt;<br>&nbsp; &nbsp; &nbsp; &lt;crank name="<span class="dataValue">MyFirstModuleCrank</span>" /&gt;<br>&nbsp; &nbsp; &nbsp; &lt;posts&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;post to="<span class="dataValue">WB1</span>" type="<span class="dataValue">My.First.Output</span>" /&gt;<br>&nbsp; &nbsp; &nbsp; &nbsp; &lt;post to="<span class="dataValue">WB2</span>" type="<span class="dataValue">My.Second.Output</span>" /&gt;<br>&nbsp; &nbsp; &nbsp; &lt;/posts&gt;<br>&nbsp; &nbsp; &lt;/phase&gt;<br>&nbsp; &lt;/context&gt;<br>&lt;/module&gt;</p>            </blockquote>            <p> we can now slightly extend our code to ask forthe name of the crank after being woken up by the trigger message: </p>            <blockquote>              <p class="codeJava"> import com.cmlabs.air.*;<br>public class MyModule {<br>public static void main(String[] args) {<br>// while (poster.isConnected()) {<br>JavaAIRPlug plug = new JavaAIRPlug("MyModule", "localhost", 10000);<br>if (!plug.init()) {<br>&nbsp; System.out.println("Could not connect to Psyclone");<br>&nbsp; System.exit(0);<br>&nbsp; }<br>Message triggerMessage;<br>Message msg;<br>&nbsp;&nbsp;&nbsp;&nbsp; <br>while (true) {<br>&nbsp; if ((triggerMessage = plug.waitForNewMessage(3000)) == null){<br>&nbsp; &nbsp; if(plug.getCrankName().equals("MyFirstModuleCrank")) {<br>&nbsp; &nbsp; &nbsp; // ... processing ... //<br>&nbsp; &nbsp; &nbsp; msg = new Message("", "","My.First.Output");<br>&nbsp; &nbsp; &nbsp; plug.addOutputMessage(msg);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; else if(plug.getCrankName().equals("MySecondModuleCrank")) {<br>&nbsp; &nbsp; &nbsp; // ... processing ... //<br>&nbsp; &nbsp; &nbsp; msg = new Message("", "","My.Second.Output");<br>&nbsp; &nbsp; &nbsp; plug.addOutputMessage(msg);<br>&nbsp; &nbsp; &nbsp; }<br>&nbsp; &nbsp; plug.sendOutputMessages();<br>&nbsp; }<br>&nbsp; else {<br>&nbsp; &nbsp; // ... do something else for a while ... //<br>&nbsp; &nbsp; }<br>&nbsp; }<br>}<br>}</p>            </blockquote>            <p> Note that the module will now post its output toWhiteboard WB1 if the crank is MyFirstModuleCrank, and to WhiteboardWB2 if the crank is equal to MySecondModuleCrank. </p>            <p>After receiving a wakeup message a module can ask:            </p>            <blockquote>              <p class="codeJava"> getTriggerAlias()</p>            </blockquote>            <p> which will return the alias of the triggermessage, or the message type if &lt;trigger&gt; does not havean alias. By default, the name parameter will be the type if notspecified. </p>            <p>When posting you can use: </p>            <blockquote>              <p class="codeJava">postOutputMessage(Message*msg)</p>            </blockquote>            <p> and </p>            <blockquote>              <p class="codeJava">postOutputMessage(Message*msg, JString destination) </p>            </blockquote>                <p>The former is shorthand for first adding to <span class="keyConcept">output</span>                   and then sending <span class="keyConcept">output</span>. The                   second allows you to post to a named alias &lt;post alias="xyz"&gt;                   &#8212; so if you use <span class="codeJava">postOutputMessage(Message*                   msg, "xyz")</span> the post entry with the xyz alias will be                   chosen. Alternatively, you can specify the type in a &lt;post&gt;                   the same way: </p>            <blockquote>              <p class="codeJava">postOutputMessage(Message* msg, "my.type")</p>            </blockquote>            <p>If you merely wish to post a message to allwhiteboards: </p>            <blockquote>              <p class="codeJava"> msg = new Message("","", "")<br>addoutputmessage(msg)<br>sendoutputmessages()</p>            </blockquote>            <p> You can call one method which will do all this: </p>            <blockquote>              <p class="codeJava">postOutputMessage(newMessage())</p>            </blockquote>            <p>You can set the priority of a message by doing</p>            <blockquote>              <p class="codeJava">msg.setPriority(3.3)</p>            </blockquote>                <p>where 3.3 is a floating-point number.</p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" valign="CENTER">            <td class="tutorialSubsectionHeading" bgcolor="#f7f7f7" height="30" width="387"><a name="creatingexternalcppmodules" id="creatingexternalcppmodules"></a>Creating externalmodules in C++</td>            <td align="right" bgcolor="#f7f7f7" width="91">&nbsp;</td>            <td align="right" bgcolor="#f7f7f7" width="112"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" bgcolor="#f7f7f7" width="80">&nbsp;</td>          </tr>          <tr>            <td colspan="4" height="3024" valign="top">            <p>To read about external modules in general, go <a href="psycloneManual.html#psy:externalmodules" class="navLink">here</a>.            </p>            <p>To write an external module in C++, you will needthe CppAIRPlug. (If CppAIRPlug was not included with this distributionyou can download the plug by going to <a href="http://www.cmlabs.com/psyclone/download/" class="navLink">http://www.cmlabs.com/psyclone/download/</a>,and selecting the platform that you are developing your external moduleon). </p>            <p> External modules are designed to run outsidePsyclone in separate executables. They are very similar to internalmodules and they can be written in other languages, such as Java. </p>            <p> Any module has two distinct functionalities,namely message handling and message processing. Like internal modules,external modules only have to worry about the message processing (orcrank, as we call it), because all the message handling (receiving,organizing, posting, etc.) is done automatically. </p>            <p> To create an external module in C++ one normallywould use an AIRPlug. This is a C++ object which can be instantiatedinside any C++ program and the plug is used for all communication withPsyclone. </p>            <p> This is an example of a simple C++ program andhow to use the plug: </p>            <blockquote>              <p class="codeCPP"> int main(int argc, char*argv[]) {<br>&nbsp;&nbsp;&nbsp;CppAIRPlug plug = newCppAIRPlug("MyFirstModule", "localhost", 10000);<br>&nbsp;&nbsp;&nbsp;if (!plug-&gt;init()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Couldnot connect to Psyclone\n\n");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return -1;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;Message* triggerMessage;<br>&nbsp;&nbsp;&nbsp;Message* msg;<br>&nbsp;&nbsp;&nbsp;while (true) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if((triggerMessage = plug-&gt;waitForNewMessage(3000)) == NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ...processing ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg = newMessage("", "", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// ... dosomething else for a while ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;}<br>return 0;<br>}</p>            </blockquote>            <p> This program assumes that Psyclone is running onthe local computer on the standard Psyclone port 10000. </p>            <p> For Psyclone to use the module, you will need totell Psyclone about it. You do this in the central psySpecconfiguration file by defining a module entry like this: </p>            <blockquote>              <p class="codeXML"> &lt;module name="<span class="dataValue">MyFirstModule</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;executable/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;context name="<span class="dataValue">Psyclone.System.Ready</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phasename="<span class="dataValue">Default</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggerfrom="<span class="dataValue">AIRCentral</span>"type="<span class="dataValue">My.First.Type</span>"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;postto="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.First.Output</span>" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>&lt;/module&gt;</p>            </blockquote>            <p> You will need to start up your external modulemanually after you start up Psyclone. </p>            <p> Note that you need to use the <span class="codeXML">&lt;executable /&gt;</span>tag to tell Psyclone that this is an external module. Otherwise,Psyclone will create it as an internal module. In a later tutorial youcan see how to fill in the <span class="codeXML">&lt;executable&gt;</span>tag to automatically start up your module. </p>            <p> Now Psyclone knows that when any message withtype My.First.Type is posted to the Whiteboard <a href="psycloneManual.html#psy:aircentral" class="navLink">AIRCentral</a>,your module with the name MyFirstModule should be woken up with thismessage. </p>            <p> In most cases you probably want to do a bit morein your module. The Plug object is a communication device, which youcan use to get the triggering message and any other messages which mayhave been delivered if you asked for it in the psySpec using the <span class="codeXML">&lt;retrieve&gt;</span> tag(see below). If you post messages using the Plug the messages areautomatically sent to the correct destinations. </p>                <p> When this empty message is posted, the :from                   and the :to fields are automatically filled in                   and a copy is sent to every destination Whiteboard defined in                   the psySpec, each with the correct type filled in. For example,                   if the psySpec had defined two post destinations </p>            <blockquote>              <p class="codeXML"> &lt;posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.Second.Type</span>" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.Third.Type</span>" /&gt;<br>&lt;/posts&gt;</p>            </blockquote>            <p> the AirCentral whiteboard would receive twomessages, one with type My.Second.Type and one with My.Third.Type. </p>            <p> If, however, the function had created a messagelike this </p>            <blockquote>              <p class="codeCPP"> msg = new Message("","", "My.Second.Type");</p>            </blockquote>            <p> only one message would be sent out, as only thefirst post matches the type. Likewise, had the message been created with</p>            <blockquote>              <p class="codeCPP"> msg = new Message("","", "My.Other.Type");</p>            </blockquote>            <p> no message would be sent out.</p>            <p> If you wish to bypass the post section manually,you can always do </p>            <blockquote>              <p class="codeCPP"> msg = new Message("","MyOtherWB", "My.Other.Type");</p>            </blockquote>            <p> in which case only one message would be sent tothe MyOtherWB Whiteboard. </p>            <p> When you specify in the psySpec which messagetypes will trigger your module you may wish to retrieve additionalmessages from the same or other Whiteboards to be delivered along sidethe triggering message: </p>            <blockquote>              <p class="codeXML"> ...<br>&lt;triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from="<span class="dataValue">AIRCentral</span>" type="<span class="dataValue">My.First.Type</span>" /&gt;<br>&lt;/triggers&gt;<br>&lt;retrieves&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;retrieve from="<span class="dataValue">BBX</span>" type="<span class="dataValue">Input.Sens.UniM.Hear</span>"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;retrieve from="<span class="dataValue">BBX</span>" type="<span class="dataValue">Input.Person.Found.True</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">10</span>&lt;/latest&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">200</span>&lt;/lastmsec&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/retrieve&gt; <br>&lt;/retrieves&gt;<br>...</p>            </blockquote>            <p> In your code, you can read these additionalmessages, if any, by asking the Messenger object: </p>            <blockquote>              <p class="codeCPP"> // Get the currentnumber of retrieved messages<br>int getRetrievedMessageCount();<br>// Get a specific retrieved message<br>Message* getRetrievedMessage(int pos);<br>// Get the full collection of the retrieved messages<br>ObjectCollection* getAllRetrievedMessages();</p>            </blockquote>            <p> Should you want to manually retrieve messagesfrom the crank without specifying this in the psySpec, you can ask theMessenger object: </p>            <blockquote>              <p class="codeCPP"> // Retrieve additionalmessages from a source<br>ObjectCollection* retrieveMessages(const JString&amp; retrieveFrom,const JString&amp; retrieveSpecXML);</p>            </blockquote>                <p> where retrieveSpecXML uses the same format as you would have                   used in the psySpec including the surrounding <span class="codeXML">&lt;retrieves&gt;&hellip;                   &lt;/retrieves&gt;</span>. </p>            <blockquote>              <p> You do not have to register cranks for externalmodules, but if you do it is a good way of telling your module what todo with a message. If we add a crank in the psySpec like this:</p>              <p class="codeXML"> &lt;module name="<span class="dataValue">MyFirstModule</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;context name="<span class="dataValue">Psyclone.System.Ready</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phasename="<span class="dataValue">Default</span>"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggerfrom="<span class="dataValue">AIRCentral</span>"type="<span class="dataValue">My.First.Type</span>"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crankname="<span class="dataValue">MyFirstModuleCrank</span>"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;postto="<span class="dataValue">WB1</span>" type="<span class="dataValue">My.First.Output</span>" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;postto="<span class="dataValue">WB2</span>" type="<span class="dataValue">My.Second.Output</span>" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>&lt;/module&gt;</p>            </blockquote>            <p> we can now slightly extend our code to ask forthe name of the crank after being woken up by the trigger message: </p>            <blockquote>              <p class="codeCPP"> while (true) {<br>&nbsp;&nbsp;&nbsp;&nbsp;if ((triggerMessage =plug-&gt;waitForNewMessage(3000)) == NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//... processing ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(plug-&gt;getCrankName().equals("MyFirstModuleCrank")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//... processing ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg= new Message("", "", "My.First.Output");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif (plug-&gt;getCrankName().equals("MySecondModuleCrank")) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//... processing ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg= new Message("", "", "My.Second.Output");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;else {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//... do something else for a while ... //<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>} </p>            </blockquote>            <p> Note that the module will now post its output toWhiteboard <span class="keyConcept">WB1</span> ifthe crank is <span class="keyConcept">MyFirstModuleCrank</span>,and to whiteboard <span class="keyConcept">WB2</span>if the crank is equal to <span class="keyConcept">MySecondModuleCrank</span>.            </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" height="1%" width="668">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="361"><a name="creatinginternalcppmodules" id="creatinginternalcppmodules"></a>Creating internalc++ modules</td>            <td align="right" width="117">&nbsp;</td>            <td align="right" width="111"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="79">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="2400" valign="top">            <p>Internal modules are designed to run insidePsyclone for maximum performance and efficiency. They are similar toexternal modules, but simpler to design, implement and maintain. <span class="mediumSizeNonConspicuous">(However, they do have <a href="#dlllimitations" class="navLink">limitations</a>related to dynamically loaded libraries.) </span> </p>            <p>Internal C++ modules are developed using the <a href="psycloneManual.html#psy:psyclonesdk"><span class="navLink">Psyclone SDK</span></a>, whichis provided with <a href="psycloneManual.html#psy:psyclonepro" class="navLink">PsyclonePro</a> distributions. </p>                <p>Any module has two distinct functionalities, namely message reception/handling                   and subsequent processing &#8212; also called a <a href="psycloneManual.html#psy:crank" class="navLink">crank</a>.                   Internal modules only have to worry about the crank, because                   all the message handling (receiving, organizing, posting, etc.)                   is done automatically. &nbsp; </p>            <p> To create an internal module one has to define acrank which will process incoming messages and generate outputmessages. &nbsp; </p>            <p> This is an example of the crank function for aninternal module, which just prints Hello World to the screen: </p>            <blockquote>              <p><span class="codeCPP">intMyFirstModuleCrank(Messenger* messenger) {<br>&nbsp;&nbsp; printf("Hello World");<br>&nbsp;&nbsp; return 0;<br>}</span></p>            </blockquote>            <p>All you need to do is put this into the cranksfile in the Psyclone SDK (<span class="keyConcept">cranks.cpp</span>and <span class="keyConcept">cranks.h</span> in thedefault library called <span class="keyConcept">cm</span>),recompile and now you have an internal module. <b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="spec:crankexample" id="spec:crankexample"></a></font></font></font></b>            </p>            <p> To run the module, you will need to tell Psycloneabout it. You do this in the central psySpec configuration file bydefining a module entry like this: </p>            <p> <span class="codeXML">&nbsp;&nbsp;&lt;module name="</span><span class="dataValue">MyFirstModule</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;context name="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase name="</span><span class="dataValue">Default</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from="</span><span class="dataValue">WB1</span><span class="codeXML">"type="</span><span class="dataValue">My.First.Type</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crank name="</span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="</span><span class="dataValue">WB1</span><span class="codeXML">" type="</span><span class="dataValue">My.Second.Type</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>&nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p> Now Psyclone knows that when any message with type <span class="keyConcept">My.First.Type</span>                   is posted to the Whiteboard WB1, your module with the name <span class="keyConcept">MyFirstModule</span>                   should be woken up with this message. This will in turn automatically                   call the <span class="keyConcept">MyFirstModuleCrank</span>                   function in the library cm you created above and hence print                   &quot;Hello World&quot; to the console. </p>            <p> In most cases you probably want to do a bit morein your module. The Messenger object which is passed to the function isa communication device, which you can use to get the triggering messageand any other messages which may have been delivered if you asked forit in the psySpec using the &lt;retrieve&gt; tag (see below).If you post messages using the Messenger the messages are automaticallysent to the correct destinations. </p>            <p> Here is an example of a slightly more advancedversion of the crank function above: </p>            <p><span class="codeCPP">&nbsp;&nbsp;&nbsp;int MyFirstModuleCrank (Messenger*messenger) {<br>&nbsp;<br>&nbsp;&nbsp; if (messenger == NULL)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>&nbsp;<br>&nbsp;&nbsp; Message* triggerMessage;<br>&nbsp;&nbsp; Message* msg;<br>&nbsp;&nbsp; while (messenger-&gt;shouldContinueRunning()) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if(messenger-&gt;waitForNewMessage(50)) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ( (triggerMessage = messenger-&gt;getTriggerMessage()) != NULL) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;&nbsp; Do something with the trigger message...<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg = new Message("", "", "");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messenger-&gt;addOutputMessage(msg);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messenger-&gt;sendOutputMessages();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp; return 0;<br>&nbsp;&nbsp;&nbsp;}</span> </p>            <p> Now the module sends out one message each time itis woken up. You may notice that instead of returning, the modulechooses to stay inside the function until the Messenger says that itshould not continue running any longer. </p>                <p> When this empty message is posted, the :<span class="keyConcept">from</span> and                   the :<span class="keyConcept">to</span> fields                   are automatically filled in and a copy is sent to every destination                   Whiteboard defined in the psySpec, each with the correct type                   filled in. For example, if the psySpec had defined two post                   destinations </p>            <p> <span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="</span><span class="dataValue">WB1</span><span class="codeXML">" type="</span><span class="dataValue">My.Second.Type</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="</span><span class="dataValue">WB1</span><span class="codeXML">" type="</span><span class="dataValue">My.Third.Type</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt; </span> </p>            <p>the WB1 Whiteboard would receive two messages, onewith type My.Second.Type and one with My.Third.Type. </p>            <p> If, however, the function had created a messagelike this </p>            <p> <span class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg= new Message("", "", "My.Second.Type");</span> </p>            <p> only one message would be sent out, as only thefirst post matches the type. Likewise, had the message been createdwith </p>            <p> <span class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg= new Message("", "", "My.Other.Type");</span> </p>            <p> no message would be sent out. </p>            <p> If you wish to bypass the post section manually,you can always do </p>            <p>&nbsp;<span class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg= new Message("", "MyOtherWB", "My.Other.Type");</span> </p>            <p> in which case only one message would be sent tothe MyOtherWB Whiteboard.&nbsp; </p>            <p> When you in the psySpec specify which messagetypes will trigger your module you may wish to retrieve additionalmessages from the same or other Whiteboards to be delivered along sidethe triggering message: </p>            <blockquote>              <p>&nbsp;<span class="codeXML">&nbsp;...<br>&nbsp;&nbsp; &lt;triggers&gt;<br>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;triggerfrom="</span><span class="dataValue">WB1</span><span class="codeXML">" type="</span><span class="dataValue">My.First.Type</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp; &lt;/triggers&gt;<br>&nbsp;&nbsp; &lt;retrieves&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;retrievefrom="</span><span class="dataValue">BBX</span><span class="codeXML">" type="</span><span class="dataValue">Input.Sens.UniM.Hear</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;retrievefrom="</span><span class="dataValue">BBX</span><span class="codeXML">" type="</span><span class="dataValue">Input.Person.Found.True</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;</span><span class="dataValue">10</span><span class="codeXML">&lt;/latest&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;</span><span class="dataValue">200</span><span class="codeXML">&lt;/lastmsec&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/retrieve&gt; <br>&nbsp;&nbsp; &lt;/retrieves&gt;<br>&nbsp;&nbsp; &lt;crank name="</span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp; ...</span></p>            </blockquote>            <p> In your crank code, you can read these additionalmessages, if any, by asking the Messenger object: </p>            <p> &nbsp;<span class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;// Get the current number of retrieved messages<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; intgetRetrievedMessageCount();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get aspecific retrieved message<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Message*getRetrievedMessage(int pos);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Get thefull collection of the retrieved messages<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectCollection* getAllRetrievedMessages();</span> </p>            <p> Should you want to manually retrieve messagesfrom the crank without specifying this in the psySpec, you can ask theMessenger object: </p>            <p> &nbsp;<span class="codeCPP">&nbsp;// Retrieve additional messages from a source<br>&nbsp;&nbsp; ObjectCollection* retrieveMessages(constJString&amp; retrieveFrom, <br>&nbsp;&nbsp;&nbsp; const JString&amp; retrieveSpecXML);</span>            </p>            <p> where retrieveSpecXML uses the same format as youwould have used in the psySpec.&nbsp; </p>            <p class="mediumSizeNonConspicuous"><a name="dlllimitations"></a>Note: The nature ofdynamically loaded libraries where they are loaded and unloadedperiodically means that static and global variables loose theirmeaning. When creating internal crank functions do not use global orstatic variables in your code. Furthermore, on some UNIX systems suchas Linux you will get errors when trying to load a library with staticor global variables, usually complaining about an undefined symbol: <span class="codeCPP">__dso_handle</span>. If you see this,go through your code and remove all global and static variables.</p>            </td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" height="123" width="668">          <tbody>            <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td class="tutorialSubsectionHeading" height="30" width="364"><a name="creatingcorelibraryobjects" id="creatingcorelibraryobjects"></a>Creating                 Your Own CoreLibrary Objects</td>              <td align="right" width="81">&nbsp;</td>              <td align="right" width="120"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="87">&nbsp;</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="93" valign="top">                 <p>All <span class="navLink"><a href="psycloneManual.html#psy:corelibrary">CoreLibrary</a></span>                   objects share a vast set of basic functionalities, and if you                   wish to create your own objects it would be to your advantage                   to create them as part of the <span class=SpellE>CoreLibrary</span>                   using the Third Party Extension mechanism. The most important                   benefit from this is that all <span class=SpellE>CoreLibrary</span>                   objects are automatically converted from and to XML when sent                   across the network. An example could be:                 <p class=MsoNormal><o:p><span class="mediumSizeNonConspicuous"><font size="1"><b>RELATED:</b></font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="http://corelibrary.sourceforge.net/docexamples.html#_Third_Party">                   tutorial on SourceForge</a> </span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><span class="navLink"><a href="http://corelibrary.sourceforge.net/">CoreLibrary                   on SourceForge</a></span></font></font></b></font></font></font></font></b></font></o:p></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td height="30" width="461"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="spec:thebasics" id="spec:thebasics"></a><a name="spec:whiteboards" id="spec:whiteboards"></a><a name="writingapsyspec" id="writingapsyspec"></a><a name="spec:runningpsyspec" id="spec:runningpsyspec"></a><a name="usingpsyspec" id="usingpsyspec"></a>Writinga psySpec</font></font></font></b></td>            <td align="right" width="117"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>              <td class="navLink" align="right" width="92"><a href="psycloneManual.html#psy:psyspec">manual_:</a>:</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="1721" valign="top"> <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">A                   simple <span class="navLink"><b><a href="psycloneManual.html#psy:psyspec">psySpec</a></b></span>                   contains initialization values for Psyclone at startup; an advanced                   psySpec contains the <span class="keyConcept">complete specification                   for a whole system architecture</span>, and enables its automatic                   management. It can be used to specify one or more Whiteboards,                   the external and internal modules, <font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333">as                   well as global parameters </font></font>of the system.</font></font><font color="#333333" size="-1">                   </font><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">The                   </font></font></font></font> <span class="navLink"> <a href="#runningdominospsyspec">dominosPsySpec.xml</a></span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1"><font color="#333333"><a href="#runningdominospsyspec">                   is a tutorial example psySpec</a> for demonstrating the use                   of <a href="psycloneManual.html#psy:contexts">contexts</a> in                   Psyclone.</font></font></font></font></p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333" size="-1">The                   psySpec is read in by doing:</font></font></p>                <p>&nbsp;&nbsp; psyclone port=[port] spec="[psySpecName]" </p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">&nbsp;Example:</font></font>                   <font color="#333333"><br>                  </font> <span class="commandlineText">&nbsp; &gt;./psyclone                   port=20001 spec="dominosPsySpec.xml" </span> </p>                <p><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-1">If                   no psySpec is given, Psyclone will look for a file called psySpec.xml.                   If none is found, it will automatically create two Whiteboards                   by default, named <strong>WB1</strong> and <strong>WB2</strong>.</font></font></font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">The                   <span class="navLink"><b><a href="psycloneManual.html#psy:psyspec">psySpec</a></b></span>                   contains the intialization values for Psyclone at startup. It                   can be used to specify one or more Whiteboards, as well as the                   modules of the system.</font></font></font> </p>                <p>Here is a simple example of a psySpec, specifying some global                   variables, a Whiteboard called <strong>WB1</strong> and one                   module called <strong>Startup</strong>: </p>                <p> <span class="codeXML">&nbsp;&nbsp;&nbsp;&lt;psySpec name="</span><span class="dataValue">psySpec                   Example</span><span class="codeXML">" <a href="#spec:version">version</a>="</span><span class="dataValue">1.2</span><span class="codeXML">"&gt;                   &nbsp; </span> </p>                <blockquote>                   <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                     name="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;</span>                     <span class="codeXML"><br>                    &nbsp;&nbsp; &nbsp;&nbsp;&lt;description&gt;</span><span class="dataValue">This                     is a basic Whiteboard</span><span class="codeXML">&lt;/description&gt;<br>                    &nbsp;&nbsp;&lt;/whiteboard&gt; </span> </p>                  <p class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:module">module</a>                     name="<span class="dataValue">Startup</span>" type=&quot;<span class="dataValue">internal</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;<span class="dataValue">Bootstrap                     by posting a root context upon system ready</span>&lt;/description&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:context">context</a>                     name="<span class="dataValue">System</span>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:phase">phase</a>                     name="<span class="dataValue">Look for System Created</span>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers                     from="<a href="#spec:any" class="dataValue">any</a>"&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:trigger">trigger</a>                     type="<span class="dataValue">System.Ready</span>" <a href="#spec:after">after="</a><span class="dataValue"><a href="#spec:after=%22100%22">100</a></span><a href="#spec:after=%22100%22">"</a>                     /&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;posts&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;<a href="#spec:post">post</a>                     to="<span class="dataValue">WB1</span>" type="<a href="#spec:Psyclone.Context:SoB.Alive" class="dataValue">Psyclone.Context:SoB.Alive</a>"                     /&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/posts&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                     &nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>                    &nbsp;&nbsp; &lt;/module&gt; </p>                </blockquote>                <p class="codeXML"> &nbsp;&nbsp;&nbsp;&lt;/psySpec&gt; </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">(The                   tags context and phase may be omitted.) This psySpec creates                   one Whiteboard called <strong>WB1</strong>, and one internal                   module called <strong>Startup</strong>. When the Psyclone Factory                   posts some initial System messages to all Whiteboards, Startup                   goes into context. </font><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><a name="spec:Psyclone.Context:SoB.Alive" id="spec:Psyclone.Context:SoB.Alive"></a></font></font></font></font></font></font></b></font><font size="-1">Then,                   when the Factory posts message System.Ready, Startup gets triggered                   and posts the message of type <strong>Psyclone.Context:SoB.Alive</strong>.                   This posting is a signal to the context system in Psyclone to                   make the context <strong>SoB.Alive</strong> active.</font></font></font>                   (If you are wondering where the crank is for this module: When                   you don't specify a crank Psyclone will use its default crank                   that simply posts upon triggering.) </p>                <p>To specify a module that runs external to Psyclone:</p>                <blockquote>                   <p class="codeXML"> &lt;module ... type=&quot;<span class="dataValue">external</span>&quot;&gt;</p>                </blockquote>                <p> (If <span class="codeXML">type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;</span>                   is omitted and an <span class="codeXML">&lt;executable&gt;</span>                   is defined, it is assumed to be an external module.)</p>                <p> The <span class="codeXML">&lt;command&gt;</span> tag inside                   <span class="codeXML"> &lt;executable&gt;</span> can hold a                   command to be executed automatically by Psyclone:</p>                <blockquote>                   <p class="codeXML">&lt;executable name=&quot;<span class="dataValue">myexe</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command&gt;<em>command-line command                     to be executed</em>&lt;/command&gt;<br>                    &lt;/executable&gt;</p>                </blockquote>                <p> For example:</p>                <blockquote>                   <p class="codeXML"> &lt;executable name=&quot;<span class="dataValue">myexe</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command osmem=&quot;<span class="dataValue">256</span>&quot;&gt;<span class="dataValue">./big_java</span>&lt;/command&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;command osmem=&quot;<span class="dataValue">64</span>&quot;&gt;<span class="dataValue">./small_java</span>&lt;/command&gt;<br>                    &lt;/executable&gt;</p>                </blockquote>                <p>Further details on the use of the psySpec are listed in various                   sections; see the following sections.</p>                <hr size="1" noshade> <p class="tutorialSubsectionHeading">List                   of psySpec tags</p>                <p><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><a name="spec:global" id="spec:global"></a></font></font></font></font></font></font></b></font><span class="keyConcept"><font face="Verdana, Arial, Helvetica, sans-serif">&lt;version&gt;</font></span><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif">                   Psyclone tracks the versions of psySpec syntax and provides                   startup information on backward and forward compatibility of                   a psySpec.</font></font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <span class="keyConcept">&lt;global&gt;</span>                   This is a general section that contains global parameters for                   psyclone.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <span class="keyConcept">&lt;psyprobe&gt;</span>                   PsyProbe is the web-based interface to Psyclone. It defaults                   to port 10000, so technically this example is redundant. Here                   you can change it.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:whiteboard" id="spec:whiteboard"></a><span class="keyConcept">&lt;whiteboard&gt;                   </span>Here we have specified a <a href="psycloneManual.html#psy:whiteboard">whiteboard</a>                   with a simple description. Whiteboards must have unique names.</font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><a name="spec:module" id="spec:module"></a><span class="keyConcept">&lt;module&gt;</span>                   We have specified one module called Startup. Modules must have                   unique names. </font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"><a name="spec:context" id="spec:context"></a><span class="keyConcept">&lt;context&gt;</span>                   This module will be "in context", as it's called &#8212; i.e.                   listening for its triggers &#8212; during one context, namely,                   the System context. Since contexts are posted automatically                   to all Whiteboards (the message type Psyclone.Context is global),                   there is no need to specify which Whiteboard the context lives                   on. </font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:phase" id="spec:phase"></a><span class="keyConcept">&lt;phase&gt;</span>                   This module only has one <a href="psycloneManual.html#psy:phase">phase</a>,                   named Look for system created. Having one phase means that the                   module only will always have the same triggers during the System                   <a href="psycloneManual.html#psy:context">context</a>.</font>                 </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:trigger" id="spec:trigger"></a><span class="keyConcept">&lt;trigger&gt;</span>                   Here we have given the module one <a href="psycloneManual.html#psy:trigger">trigger</a>,                   namely, System.Ready. When the message type <span class="keyConcept">System.Ready</span>                   gets posted, the module will be <a href="psycloneManual.html#psy:wakeup"><span class="navLink">woken                   up</span></a> with an <span class="keyConcept">AIR.Instruct.Wakeup</span>                   message. This message will contain the message which caused                   the triggering, as well as the phaseSpec (the XML within the                   &lt;phase&gt; tags) for the module. <a name="spec:later" id="spec:later"></a>Here,                   the parameter after states that the wakeup message should be                   sent 100 milliseconds after the trigger message <span class="keyConcept">System.Ready</span>                   gets posted.</font> </p>                <p><font face="Verdana, Arial, Helvetica, sans-serif"> <a name="spec:post" id="spec:post"></a><span class="keyConcept">&lt;post&gt;</span>                   This module is designed to post a context. To do this it uses                   the message type <span class="keyConcept">Psyclone.Context</span>.                   The module, when woken up, will automatically post a context                   message with the value SoB.Alive &#8212; the actual context                   that gets posted. Any module that has listed SoB.Alive as their                   context will then be in context, ready to be woken up by any                   of its trigger messages, should they get posted.</font> <font size="1"><b>                   </b></font></p>                <p><span class="mediumSizeNonConspicuous"><font size="1"><b>RELATED:</b></font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="#usingcontexts">contexts </a><a href="#runningdominospsyspec">running                   the dominoPsySpec</a> <a href="#spec:phases">phases</a> <a href="#spec:wakeup">wakeup</a>                   </span></font></font></font> </b></font></p></td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" height="967" width="668">          <tbody>            <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td class="tutorialSubsectionHeading" height="30" width="364"><a name="creatingandusingwhiteboards" id="creatingandusingwhiteboards"></a>Creating                 and Using Whiteboards</td>              <td align="right" width="81">&nbsp;</td>              <td align="right" width="120"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="87">&nbsp;</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="937" valign="top"> <p>To specify a whiteboard                   in the psySpec, this is the basic syntax:</p>                <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                   name="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;</span>                   <span class="codeXML"><br>                  &nbsp;&nbsp; &nbsp;&nbsp;&lt;description&gt;</span><span class="dataValue">This                   is a basic Whiteboard</span><span class="codeXML">&lt;/description&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </span> </p>                <p>This creates a whiteboard called WB1. (All whiteboards (and                   modules) in Psyclone must have unique names.) To limit the number                   of messages stored, use the max= parameter:</p>                <p><span class="codeXML">&nbsp;&nbsp;&lt;<a href="#spec:whiteboard">whiteboard</a>                   name="</span><span class="dataValue">WB1</span><span class="codeXML">"                   maxcount=&quot;</span><span class="dataValue">10000</span><span class="codeXML">&quot;&gt;</span>                 </p>                <p>This will limit the number of messages to 10000; when message                   10001 is recieved the oldest message will be permanently destroyed                   by the whiteboard.</p>                <p><a name="mediastreams"></a>Media streams can bespecified for                   whiteboards in the <a href="psycloneManual.html#psy:psyspec" class="navLink">psySpec</a>                   like this:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"                   maxcount="<span class="dataValue">15000</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;<span class="dataValue">My                   Whiteboard</span>&lt;/description&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;streams&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Raw</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc1</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc2</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/streams&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p> The <span class="keyConcept">MyWB</span> whiteboard will now                   contain four circular media streams, each which has a max buffer                   size of 10 megabytes. After this limit is reached the oldest                   data samples are deleted. (Notice that the names of the streams                   have no semantic meaning to the system.)</p>                <p>Whiteboards can be created and destroyed dynamically by sending                   a message to 'Psyclone' with type </p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Create.Whiteboard                 </p>                <p>Include the spec for the whiteboard in the content of the message.                   To destroy a whiteboard use:</p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Destroy.Whiteboard                 </p>                <p>with the name of the whiteboard to be destroyed in the content                   of the message. </p>                <p>Streams can be added to a whiteboard by sending the message</p>                <p class="keyConcept">&nbsp;&nbsp;&nbsp;Psyclone.System.Create.Stream</p>                <p>to 'Psyclone' with the whiteboard spec:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p>where MyWB is a whiteboard already in existence. The maxsize=                   parameter sets the size of the circular stream buffer to 10                   megabytes. </p>                <p> Streams can also be created outside whiteboards by simply                   putting the following in the content:</p>                <p class="codeXML">&nbsp;&nbsp;&nbsp;&lt;stream name=&quot;<span class="dataValue">Input.Stream.Video.Raw</span>&quot;                   maxsize=&quot;<span class="dataValue">10</span>&quot; /&gt;                 </p>                <p>The following will create a standalone stream in a satellite                   called <span class="keyConcept">Sat1</span>: </p>                <p class="codeXML"> &nbsp;&nbsp;&nbsp;&lt;stream name=&quot;<span class="dataValue">Input.Stream.Video.Raw</span>&quot;                   maxsize=&quot;<span class="dataValue">10</span>&quot; satellite=&quot;<span class="dataValue">Sat1</span>&quot;                   /&gt;&nbsp;                 <p class="codeXML">&nbsp;                <p class="tutorialSectionHeading"><a name="whiteboards:throughput" id="whiteboards:throughput"></a>                   Using Timing With High-Volume Posting                <p>When Modules post messages faster than the receiving Whiteboards                   can process them, the posting may be slowed down by the Whiteboard                   itself. The simplest way for a Module to detect that a Whiteboard                   is getting too busy is to put a simple timer around the posting                   itself, to measure if the posting at some point starts taking                   longer than usual.                 <p> In C++ you can do this very easily using the JTime object:                 <blockquote>                   <p class="codeJava"> JTime start;<br>                    // post message to Whiteboard<br>                    int dif = start.getMicroAge(); // returns microsecond time</p>                </blockquote>                <p> In Java you can do this with millisecond accuracy using                 <blockquote>                  <p class="codeJava"> long start = System.currentTimeMillis();<br>                    // post message to Whiteboard<br>                    int dif = start - System.currentTimeMillis(); // returns microsecond                     time</p>                </blockquote>                <p> You can then notice if the posting starts taking much longer                   than usual and take the appropriate action.                 <p class="codeXML">&nbsp;                <p class=MsoNormal><o:p><span class="mediumSizeNonConspicuous"><font size="1"><b>RELATED:</b></font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="http://corelibrary.sourceforge.net/docexamples.html#_Third_Party">                   tutorial on SourceForge</a> </span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><span class="navLink"><a href="http://corelibrary.sourceforge.net/">CoreLibrary                   on SourceForge</a></span></font></font></b></font></font></font></font></b></font></o:p></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="461"><a name="usingretrieves" id="usingretrieves"></a><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1">Using                 Retrieves to Retrieve Past Information</font></font></font></b></td>              <td align="right" width="117"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td class="navLink" align="right" width="92"><a href="psycloneManual.html#psy:retrieve">manual_::</a></td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="1832" valign="top">                 <p> <retrieve from="BBX" type="Input.Sens.UniM.Hear"/>                  <retrieve from="BBX" type="Input.Person.Found.True"> <latest>In                   addition to being triggered by information that a module is                   subscribed for, a module can also ask to be given old information.                   Your module can retrieve dynamically (at runtime). The runtime                   method requires the module itself to decide when to do the retrieval.                   Alternatively, your module definition in the psySpec can include                   a retrieve spec (see below).</latest></retrieve></p>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>The                   XML for the retreiving looks like this:</latest></retrieve></p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML">&nbsp;&nbsp;&lt;trigger                     from=&quot;<span class="dataValue">WB1</span>&quot; type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human.Found.True</span>&quot;/&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.UniM.Hear.Human.Voice</span>&quot;/&gt;                    <br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">3</span>&lt;/latest&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">8000</span>&lt;/lastmsec&gt;<br>                    &nbsp;&nbsp;&lt;/retrieve&gt; </latest></retrieve></p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML"></latest></retrieve>The                   first retrieve asks to be sent a message of type <span class="keyConcept">Input.Sens.UniM.Hear.Human.Voice</span>                   along with the message type <span class="keyConcept">Input.Sens.MultiM.Vision.Human.Found.True</span>                   to which it has subscribed; the second retrieve asks to be sent                   a message of type <span class="keyConcept">Input.Sens.MultiM.Vision.Human</span>                   along with that, but with the conditions that if there are more                   than 3 such messages in the <span class="keyConcept">last 8                   seconds</span> it will only return the <span class="keyConcept">3                   most recent </span>of those. All conditions that are listed                   like that are <span class="keyConcept">AND</span>ed together.</p>                <p>You can also group them using a retrieves tag:</p>                <blockquote>                   <p>&lt;retrieves&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WB3</span>&quot;                     type=&quot;<span class="dataValue">xxx</span>&quot;/&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WB2</span>&quot;                     type=&quot;<span class="dataValue">yyy</span>&quot;/&gt;<br>                    &lt;/retrieves&gt; </p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>You                   can retrieve based on several features:</latest></retrieve></p>                <ul>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest>                     <span class="basicBullets">message ID</span></latest></retrieve>                     <ul>                      <li class="codeXML"><span class="basicBullets">Example:                         </span>&lt;retrieve id=&quot;<span class="dataValue">[GUID]</span>&quot;/&gt;                         <span class="basicBullets">where GUID is the unique id                         of a message</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">message                     sender</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex: </span><span class="codeXML">&lt;retrieve                         sender=&quot;</span><span class="dataValue">HumanTracker1</span><span class="codeXML">&quot;/&gt;</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">message                     type</span></latest></retrieve>                     <ul>                      <li class="basicBullets">Ex: <span class="codeXML">&lt;retrieve                         from=&quot;</span><span class="dataValue">WBX</span><span class="codeXML">&quot;                         type=&quot;</span><span class="dataValue">Output.Plan</span><span class="codeXML">&quot;/&gt;</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">content</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex: </span><span class="codeXML">&lt;retrieve                         content=&quot;</span><span class="dataValue">*green tomato*</span><span class="codeXML">&quot;/&gt;</span>                         <span class="basicBullets">will return any message where                         the phrase &quot;green tomato&quot; appears anywhere in                         the content of the message. The stars mean that anything                         can come before and after the two words. </span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">contentmatch</span></latest></retrieve>                     <ul>                      <li><span class="basicBullets">Ex:</span> <span class="codeXML">&lt;retrieve                         contentmatch=&quot;</span><span class="dataValue">xml</span><span class="codeXML">&quot;                         content=&quot;</span><span class="dataValue">*green tomato*</span><span class="codeXML">&quot;/&gt;                         </span><span class="basicBullets">will work like the last                         example, but in addition the </span><span class="codeXML">contentmatch=&quot;</span><span class="dataValue">xml</span><span class="codeXML">&quot;</span><span class="basicBullets">                         will force matching to also be done on the XML itself,                         i.e. tag names, parameter names, etc. </span><span class="mediumSizeNonConspicuous">Notice:                         You cannot use the reserved XML symbols like &lt; &gt;                         / &amp; &quot; etc.</span></li>                    </ul>                  </li>                  <li><retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="basicBullets">Time:                     aftertime, untiltime</span></latest></retrieve><span class="basicBullets">,                     <retrieve from="BBX" type="Input.Person.Found.True"><latest>                     latest, lastms</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True"><latest>ec</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></span></li>                </ul>                <p><span class="basicBullets"><retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></span><retrieve from="BBX" type="Input.Person.Found.True"><latest>The                   last constraints, aftertime, untiltime, latest and lastmsec,                   are done with tags, as the example above has shown for latest                   and lastmsec. The others are used precisely in the same way.</latest></retrieve><br>                  <retrieve from="BBX" type="Input.Person.Found.True"><latest><span class="keyConcept">aftertime</span>                   means anything that has happened after the particular timestamp                   used;<br>                  <span class="keyConcept">untiltime</span> will mean anything                   that happened before that timestamp. </latest></retrieve></p>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>The                   <span class="codeXML"> &lt;retrieve&gt;</span> spec also allows                   these three additional constraints which specify retrieval relative                   to the posting of <a href="#usingcontexts"><span class="navLink">contexts</span></a>:</latest></retrieve></p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML">                     &lt;retrieve&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;before&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/before&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;during&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/during&gt;<br>                    &nbsp;&nbsp;&nbsp;&lt;after&gt;<span class="dataValue">SoB.Alive.SoS.Awake</span>&lt;/after&gt;<br>                    &lt;retrieve&gt;</latest></retrieve></p>                </blockquote>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>                   <span class="keyConcept">before</span> means any time before                   this context last became active.<br>                  <span class="keyConcept">during</span> means any time between                   this context last became active and subsequently <br>                  became inactive.<br>                  <span class="keyConcept">after</span> means any time after this                   context last became inactive.</latest></retrieve></p>                <hr> <retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve>                 <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="tutorialSectionHeading">Specifying                   Retrieves in the psySpec</latest></retrieve></p>                <p><retrieve from="BBX" type="Input.Person.Found.True"><latest>When                   using retrieves in the psySpec the above example would look                   like this: </latest></retrieve></p>                <blockquote>                   <p><retrieve from="BBX" type="Input.Person.Found.True"><latest class="codeXML">&lt;module                     name=&quot;<span class="dataValue">HumanTracker1</span>&quot;&gt;<br>                    &nbsp;&nbsp;&lt;trigger from=&quot;<span class="dataValue">WB1</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human.Found.True</span>&quot;/&gt;<br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.UniM.Hear.Human.Voice</span>&quot;/&gt;                    <br>                    &nbsp;&nbsp;&lt;retrieve from=&quot;<span class="dataValue">WBX</span>&quot;                     type=&quot;<span class="dataValue">Input.Sens.MultiM.Vision.Human</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;latest&gt;<span class="dataValue">3</span>&lt;/latest&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&lt;lastmsec&gt;<span class="dataValue">8000</span>&lt;/lastmsec&gt;<br>                    &nbsp;&nbsp;&lt;/retrieve&gt; <br>                    &nbsp;&nbsp;. . .<br>                    &lt;/module&gt; </latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve></p>                </blockquote>                <hr> <retrieve from="BBX" type="Input.Person.Found.True"><latest></latest></retrieve>                 <p><retrieve from="BBX" type="Input.Person.Found.True" class="tutorialSectionHeading"><latest>Using                   Retrieves in Code</latest></retrieve><retrieve from="BBX" type="Input.Person.Found.True" class="tutorialSectionHeading"><latest></latest></retrieve></p>                <p>A module can at any time decide to retrieve old information.                   To do this from inside the module you can use any one of these:</p>                <blockquote>                   <p class="codeCPP">ObjectCollection retrieveMessages(String                     xml)<br>                    ObjectCollection retrieveMessages(RetrieveSpec spec)<br>                    ObjectCollection retrieveMessages(ObjectCollection specs)</p>                </blockquote>                <p>where the <span class="keyConcept">xml</span> variable contains                   some retrieve XML specification as shown above. </p>                <p>The two latter methods are alternatives to raw XML. The <span class="keyConcept">spec</span>                   variable is XML code contained in a RetrieveSpec object; the                   <span class="keyConcept">specs</span> variable is a collection                   of RetrieveSpec objects contained in an ObjectCollection object.                 </p>                <p>If your module definition in the psySpec includes a retrieve                   spec, any messages retrieved according to that spec will be                   included in every wakeup message each time your module gets                   triggered. </p>                <p>When your module receives the wakeup message, to get at the                   retrieved messages in your code, use:</p>                <blockquote>                   <p class="codeCPP">// Get the current number of retrieved messages<br>                    int getRetrievedMessageCount();<br>                    // Get a specific retrieved message<br>                    Message getRetrievedMessage(int pos);<br>                    // Get the full collection of the retrieved messages<br>                    ObjectCollection getAllRetrievedMessages();<retrieve from="BBX" type="Input.Person.Found.True"><latest>                     </latest></retrieve></p>                  <p class="codeCPP"><retrieve from="BBX" type="Input.Person.Found.True"><latest>                     </latest></retrieve><font size="1"><b> </b></font></p>                </blockquote>                <p><span class="mediumSizeNonConspicuous"><font size="1">RELATED:</font></span><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif" size="2"><font color="#333333">                   <span class="navLink"><a href="#spec:thebasics">psySpec</a>                   </span></font></font></font> </b></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="325"><a name="runningmodulesonmultiplecomputers" id="runningmodulesonmultiplecomputers"></a>Runningmodules on multiple computers</td>            <td align="right" width="153">&nbsp;</td>            <td align="right" width="113"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="79">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="1046" valign="top"> <p>You can distribute                   your Psyclone-centered system on as many computers as you wish.                   Each module will use an AIRPlug to connect to Psyclone &#8212;                   the connections and their maintenance is seamless, even <a href="#firewalls" class="navLink">through                   firewalls</a>. In such systems it is often necessary to connect                   some modules to many modules, in a graph-like structure (that                   may change at runtime). To do so, use Psyclone's <a href="#pub-sub%5C" class="navLink">publish-subscribe</a>                   mechanisms. </p>                <p>You can manage a distributed system manually. To manually start                   an external module that runs on another computer than Psyclone                   you just have to provide the AIRPlug with the network name or                   address and the port on which the main Psyclone program is running.                   For example, to start up your Java module on Computer2 when                   Psyclone is running on Computer1 on port 10000 you would do                 </p>                <p> <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   java MyJavaModule psyclone=Computer1:10000 name=MyModule</span>                 </p>                <p> If you, however, want to either </p>                <ul>                  <li class="basicBullets">&bull;automatically start your external                     module on another computer</li>                  <li class="basicBullets">start your internal module on another                     computer (automatically), or </li>                  <li class="basicBullets">run a whiteboard on another computer</li>                </ul>                <p> you can use a <span class="keyConcept">Psyclone Satellite</span>.                   A Satellite is what we call modules and whiteboards that were                   started remotely, i.e. on a different computer from where Psyclone                   is running. </p>                <p>To use a Satellite you run Psyclone as a <a href="psycloneManual.thml#psy:psydaemon" class="navLink">Satellite Server</a>                   on the other computer or computers. Put                     Psyclone on the remote computer and run it with the                   command </p>                <p> <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   ./psyclone -satelliteserver</span> </p>                <p> on the command line of that machine. If no port number is given it <span class="keyConcept">defaults to 10000</span>. The <a href="psycloneManual.thml#psy:psydaemon" class="navLink">Satellite Server</a>                   will then start and continue to run on this computer forever,                   until you kill it manually or the machine is shut down.  The Server will use minimal CPU cycles if                   it is not running any Satellites.                </p>                <p>As long as you have defined the modules and whiteboards in                   the psySpec (see below), you can start and stop Psyclone as                   many times as you like  the Satellite Server will make sure                   that a Satellite runs the whiteboards and modules specified                   to start up remotely. You can also use the same Satellite Server for                   more than one Satellite at the same time. </p>                <p> To use a Satellite you will need to define it in the psySpec                   <span class="keyConcept">global</span> section: </p>                <blockquote>                   <p> <span class="codeXML">&lt;global&gt;<br>                    &nbsp;&nbsp; &lt;satellites&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;satellite name="</span><span class="dataValue">MySatellite</span><span class="codeXML">"                     host="</span><span class="dataValue">SatelliteOne</span><span class="codeXML">"                     port="</span><span class="dataValue">10000</span><span class="codeXML">"                     /&gt;<br>                    &nbsp;&nbsp; &lt;/satellites&gt;</span> <br>                    <span class="codeXML">&lt;/global&gt;</span> </p>                </blockquote>                <p> Now you can tell any whiteboard, internal and automatically                   started external modules, that it should in fact start up in                   the remote Satellite called SatelliteOne instead of starting locally.                   You do this using the remote parameter for the whiteboard or                   module in question: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;whiteboard name="</span><span class="dataValue">MyWB</span><span class="codeXML">"                   remote="</span><span class="dataValue">MySatellite</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>                  &nbsp;&nbsp; &lt;/whiteboard&gt; </span> &nbsp; </p>                <p> and&nbsp;&nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyModule</span><span class="codeXML">"                   remote="</span><span class="dataValue">MySatellite</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ...<br>                  &nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p> The new whiteboard MyWB will be created and run inside a new satellite created by the Satellite Server. A new module called MyModule will also be created - if it is internal it will run inside the satellite, if it is external it will be autostarted by the Satellite Server.                   So MyWB and MyModule will now be running on the remote computer SatelliteOne, and will continue to do so until this Psyclone                   shuts down, at which time the satellite                  will be terminated by the Satellite Server, including everyting in it. The Server will also shut down MyModule if it is external. The Satellite Server will then                   continue to run, waiting for the next Psyclone which needs its                   services. </p>                <p> Internal modules and whiteboards which run in the same satellite                   do communicate as quickly with each other as internal modules                   and whiteboards that run inside the main Psyclone. So remember                   when you design your system that modules which make heavy use                   of the same data should all use the same whiteboard or whiteboards,                   which again should be located either in the same satellite or                    the main Psyclone. </p>                <p> As previously mentioned, more than one Psyclone can use the                   same Satellite Server at the same time. The Server will keep track                   of which whiteboards and which modules belong to which Psyclone                   without conflicts by creating a separate satellite per Psyclone. &nbsp; </p>                <p>If you want to use <a href="#usingpsyprobe" class="navLink">psyProbe</a>                   to see WBs running in the Satellite you must put a copy of                   the full HTML tree (from the Psyclone distribution) next to                   the Satellite Server  in the directory where you run the Server                   command (just like for Psyclone). </p>                <p>&nbsp; </p>                </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="runningmodulesonmultipleoperatingsystems" id="runningmodulesonmultipleoperatingsystems"></a>Runningmodules on multiple operating systems</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="78" valign="top">            <p>You can distribute your system to run on multiplecomputers and multiple operating systems by by moving one or more ofyour modules over to an operating system supported by the suppliedAIRPlugs: C++ is supported on Linux, Windows and Mac OS X; Java issupported on all Java-compatible platforms. To manage a distributedsystem refer to <a href="#automaticallystartingmodules" class="navLink">Automatically Starting up Modules</a>and <a href="#runningmodulesonmultiplecomputers" class="navLink">Running modules on multiple computers</a>.            </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" valign="CENTER">            <td class="tutorialSubsectionHeading" bgcolor="#f7f7f7" height="30" width="432"><a name="creatingmodulesusingstreamingmedia" id="creatingmodulesusingstreamingmedia"></a>Creatingmodules that use streaming media</td>            <td align="right" bgcolor="#f7f7f7" width="72">&nbsp;</td>            <td align="right" bgcolor="#f7f7f7" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" bgcolor="#f7f7f7" width="83">&nbsp;</td>          </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="1156" valign="top"> <p>A module can subscribe                   to a named media stream in a <a href="psycloneManual.html#psy:whiteboards"><span class="navLink">whiteboard</span></a>.                   Media streams are specified for whiteboards in the <a href="psycloneManual.html#psy:psyspec" class="navLink">psySpec</a>                   like this:</p>                <p class="codeXML">&nbsp;&nbsp;&lt;whiteboard name="<span class="dataValue">MyWB</span>"                   maxcount="<span class="dataValue">15000</span>"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;description&gt;<span class="dataValue">My                   Whiteboard</span>&lt;/description&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;streams&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Raw</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc1</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc2</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;stream                   name="<span class="dataValue">Input.Stream.Video.Proc3</span>"                   maxsize="<span class="dataValue">10</span>" /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/streams&gt;<br>                  &nbsp;&nbsp;&lt;/whiteboard&gt; </p>                <p> The <span class="keyConcept">MyWB</span> whiteboard will now                   contain four circular media streams, each which has a max buffer                   size of 10 megabytes. After this limit is reached the oldest                   data samples are deleted. (Notice that the names of the streams                   have no semantic meaning to the system.) </p>                <p> From a module you can access one or more media streams by                   asking for them inside a phase: </p>                <p> &nbsp;<span class="codeXML">&nbsp; &lt;module name="</span><span class="dataValue">MyFirstModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">internal</span><span class="codeXML">&quot;</span><span class="codeXML">                   &gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from="</span><span class="dataValue">AIRCentral</span><span class="codeXML">"                   type="</span><span class="dataValue">My.First.Type</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;inputstream alias="</span><span class="dataValue">MyInput</span><span class="codeXML">"                   source="</span><span class="dataValue">Input.Stream.Video.Raw</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;outputstream alias="</span><span class="dataValue">MyOutput</span><span class="codeXML">"                   source="</span><span class="dataValue">Input.Stream.Video.Proc2</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crank name="</span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;post to="</span><span class="dataValue">AIRCentral</span><span class="codeXML">"                   type="</span><span class="dataValue">My.Second.Type</span><span class="codeXML">"                   /&gt;<br>                  &nbsp;&nbsp; &lt;/module&gt; </span> </p>                <p> This module has access to two streams and will use the aliases                   <span class="keyConcept">MyInput</span> and <span class="keyConcept">MyOutput</span>                   to work with them (the alias is the name used internally in                   the code for the particular source stream &#8212; its                   purpose is to decouple the media type from the internal references                   to that stream, to make it possible to change the type name                   used without recompiling the code). This is done since the psySpec                   may later be used to change the flow of data without having                   to recompile the code. (<span class="mediumSizeNonConspicuous">The                   example message types used here are for demonstration purposes                   only; please refer to the section on message types to learn                   about the proper use of dot-delimited message types.</span>)                 </p>                <p> In an <span class="keyConcept">internal module</span> you                   access the media stream using a <a href="psycloneManual.html#psy:mediaconnection"><span class="navLink">MediaConnection</span></a>                   via the messenger: </p>                <p class="codeCPP"> &nbsp;&nbsp; MediaConnection* myInput = messenger-&gt;getStreamConnection("MyInput");<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection* myOutput = messenger-&gt;getStreamConnection("MyOutput");<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1; </p>                <p class="">A module can access as many input and output streams                   as needed.</p>                <p class="">&nbsp;</p>                <p class="tutorialSectionHeading">External Modules</p>                <p>The code for external C++ and Java modules is almost identical,                   except that you will have to wait for the plug to have the stream                   become available (streams are automatically read from the module's                   own registration (either in the psySpec or manually registration                   in the code), so it can take a little while before the streams                   are ready for use):</p>                <p>C++:</p>                <p class="codeCPP"> &nbsp;&nbsp; MediaConnection* myInput = plug-&gt;waitForStreamConnection("MyInput",                   5000);<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection* myOutput = plug-&gt;waitForStreamConnection("MyOutput",                   5000);<br>                  &nbsp;&nbsp; if (stream == NULL)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1; &nbsp; </p>                <p>In an <a href="psycloneManual.html#psy:externalmodules"><span class="navLink">external</span></a>                   Java module you access the media stream using a MediaConnection                   via the plug.</p>                <p>Java:</p>                <p class="codeJava"> &nbsp;&nbsp; MediaConnection myInput = plug.waitForStreamConnection("MyInput",                   5000);<br>                  &nbsp;&nbsp; if (stream == null)<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return -1;<br>                  &nbsp;&nbsp; MediaConnection myOutput = plug.waitForStreamConnection("MyOutput",                   5000 );<br>                  &nbsp;&nbsp; if (stream == null)<br>                  &nbsp;&nbsp; &nbsp;&nbsp; return -1; </p>                <p class="codeJava">&nbsp;</p>                <p>Using the <span class="keyConcept">MediaConnection</span> object                   you can add new data samples to a stream, wait for new data                   to be added by another module, and search and retrieve data                   samples by timestamp.</p>                <p>The following example shows how a module would wait for new                   data, and when the data arrives process it and post the resulting                   output (internal and external Java and C++ modules):</p>                <blockquote>                   <p class="codeCPP"> DataSample* inputSample = NULL; &nbsp;&nbsp;                     <br>                    DataSample* outputSample = NULL; &nbsp;&nbsp; <br>                    JTime lasttime; &nbsp;&nbsp; <br>                    if ((inputSample = myInput-&gt;waitForFirstSampleAfter(now,                     )) != NULL ) { <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; lasttime = inputSample-&gt;timestamp;                     &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // process the sample and create                     an output sample<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; outputSample = new DataSample();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (!myOutput-&gt;addDataSample(outputSample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // error<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                    }</p>                </blockquote>                <p class="mediumSizeNonConspicuous">(For Java one merely has to                   replace -&gt; with . and NULL with null, and remove the * chars)</p>                <p>A DataSample object is merely a placeholder for <span class=GramE>either                   a</span> chunk of raw binary data, a CoreLibrary Object or one                   of the special objects derived from DataSample such as Bitmap                   and BitmapUpdate.</p>                <p>For more information and documentation on how to use these                   objects, see the online <a href="http://corelibrary.sf.net/" class="navLink">CoreLibrary                   documentation on Source Forge</a> or jump directly to the <a href="http://corelibrary.sourceforge.net/doxygen/classObject.html" class="navLink">CoreLibrary                   base Object</a> to see which objects are available or to the                   <a href="http://corelibrary.sourceforge.net/doxygen/classDataSample.html" class="navLink">DataSample</a>                   object. Here you can also see how you work with <a href="http://corelibrary.sourceforge.net/doxygen/classMediaConnection.html" class="navLink">MediaConnections</a>.</p>                <p class="tutorialSubsectionHeading">&nbsp;</p>                <p class="tutorialSubsectionHeading">Continuous Mode</p>                <p>The above will work fine if you are receiving 1-5 samples per                   second, but beyond that your code may become slow, because each                   time you wait for a new sample you send a small message to the                   server. So, for high volume data you should switch to Continuous                   Receiving. This is somewhat different for C++ and Java, but                   identical for internal and external C++ modules.</p>                <p>&nbsp;</p>                <p class="tutorialSubsectionHeading"><b style='mso-bidi-font-weight:normal'>C++ Modules</b></p>                <p>C++ is capable of using an advanced local memory buffer, which                   means that to use continuous mode one merely has to add one                   line:</p>                <blockquote>                   <p class="codeJava"> <span class="codeCPP">if (!myInput-&gt;startContinuousBackgroundReceive())                     return false;</span></p>                  <p class="codeCPP"> DataSample* inputSample = NULL;<br>                    DataSample* outputSample = NULL;<br>                    JTime lasttime;<br>                    if ( (inputSample = myInput-&gt;waitForFirstSampleAfter(now,                     5000)) != NULL ) {<br>                    &nbsp; lasttime = inputSample-&gt;timestamp;<br>                    &nbsp;&nbsp;// process the sample and create an output sample<br>                    &nbsp;&nbsp;outputSample = new DataSample();<br>                    &nbsp;&nbsp;if (!myOutput-&gt;addDataSample(outputSample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// error<br>                    &nbsp;&nbsp;}<br>                    }</p>                </blockquote>                <p>The code for continuous mode is identical in C++ for <span class="keyConcept">internal                   and external </span>modules.</p>                <p>In this example, after the stream is put into continuous mode,                   the <span class="keyConcept">wait</span> command only waits                   for the local buffer to receive new data. However, if you stop                   getting the new data, eventually the buffer will run full and                   the oldest data deleted.</p>                <p> And you can stop the continuous mode using</p>                <blockquote>                   <p class="codeCPP">stream-&gt;stopContinuousBackgroundReceive()</p>                  <p class="codeCPP">&nbsp;</p>                </blockquote>                <p class="tutorialSubsectionHeading">Java Modules</p>                <p>Java doesn't have the same capabilities for handling extreme                   data transfers, but a small local buffer is implemented to handle                   continuous streaming:</p>                <blockquote>                   <p class="codeJava"> if (!stream1.startContinuousBackgroundReceive())                     {<br>                    &nbsp;&nbsp;System.out.println( &quot;Error: Couldn't start                     stream1 continuous...&quot;);<br>                    &nbsp;&nbsp;return false;<br>                    }<br>                    System.out.println( &quot;Listening for new samples on the                     stream...&quot;);<br>                    DataSample sample;<br>                    while (shouldContinue) {<br>                    &nbsp;&nbsp;if ( (sample = stream1.receiveContinuousSample(100))                     != null) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;Time now = new Time();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;System.out.println(now.printTime()                     + &quot;: JavaStreamer: received sample<br>                    &nbsp;&nbsp;&nbsp;&nbsp;from stream1&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;if (!stream2.addDataSample(sample))                     {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println( &quot;Error:                     Couldn't output to stream2...&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;&nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(now.printTime()                     + &quot;: JavaStreamer: output <br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sample to stream2&quot;);<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    }<br>                  </p>                </blockquote>                <p> And you can stop the continuous mode using</p>                <blockquote>                  <p class="codeJava"> stream1.stopContinuousBackgroundReceive();<o:p></o:p></p>                </blockquote>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>It                   is very important that you process the data as fast as they                   come in and that you stop the continuous mode when you are done,                   as the local buffer will start erasing the oldest samples if                   it gets too full.</p>                <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'>For                   more information and documentation on how to use these objects,                   see the online <a href="http://corelibrary.sourceforge.org" class="navLink">CoreLibrary</a>                   documentation on Source Forge or jump directly to the <a href="#corelibbaseobject" class="navLink">CoreLibrary                   base Object</a> to see which objects are available or to the                   <a href="#datasampleobject" class="navLink">DataSample</a> object.                   Here you can also see how you work with <a href="#mediaconnections" class="navLink">MediaConnections</a>.</p></td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="automaticallystartingmodules" id="automaticallystartingmodules"></a><a name="automaticmodulestartup" id="automaticmodulestartup"></a><a name="startingmodulesautomatically" id="startingmodulesautomatically"></a><a name="automaticstartup"></a>Automatically startingmodules</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="1645" valign="top">            <p>Internal modules running on the same computer as Psyclone are automatically                   started when Psyclone starts. You can also start external C++                   and Java modules automatically on the same computer by using                   the <a href="psycloneManual.html#psy:psyspec"><span class="navLink">psySpec</span></a>                   to specify how to run them (to automatically start external                   and internal modules on remote computers you will need to install                   a Satellite Server see <a href="#runningmodulesonmultiplecomputers"><span class="navLink">Running                   modules on multiple computers</span></a>). To see how you automatically                   start up modules on other computers than the one on which Psyclone                   is running, see <a href="#creatingadistributedsystem"><span class="navLink">Creating                   a Distributed System</span></a>. </p>            <p>If you are simply running your Psyclone system onone operating system and do not plan to run on other operating systemsin the near future, you can specify how to run a module automaticallylike this: </p>                <p> &nbsp; <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyExternalModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="dataValue">                   java MyJavaModuleXYZ psyclone=%host%:%port% name=%name%</span><span class="codeXML"><br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;spec&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;context                   name="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;phase name="</span><span class="dataValue">1</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;triggers from="</span><span class="dataValue">WB1</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;trigger type="</span><span class="dataValue">test.type</span><span class="codeXML">"/&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/triggers&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;/phase&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/context&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/spec&gt;<br>                  &nbsp;&nbsp; &lt;/module&gt;</span> </p>                <p> (The <span class="codeXML">&lt;spec&gt;</span> tag is optional).                   Notice that the percentages and tags inside them should be copied                   verbatim. Whenever Psyclone starts, it will run the command                   line specified as: </p>                <p> &nbsp; <span class="keyConcept">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   java MyJavaModuleXYZ psyclone=%host%:%port% name=%name%</span>                 </p>                <p>and it will allow everything which this program prints to be                   seen on the Psyclone console. The %host% part will always be                   replaced by the current Psyclone computer's network address,                   the %port% by the port number Psyclone is running on, and the                   %name% by the name of your module. If you used an AIR Plug to                   create your external module these will be read by your module                   on startup. </p>                <p> You should test your command line before runningPsyclone by going to the directory where you will run Psyclone from andtyping your line exactly as you put it in the psySpec. If your modulestarts, everything should work. If not, you will need to figure out whynot and fix it, as Psyclone will not be able to run it either.&nbsp; </p>            <p>If you wish to start up Psyclone first and thenstart your module manually you can leave out the command lineinformation in the tag: </p>                <p>&nbsp; <span class="codeXML">&nbsp;&nbsp; &lt;module name="</span><span class="dataValue">MyExternalModule</span><span class="codeXML">"                   type=&quot;</span><span class="dataValue">external</span><span class="codeXML">&quot;</span><span class="codeXML">                   &gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;                   &lt;/executable&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ... </span> </p>            <p> If you plan on running Psyclone with the samepsySpec on different operating systems, you may need to take intoaccount the slight differences in how to run programs from the commandline. One example is when running Java programs with multiple classpaths. On Windows you separate these with semicolons and on Unix youuse colons. Hence, you would specify a command line for each operatingsystem like this: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Win32</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar;b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Linux</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt; </span> &nbsp; </p>            <p> You can even use different modules on differentcomputers by name: </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command hostname="</span><span class="dataValue">Loki</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule1 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command hostname="</span><span class="dataValue">Odin</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule2 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt; </span> &nbsp; </p>            <p> or mix and match: &nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp; &lt;executable name="</span><span class="dataValue">MyExternalProgram</span><span class="codeXML">"                   consoleoutput="</span><span class="dataValue">yes</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Win32</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar;b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">Linux</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"                   hostname="</span><span class="dataValue">Loki</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule1 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;command ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"                   hostname="</span><span class="dataValue">Odin</span><span class="codeXML">"&gt;</span><span class="dataValue">java                   -cp a.jar:b.jar MyModule2 ...</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp; &lt;/executable&gt;</span> </p>                <p> This can be very useful when a team is developing a Psyclone                   system. One person can then have a stable version of a module,                   called e.g. Module1, and an experimental version of the same                   module, called Module2, which is only ever run on a computer                   called Odin. </p>            <p>You can match the following system parameters (anduse wildcards like *): </p>            <p class="codeXML"> &nbsp;&nbsp;ostype="<span class="dataValue">Win32</span>/<span class="dataValue">Linux</span>/<span class="dataValue">OSX</span>"<br>&nbsp;&nbsp; osname="<span class="dataValue">Windows</span>            <span class="dataValue">XP</span>/<span class="dataValue">Linux</span>/<span class="dataValue">Darwin</span>"<br>&nbsp;&nbsp; arch="<span class="dataValue">i386</span>/<span class="dataValue">i486</span>/<span class="dataValue">i586</span>/<span class="dataValue">i686</span>/<span class="dataValue">athlon</span>/<span class="dataValue">powerpc</span>/<span class="dataValue">mips</span>/<span class="dataValue">alpha</span>"<br>&nbsp;&nbsp; hostname="<span class="dataValue">xxx</span>"&nbsp;&nbsp;<span class="mediumSizeNonConspicuous">&nbsp; (computersnetwork name)</span><br>&nbsp;&nbsp; osmem="<span class="dataValue">nnn</span>"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mediumSizeNonConspicuous"> (minimum amount of memoryin computer in MB)</span><br>&nbsp;&nbsp; cpuspeed="<span class="dataValue">nnn</span>"&nbsp;&nbsp;&nbsp;            <span class="mediumSizeNonConspicuous">(minimumCPU speed of computer in MHz)</span><br>&nbsp;&nbsp; cpucount="<span class="dataValue">n</span>"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="mediumSizeNonConspicuous"> (minimum number of CPUs incomputer) &nbsp;</span> </p>            <p>If either field is empty it is considered a match </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example: </span><span class="codeXML">&lt;command                   ostype="</span><span class="dataValue">OSX</span><span class="codeXML">"&gt;</span>                   allows system with the Mac OS X operating system </p>            <p> All string fields are matched with wildcards </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example: </span><span class="codeXML">&lt;command                   hostname="</span><span class="dataValue">*fun*</span><span class="codeXML">"&gt;</span>                   allows system with hostname="somefuncomputer.local."&gt; &nbsp;                 </p>            <p> All numerical values are matched with &gt;= </p>                <p> &nbsp; &nbsp;&nbsp; <span class="example">Example:</span>                   <span class="codeXML">&lt;command osmem="</span><span class="dataValue">256</span><span class="codeXML">"&gt;                   </span>allows systems with 512MB, but not 128MB </p>            <p> So you could, for example, say </p>                <p> &nbsp; <span class="codeXML">&nbsp;&nbsp;&nbsp; &nbsp;&lt;executable                   name="</span><span class="dataValue">myexe</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command osmem="</span><span class="dataValue">256</span><span class="codeXML">"&gt;</span><span class="dataValue">./big_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command osmem="</span><span class="dataValue">64</span><span class="codeXML">"&gt;</span><span class="dataValue">./small_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;</span> </p>            <p> or &nbsp; </p>                <p> <span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;executable                   name="</span><span class="dataValue">myexe</span><span class="codeXML">"&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command cpucount="</span><span class="dataValue">2</span><span class="codeXML">"&gt;</span><span class="dataValue">./heavy_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   &lt;command cpucount="</span><span class="dataValue">1</span><span class="codeXML">"&gt;</span><span class="dataValue">./light_java</span><span class="codeXML">&lt;/command&gt;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/executable&gt;<br>                  </span> &nbsp; &nbsp; </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="670">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="usingcontexts" id="usingcontexts"></a><a name="spec:contexts" id="spec:contexts"></a>Using                 contexts</font></font></font></b></td>              <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="88"></td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="994" valign="top"> <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Contexts                   are used to manage the complexity of a large number of modules                   that typically are not all relevant for the operation of a system                   at the same time. Psyclone modules are context-driven: Each                   module has a specific context in which it can run. If that context                   is not active, the module will not be woken up with any messages                   it has subscribed to. </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">You                   can get some hands-on experience with contexts by looking at                   the <a href="#dominosexample"> <span class="navLink">dominosPsySpec</span></a>                   example.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Contexts are hierarchically defined, forming a tree. For example,                   this is a context tree: </font></p>                <p class="keyConcept"><font face="Verdana, Arial, Helvetica, sans-serif" size="-1">&nbsp;&nbsp;SoB.[Alive,                   Dead]<br>                  &nbsp;&nbsp;SoB.Alive.[Awake, Asleep] </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   In this context tree, the root is called <strong>SoB</strong>                   (short for <strong>state of being</strong>). The root has two                   branches, <strong>Alive</strong> and <strong>Dead</strong>.                   The branch <strong>Alive</strong> has two leafs, <strong>Awake</strong>                   and <strong>Asleep</strong>. (Dead has no branches.) To see                   how this tree is used at run-time, let's look at a hypothetical                   system that uses this context tree. In this hypothetical system                   we would have modules specifically designed to post contexts,                   which ever one is relevant at any time. When the system starts                   up the context <strong>SoB</strong> is posted by some bootstrapping                   module. When this happens another module (called e.g. BeingAlive.100)                   posts <strong>SoB.Alive</strong> if the system is considered                   "alive", otherwise it posts <strong>SoB.Dead</strong> (the module                   would presumably run some tests to see if the system actually                   qualifies for the "alive" label). If <strong>SoB.Alive</strong>                   is posted, then another module (called e.g. BeingAwake.200)                   posts <strong>SoB.Alive.Awake</strong> if it considers the system                   to be "awake" (whatever that means in this hypothetical system).                   </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Now                   we can look at how modules use these contexts to specify when                   they should be active and when not. For example, we might have                   a module called LookAround.150, whose job it is to move the                   sensors of a hypothetical being in the direction of a sound                   when it receives one. This module should not be running if the                   being is dead or if the being is asleep. So when we choose a                   context for this module, we choose the context in which it should                   be active, which is in this case <strong>SoB.Alive.Awake</strong>.                   </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   In the <a href="#spec:psyspec">psySpec</a> this is indicated                   by the syntax: </font></p>                <p><font size="1"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#7e2117">&nbsp;&nbsp;<font size="2">&lt;context                   name="SoB.Alive.Awake"&gt;</font></font></font></b></font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Now,                   if at this point any module in the system posts the context                   SoB.Dead, the context <strong>SoB.Alive.Awake</strong> will                   not be active any more, since the branch <strong>Dead</strong>                   replaces the branch <strong>Alive</strong> in the context tree,                   and the active context will instead be <strong>SoB.Dead</strong>.                   At this point the module LookAround.150 will not be triggered                   by any message types it has subscribed to, because it needs                   the context <strong>SoB.Alive.Awake</strong> to be active.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Multiple roots are allowed. If you post for example the context                   <strong>SoB.Alive.Asleep</strong> and then post the context                   <strong>System.Ok</strong>, the two context trees have different                   roots, and will thus co-exist with no interference.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   Notice that context trees are designed by you, the user. The                   only restrictions on them is that they be dot-delimited to designate                   branches.</font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">Contexts                   are posted (i.e. announced to the system) by using a special                   message type called <strong>Psyclone.Context</strong>. In the                   posting section of a module in the <a href="psycloneManual.html#psy:psyspec">psySpec</a>                   (or, alternatively, in the XML as constructed by an external                   module), the type of the message should be <strong>Psyclone.Context:</strong>[<strong>context                   tree</strong>], where [context tree] is the dot-delimited context                   tree. </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1"><em>Example:</em><br>                  &nbsp;&nbsp;<em>Psyclone.Context:SoB.Alive.Awake</em> </font></p>                <p><font color="#333333" face="Verdana, Arial, Helvetica, sans-serif" size="-1">                   When a context is posted, the context gets "switched" only if                   a current branch in the tree gets replaced by a new branch.                   For example, if the current context is <strong>SoB.Alive.Asleep</strong>                   and SoB.Alive.Awake gets posted, the context will be switched.                   And if <strong>SoB.Alive.Asleep.REMsleep</strong> gets posted,                   this context will be switched on for any module which had listed                   this as their context. But if <strong>SoB.Alive</strong> gets                   posted while <strong>SoB.Alive.Asleep</strong> is active, nothing                   happens.</font></p>                <p>&nbsp;</p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span>                                  <span class="navLink"><a href="#contextsandphases">rocket example</a><a href="#dominosexample">                   running the domionsPsySpec.xml</a></span></p>                <hr size="1" noshade> <p>&nbsp;</p>                <p class=MsoNormal>Contexts are used to make a module behave differently                   in different situations. For example, a vision module would                   want to use a different algorithm if the scene is bright from                   if the scene is dark. Instead of managing this manually inside                   the code of the module, contexts allow a module to change from                   one type of operation to another by listening to an external                   signal. </p>                <p class=MsoNormal>The way contexts are typically used is that                   in each Context a module will have a separate set of inputs                   and outputs. By looking at currently active context and a module's                   spec, anyone, including the system desginer and other runtime                   modules, can become aware of what the module is doing.</p>                <p class=MsoNormal>In the module spec each context will have at                   least one Phase, even if not directly specified. A context can                   have more than one Phase, in which case the module will cycle                   through the phases inside this context, until the relevant system                   context is changed. When this happens, the module would either                   change to a new set of Phases inside the new context, or go                   out of context and become idle, if the module has no configuration                   for the new context.</p>                <p class=MsoNormal>The system as a whole will usually have a hierarchy                   of contexts and many of these may be active at the same time.                   However, a module will only have one active Phase in one of                   these contexts, and it should not register for more than one                   simultaneously active contexts.</p>                <p class=MsoNormal>In a module registration without context and                   without phases looks like this:</p>                <span class="codeXML"> &lt;module name=&quot;</span><span class="dataValue">MyFirstModule</span><span class="codeXML">&quot;&gt;<br>                 &lt;trigger from=&quot;</span><span class="dataValue">AIRCentral</span><span class="codeXML">&quot;                 type=&quot;</span><span class="dataValue">My.First.Type</span><span class="codeXML">&quot;                 /&gt;<br>                 <span>&lt;crank name=&quot;</span></span><span class="dataValue">cm::MyFirstModuleCrank</span><span class="codeXML"><span>&quot;&gt;<br>                </span> <span>&lt;post</span><span style='color:fuchsia'>                 </span><span>to=&quot;</span></span><span class="dataValue">AIRCentral</span><span class="codeXML"><span>&quot; </span><span style='color:red'>type</span><span>=&quot;</span></span><span class="dataValue">My.Second.Type</span><span class="codeXML"><span>&quot; /&gt;<br>                </span> <span>&lt;/module&gt;</span></span> <p class=MsoNormal>This                   module only has one phase which belongs to the default context,                   <span class="keyConcept"> Psyclone.System.Ready</span>. This                   context will never be switched off until the system is shutting                   down. If this module tries to switch phase, it will end up in                   the same state as before.</p>                <p class=MsoNormal>If you define more than one context for a module,                   the module will be in one and only one (or none) of these contexts                   at any given time.</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>context</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Scene.Bright&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send first message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;/</span><b><u><span style='color:#0066CC;background:#FFFFCC'>context</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>context</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Scene.Dark&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>id</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;<br>                  </span></span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;/</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>context</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/module</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal>If you specify more than one phase in each                   context, the module will behave as explained in the <a href="#usingphases" class="navLink">phase                   tutorial</a>.</p>                <p>Internal modules will automatically be using the correct crank                   in the correct phase in the currently <span class="keyConcept">active                   context</span>. If they go out of context they will stop running                   and wait to be in context again. </p>                <p>External modules will have to detect whether they are in context                   at all, and if so, which one. The main loop should be checking                   this, as shown here:</p>                <p class="tutorialSectionHeading"> C++</p>                <blockquote>                   <p class="codeCPP"> while (true) {<br>                    &nbsp;&nbsp;if (plug-&gt;inContext()) {<br>                    &nbsp;&nbsp;if ((triggerMessage = plug-&gt;waitForNewMessage(3000))                     == NULL) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read the crank name<br>                    &nbsp;&nbsp;&nbsp;&nbsp;crankName = plug-&gt;getCurrentCrankName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read context name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;context = plug-&gt;getCurrentContextName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read phase name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;phase = plug-&gt;getCurrentPhaseName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// ... process trigger ... //<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    &nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;wait(50);<br>                    &nbsp;&nbsp;}<br>                    }</p>                </blockquote>                <p class="tutorialSectionHeading"> Java</p>                <blockquote>                   <p class="codeJava"> while (true) {<br>                    &nbsp;&nbsp;if (plug.inContext()) {<br>                    &nbsp;&nbsp;if ((triggerMessage = plug.waitForNewMessage(3000))                     == NULL) {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read the crank name<br>                    &nbsp;&nbsp;&nbsp;&nbsp;crankName = plug.getCurrentCrankName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read context name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;context = plug.getCurrentContextName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// read phase name if you like<br>                    &nbsp;&nbsp;&nbsp;&nbsp;phase = plug.getCurrentPhaseName();<br>                    &nbsp;&nbsp;&nbsp;&nbsp;// ... process trigger ... //<br>                    &nbsp;&nbsp;&nbsp;&nbsp;}<br>                    &nbsp;&nbsp;}<br>                    &nbsp;&nbsp;else {<br>                    &nbsp;&nbsp;&nbsp;&nbsp;Utils.pause(50);<br>                    &nbsp;&nbsp;}<br>                    }<br>                  </p>                </blockquote>                <p>&nbsp;</p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">                   <span class="navLink"><a href="#spec:psyspec">psySpec</a> <a href="#spec:phases">phases</a>                   <a href="#spec:wakeup">wakeup</a><a href="#dominosexample">                   running the domionsPsySpec.xml</a></span></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <table width="670" height="101" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">          <tbody>            <tr bordercolor="#B9B9B9" background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td height="30" width="520"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#333333"><font size="-1"><a name="usingphases" id="usingphases"></a><a name="spec:phases" id="spec:phases"></a>Using                 phases</font></font></font></b></td>              <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="88"></td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="3" height="71" valign="top"> <p class=MsoNormal>A module                   may go through two or more different states in its normal operation.                   Instead of managing this manually inside the code of the module,                   one can use phases to allow a module to change from one type                   of operation to the next. Each phase will have its own set of                   triggers, retrieves, crank and posts. </p>                <p class=MsoNormal>A module registration without context and without                   phases looks like this:</p>                <blockquote>                  <p class="codeXML">&nbsp;&nbsp; &lt;module name=&quot;<span class="dataValue">MyFirstModule</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;trigger from=&quot;<span class="dataValue">AIRCentral</span>&quot;                     type=&quot;<span class="dataValue">My.First.Type</span>&quot;                     /&gt;<br>                    &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&lt;crank name=&quot;<span class="dataValue">cm::MyFirstModuleCrank</span>&quot;&gt;<br>                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;post to=&quot;<span class="dataValue">AIRCentral</span>&quot;                     type=&quot;<span class="dataValue">My.Second.Type</span>&quot;                     /&gt;<br>                    &nbsp;&nbsp; &lt;/module&gt;</p>                </blockquote>                <p class=MsoNormal>This module only has one (hidden) phase: If                   it tries to switch phase, it will end up in the same phase (state)                   as before.</p>                <p class=MsoNormal>If you specify more than one phase:</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>phase</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Send                   first message group&quot;</span><span style='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><span style='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>The module will automatically switch to the                   next phase whenever it posts a message with the <a href="psycloneManual.html#psy:phasechange"><span class="navLink">phasechange</span></a>                   parameter set to <span class="keyConcept">yes</span>.</p>                <p class=MsoNormal>In the above example you can see that the module                   will alternate between posting the message DEMO.Domino.Flip                   and DEMO.Domino.Flop.</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>Internal Modules</b></p>                <p class=MsoNormal>For internal modules you simply put a different                   crank into each phase and Psyclone will automatically switch                   to the new crank code when the module switches phase.</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>phase</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Send                   first message group&quot;</span><span style='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><span style='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank2&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>This means that for internal modules there                   is no code change when you want to use phases.</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>External Modules</b></p>                <p class=MsoNormal>External module will have to check themselves                   in the code to see which phase it is currently in. The easiest                   way is to use cranks just like internal modules</p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099'> </span><spanstyle='font-size:10.0pt;font-family:Arial;color:#003366'>name</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>=</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#000099;background:#F7F7F7'>&quot;Domino-60&quot;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;<br>                  </span><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>executable                   ...</span></u></b><span style='font-size:10.0pt;font-family:Arial;color:#000099'>                   </span><span style='font-size:10.0pt;font-family:Arial;color:#003366'>/</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span><spanstyle='font-size:10.0pt;font-family:Arial'><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send first message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flip&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><span style='color:#000099'> </span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>phase</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Send second message group&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>crank</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>name</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;MyCrank2&quot; /</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>triggers</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>from</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>trigger</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>after</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;1000&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>type</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.50&quot;</span><spanstyle='color:#003366'>/</span><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/triggers</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>posts</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>to</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;Whiteboard.2&quot;</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.60&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>phasechange</span><spanstyle='color:#990000'>=</span><span style='color:#000099;background:#F7F7F7'>&quot;yes&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>post</span></u></b><span style='color:#000099'> </span><spanstyle='color:#003366'>type</span><span style='color:#990000'>=</span><spanstyle='color:#000099;background:#F7F7F7'>&quot;DEMO.Domino.Flop&quot;</span><spanstyle='color:#000099'> </span><span style='color:#003366'>/</span><spanstyle='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/posts</span></u></b><span style='color:#990000'>&gt;</span><br>                  <span style='color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='color:#990000'>&lt;</span><b><u><span style='color:#0066CC;background:#FFFFCC'>/phase</span></u></b><span style='color:#990000'>&gt;</span></span></p>                <p class=MsoNormal><span style='font-size:10.0pt;font-family:Arial;color:#000099'>&nbsp;&nbsp;&nbsp;&nbsp;</span><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&lt;</span><b><u><spanstyle='font-size:10.0pt;font-family:Arial;color:#0066CC;background:#FFFFCC'>/module</span></u></b><spanstyle='font-size:10.0pt;font-family:Arial;color:#990000'>&gt;</span></p>                <p class=MsoNormal>When you receive a wakeup message you can simply                   read, in your main loop, what the current crank name is and                   you will know which phase your module is supposed to be in (all                   your cranks have unique names).</p>                <p class=MsoNormal>&nbsp;</p>                <p class=MsoNormal><b>C++</b></p>                <p class=MsoNormal>&nbsp;<span class="codeCPP">&nbsp; JString                   crankName;<br>                  &nbsp;&nbsp; while (true) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((triggerMessage = plug-&gt;waitForNewMessage(3000))                   == NULL) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; crankName =                   plug-&gt;getCurrentCrankName();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (crankName.equals(&#8220;MyCrank&#8221;))                   {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg                   = new Message(&quot;&quot;, &quot;&quot;, &quot;&quot;);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else if (crankName.equals(&#8220;MyCrank2&#8221;))                   {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;msg                   = new Message(&quot;&quot;, &quot;&quot;, &quot;&quot;);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;addOutputMessage(msg);<br>                  &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plug-&gt;sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp; }</span></p>                <p class="tutorialSectionHeading">Java</p>                <p class="codeJava">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; String crankName;<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; while (true) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if ((triggerMessage                   = plug.waitForNewMessage(3000)) == null) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;crankName                   = plug.getCurrentCrankName();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;if                   (crankName.equals(&#8220;MyCrank&#8221;)) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   msg = new Message(&quot;&quot;, &quot;&quot;, &quot;My.First.Output&quot;);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.addOutputMessage(msg);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   else if (crankName.equals(&#8220;MyCrank2&#8221;)) {<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//                   ... processing ... //<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   msg = new Message(&quot;&quot;, &quot;&quot;, &quot;My.First.Output&quot;);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.addOutputMessage(msg);<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   plug.sendOutputMessages();<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;                   }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>                  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>                <p> Remember, that external modules do not use the crank if it                   is specified in any other way than the above example.</p>                <p></p>                <p><span class="mediumSizeNonConspicuous">RELATED:</span><font face="Verdana, Arial, Helvetica, sans-serif" size="2">                   <span class="navLink"><a href="#spec:psyspec">psySpec</a> <a href="#spec:contexts">contexts                   </a> <a href="#spec:wakeup">wakeup</a><a href="#dominosexample">                   running the domionsPsySpec.xml</a></span></font></p></td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>        <p>&nbsp;</p>      <table align="center" bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="670">        <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="usingmoduleparameters" id="usingmoduleparameters"></a>Using module parameters</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="1147" valign="top">            <p>All modules can have an unlimited number ofparameters, which the module itself can control, but which othermodules can interact with as well. Parameters work the same for bothinternal as well as external modules in all languages. </p>            <p> Parameters are defined in the <a href="psycloneManual.html#psy:psyspec">psySpec</a>: </p>            <p><span class="codeXML">&nbsp;&nbsp;&lt;module name="</span><span class="dataValue">VideoServer1.Camera1</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;description&gt;&lt;/description&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parametername="</span><span class="dataValue">Interval</span><span class="codeXML">" type="</span><span class="dataValue">Integer</span><span class="codeXML">" value="</span><span class="dataValue">200</span><span class="codeXML">"step="</span><span class="dataValue">50</span><span class="codeXML">" default="</span><span class="dataValue">100</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parametername="</span><span class="dataValue">BitmapFiles</span><span class="codeXML">" type="</span><span class="dataValue">String</span><span class="codeXML">"value="</span><span class="dataValue">../../Video/Frame###.bmp</span><span class="codeXML">" /&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parametername="</span><span class="dataValue">Repeat</span><span class="codeXML">" type="</span><span class="dataValue">String</span><span class="codeXML">"value="</span><span class="dataValue">Yes</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;collection&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;entry&gt;</span><span class="dataValue">Yes</span><span class="codeXML">&lt;/entry&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;entry&gt;</span><span class="dataValue">No</span><span class="codeXML">&lt;/entry&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/collection&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/parameter&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parametername="</span><span class="dataValue">Resize</span><span class="codeXML">" type="</span><span class="dataValue">double</span><span class="codeXML">"value="</span><span class="dataValue">0.5</span><span class="codeXML">" min="</span><span class="dataValue">0.125</span><span class="codeXML">"max="</span><span class="dataValue">4.0</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;parametername="</span><span class="dataValue">Printlevel</span><span class="codeXML">" type="</span><span class="dataValue">Integer</span><span class="codeXML">" value="</span><span class="dataValue">0</span><span class="codeXML">"min="</span><span class="dataValue">0</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;contextname="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;phase name="</span><span class="dataValue">ReadBitmaps</span><span class="codeXML">"&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggers&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;triggerafter="</span><span class="dataValue">100</span><span class="codeXML">" type="</span><span class="dataValue">Psyclone.System.Ready</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;trigger from="</span><span class="dataValue">Vision</span><span class="codeXML">" after="</span><span class="dataValue">100</span><span class="codeXML">"type="</span><span class="dataValue">Command.Camera1*</span><span class="codeXML">"/&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/triggers&gt;<br>            </span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;crank name="</span><span class="dataValue">gui::BitmapVideoReader</span><span class="codeXML">"/&gt;<br>            </span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;outputstream name="</span><span class="dataValue">Output</span><span class="codeXML">"source="</span><span class="dataValue">Input.Video.Camera1</span><span class="codeXML">" /&gt;<br>            </span><span class="codeXML"> </span><span class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/phase&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/context&gt;<br>&nbsp;&nbsp; &lt;/module&gt;</span> </p>            <p>This module defines five named parameters, two ofwhich are strings, two are integers and one is a double (floatingpoint). Each has an initial value and some have a default value whichis set when the parameter is being reset. </p>            <p> Some define a step value, which will restrict theparameter from taking on values which are not an integer times the stepvalue away from the initial value. Some specify a minimum and/or amaximum value that the parameter can have. Finally, one parameterspecifies the full list of values that that parameter can ever have. </p>            <p> When working with ones own parameters one can usethe following API, defined for the Messenger object for internalmodules and the Plug object for both C++ and Java external modules. </p>            <p> To check that the module has a parameter by name:            </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool hasParameter(String name); </p>                <p>To read one of the modul's own parameters, either as a string,                   integer or double: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String getParameterString(String param);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; intgetParameterInteger(String param);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doublegetParameterDouble(String param); </p>                <p>To se one of the module's own parameters, either as a string,                   integer or double: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolsetParameterString(String param, String value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolsetParameterInteger(String param, int value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolsetParameterDouble(String param, double value); </p>            <p> To reset a parameter back to its default value: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool resetParameter(String param); </p>            <p> To tweak a parameter up or down one or morenotches: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool increaseParameter(String param, int steps);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; booldecreaseParameter(String param, int steps); </p>            <p> To add another item value to an itemizedparameter: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool addParameterItem(String param, String value);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolremoveParameterItem(String param, String value); </p>                <p> When working with other modules'  parameters one can                   use the following API, defined for the Messenger object for                   internal modules and the Plug object for both C++ and Java external                   modules. </p>            <p> When wishing to read another module's parameters:            </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;String getParameterString(String module, String param);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; intgetParameterInteger(String module, String param);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doublegetParameterDouble(String module, String param); </p>            <p> The string version will always return either thestring value of the knob value <span class="codeCPP">("2","2.54", "text")</span> or if an error occurred the string <span class="codeCPP">PARAM_ERROR: &lt;reason&gt;</span>            </p>            <p> The two numerical functions in case of errorsreturn </p>            <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Java: <span class="codeJava">ret = Parameter.PARAM_ERROR<br>            </span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;C++:&nbsp; <span class="codeCPP">ret = PARAM_ERROR </span>            </p>            <p> For setting another module's parameters: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool setParameterString(String module, String param, String value,String notify);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolsetParameterInteger(String module, String param, int value, Stringnotify);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolsetParameterDouble(String module, String param, double value, Stringnotify); </p>            <p> notify is the name of the Whiteboard which shouldreceive the notification messages. This is not needed for internalmodules, as they already know which Whiteboard to post to, so theMessenger API does not include this last parameter for the functions orany of the functions below. </p>            <p> To tweak a parameter up or down one or morenotches: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool parameterIncrease(String module, String param, int steps, Stringnotify);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolparameterDecrease(String module, String param, int steps, Stringnotify); </p>            <p> To add or remove an item from an itemizedparameter: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool parameterAddItem(String module, String param, String value, Stringnotify);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolparameterRemoveItem(String module, String param, String value, Stringnotify); </p>            <p> To reset a parameter to its default value: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bool parameterReset(String module, String param, String notify); </p>            <p> You can also choose to create a new parameter inyour own module manually from your code at any time: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public boolean addParameter(String paramname, String xml) </p>            <p> With this a module can add an additionalparameter to itself using the same XML as is used in the psySpec, i.e. </p>            <p class="codeXML">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;parameter name="<span class="dataValue">Frequency</span>"type="<span class="dataValue">Integer</span>" value="<span class="dataValue">1</span>" min="<span class="dataValue">0</span>" max="<span class="dataValue">100</span>" step="<span class="dataValue">5</span>" /&gt; </p>            <p> Note that paramname in the code must match the <span class="codeXML">name=""</span> XML parameter name inthe psySpec. </p>                <p> One can also ask for the full list of parameters from another                   module, including each parameter's specification: </p>            <p class="codeCPP">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ObjectDictionary getParameterSpecs(String module)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ParametergetParameterSpec(String module, String parameter) </p>            <p> The former returns a dictionary of ParameterSpecs and the latter just the one Parameter Spec which matches thename. Both can return null if no relevant information is found. </p>            <p> Armed with this spec one can look at the variousspec fields, such as parameter.name, parameter.valueType,parameter.minValue, parameter.maxValue, but also the value of theparameter at the time of the request with parameter.value. </p>            </td>          </tr>        </tbody>      </table>      <p>&nbsp;</p>      <table align="center" bgcolor="#ffffff" border="0" cellpadding="0" cellspacing="0" width="670">        <tbody>          <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">            <td class="tutorialSubsectionHeading" height="30" width="432"><a name="messageandmodulepriorities" id="messageandmodulepriorities"></a>Setting Messageand Module Priorities</td>            <td align="right" width="72">&nbsp;</td>            <td align="right" width="118"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back to Index</font></b></a></font></font></b></td>            <td align="right" width="83">&nbsp;</td>          </tr>          <tr bgcolor="#f7f7f7">            <td colspan="4" height="90" valign="top">            <p>There are two priorities in Psyclone, one for messages and one                   for modules and whiteboards. Each module has a priority setting                   that determines its relative priority for accessing CPU cycles                   &#8212; i.e. its runtime priority. Messages have a prority                   that determines their relative order of scheduling, both in                   the whiteboards and in the modules. </p>            <p>This dual priority mechanism allows the system todynamically prioritize certain information paths over others, creatinga hierarchy of data significance, from the absolutely critical to thesupernumerary while also taking into account the computing cost ofproducing these. </p>            <p>To set this priority in the psySpec, do: </p>            <blockquote>              <p class="codeXML">&lt;modulepriority="3.0"&gt;<br>&nbsp;&nbsp;...<br>&lt;/module&gt; </p>            </blockquote>            <p>The message and runtime priority goes from 0.0(highest) to 6.999... (lowst), following the <a href="http://www.mindmakers.org/openair/airSpecPage.jsp#tag:priority=" class="navLink">OpenAIR specification</a>: </p>            <blockquote>              <p class="plainDataValue">0.0 - Highest.Reserved for I/O, network and other vital systems-related processes. <br>1.0 - Very High. Message scheduling; all whiteboards are at this level.              <br>2.0 - High. <br>3.0 - Medium. <br>4.0 - Low. <br>5.0 - Even lower. Used for rather unimportant processes, e.g. logging.<br>6.0 - Lowest. Background, non-real-time and immaterial tasks.</p>            </blockquote>            <p>When setting the runtime proirity of modules onthis scale, Psyclone will translate the selected priority into anequivalently ranked priority of the operating system that the module isrunning on, maintaining the relative differences between the levels.This means that internal and external modules, as well as whiteboards,are balanced directly against other processes running on the samecomputer. (Psyclone is designed to make no more use of CPU cycles thannecessary; its priority against other processes can be set on UNIX bydoing </p>            <p>If no priority is specified for a module itdefaults to 2.0; whiteboard priority defaults to <span class="keyConcept">1.0</span>. While the priority ofwhiteboards can be set, this is only recommended for unique situations.Priority <span class="keyConcept">0.x</span> isused for network activity and similar activities which are vital tonormal functioning of Psyclone. (The priority of these cannot bemodified). </p>            <p>To set the priority of whiteboards in the psySpecdo: </p>            <blockquote>              <p>&lt;whiteboard priority="2.2"&gt;<br>&nbsp;&nbsp;...<br>&lt;/whiteboard&gt; </p>            </blockquote>            <p>While the priorities of modules and whiteboardscan be set to any level, <span class="keyConcept">it isnot recommended to put anything at the 0 (network) level</span>as this can lead to fairly unpredictable system behaviors. </p>            <p>By default a message inherits the priority of themodule that posts it. The module that posts a message can set itspriority in the post() method. </p>            <p>In the code you can set the priority of a messageby doing </p>            <blockquote>              <p class="codeJava">msg.setPriority(3.3)</p>            </blockquote>            <p>where 3.3 is a float. In the psySpec you can setthe priority of a message by doing:</p>            <blockquote>              <p>&lt;post to="WB1"priority="2.2"&gt;My.Type.1&lt;/post&gt;</p>            </blockquote>            </td>          </tr>        </tbody>      </table>        <p>&nbsp;</p>        <p>&nbsp;</p>        <table align="center" bgcolor="#ffffff" border="0" cellpadding="2" cellspacing="0" width="671">          <tbody>            <tr background="images/grey-bk.gif" bgcolor="#f7f7f7" valign="CENTER">               <td class="tutorialHeading" height="30" width="403"><a name="sharingresources" id="sharingresources"></a><a name="automaticmodulestartup" id="sharingresources"></a><a name="sharingresources" id="sharingresources"></a><a name="sharingresources"></a>Sharing Resources in External Modules</td>              <td align="right" width="65">&nbsp;</td>              <td align="right" width="108"><b><font face="Verdana, Arial, Helvetica, sans-serif"><font color="#b9b9b9"><a href="index.html" class="navLink"><b><font face="Verdana, Arial, Helvetica, sans-serif">Back                 to Index</font></b></a></font></font></b></td>              <td align="right" width="79">&nbsp;</td>            </tr>            <tr bgcolor="#f7f7f7">               <td colspan="4" height="443" valign="top"> <p>                 <p>External modules can share the network resources provided by a single                   Plug, to fit e.g. more socket connection per computer/Plug/Satellite than otherwise possible.                   To specify modules sharing resources use the parameter called                   <span class="codeXML">&lt;shareresources&gt;</span> in the psySpec:</p>                <blockquote>                <p class="codeXML"> &lt;module name=&quot;<span class="dataValue">ModuleB</span>&quot; type="<span class="dataValue">external</span>" shareresources=&quot;<span class="dataValue">ModuleA</span>&quot;&gt;<br>...</p>                </blockquote>                <p> and the function name in the Plug objects:                 <blockquote>                  <p class="codeJava">plug-&gt;shareResources(String name, String xml);</p>                </blockquote>                 </td>            </tr>          </tbody>        </table>        <p>&nbsp;</p>      </td>    </tr>  </tbody></table><p>&nbsp;</p><p>&nbsp; </p><table width="688" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td align="left" valign="bottom"><img src="images/simple-circle-line-1.gif" align="bottom"></td>      <td>&nbsp;</td>    </tr>  </tbody></table><table width="688" height="21" border="0" align="center" cellpadding="0" cellspacing="0">  <tbody>    <tr>      <td align="right" valign="top" width="556"><font face="Verdana, Arial, Helvetica, sans-serif"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-2"><a href="COPYRIGHT.txt">2006&copy;</a><a href="http://www.cmlabs.com">Communicative         Machines</a></font></font></font></td>      <td align="right" valign="top" width="132"><font face="Verdana, Arial, Helvetica, sans-serif"><font size="-2"><a href="LICENSE.txt">License</a></font></font></td>    </tr>  </tbody></table><map name="Map"><area shape="circle" coords="184,206,9" href="#30mins:intmodule"><area shape="circle" coords="206,214,9" href="#30mins:intmodule"><area shape="circle" coords="228,202,9" href="#30mins:intmodule"><area shape="rect" coords="99,293,252,431" href="#30mins:anotherpsyclone"><area shape="rect" coords="297,294,386,396" href="#30mins:satellites"><area shape="circle" coords="321,419,13" href="#30mins:extmodule"><area shape="circle" coords="367,417,13" href="#30mins:extmodule"><area shape="circle" coords="50,335,17" href="#30mins:extmodule"><area shape="rect" coords="16,187,69,248" href="#30mins:psyspec"><area shape="rect" coords="16,369,68,430" href="#30mins:psyspec"><area shape="rect" coords="119,131,159,170" href="#30mins:whiteboard"><area shape="rect" coords="179,140,220,181" href="#30mins:whiteboard"><area shape="circle" coords="47,154,15" href="#30mins:part1"><area shape="circle" coords="267,94,15" href="#30mins:part3"><area shape="circle" coords="151,204,14" href="#30mins:part2"><area shape="circle" coords="151,272,15" href="#30mins:part4"><area shape="circle" coords="345,273,15" href="#30mins:part5"><area shape="poly" coords="35,37,50,31,65,36,111,36,131,20,164,34,187,39,187,68,164,75,136,40,124,70,98,56,67,55,49,60,35,51" href="#30mins:micmodule"><area shape="poly" coords="326,118,342,104,419,70,573,71,573,208,419,211,331,141" href="#30mins:graphicsmodule"><area shape="poly" coords="157,67,140,69,126,91,124,115,131,131,137,113,140,89,153,75" href="#30mins:communication"><area shape="poly" coords="173,77,167,84,168,113,180,134,192,140,186,128,179,109,179,85" href="#30mins:communication"><area shape="poly" coords="222,149,232,146,273,152,321,142,328,142,328,151,275,166,226,156" href="#30mins:communication"><area shape="rect" coords="138,232,218,249" href="#30mins:part1"></map><map name="Map2"><area shape="rect" coords="306,72,382,89" href="http://sourceforge.net/projects/corelibrary/"><area shape="rect" coords="306,48,383,66" href="http://www.mindmakers.org/openair/"><area shape="rect" coords="220,9,383,27" href="usingpsyclone"></map></body></html>